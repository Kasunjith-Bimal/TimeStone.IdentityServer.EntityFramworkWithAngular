2019-07-20 16:29:54.622 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:29:54.951 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:29:54.954 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:29:54.957 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:29:54.959 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:29:54.963 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:29:54.985 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:29:55.837 +05:30 [DBG] Starting grant removal
2019-07-20 16:31:43.638 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 16:31:43.691 +05:30 [DBG] Stopping grant removal
2019-07-20 16:31:52.433 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:31:52.620 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:31:52.623 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:31:52.626 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:31:52.628 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:31:52.630 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:31:52.636 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:31:52.776 +05:30 [DBG] Starting grant removal
2019-07-20 16:31:58.606 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 16:31:58.636 +05:30 [DBG] Stopping grant removal
2019-07-20 16:34:09.629 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:34:09.810 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:34:09.814 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:34:09.819 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:34:09.820 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:34:09.826 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:34:09.831 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:34:09.982 +05:30 [DBG] Starting grant removal
2019-07-20 16:34:47.870 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 16:34:47.899 +05:30 [DBG] Stopping grant removal
2019-07-20 16:39:18.684 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:39:19.784 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:39:19.784 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:39:19.784 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:39:19.785 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:39:19.785 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:39:19.785 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:39:20.726 +05:30 [DBG] Starting grant removal
2019-07-20 16:39:22.449 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 16:39:22.463 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 16:39:22.463 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 16:39:22.463 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 16:39:22.464 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 16:39:22.464 +05:30 [DBG] Error Url: /home/error
2019-07-20 16:39:22.464 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 16:39:40.195 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-20 16:39:40.286 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-20 16:39:40.287 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-20 16:39:40.305 +05:30 [DBG] Start discovery request
2019-07-20 16:39:44.198 +05:30 [DBG] Found [] as all scopes in database
2019-07-20 16:40:45.128 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:40:45.301 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:40:45.304 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:40:45.309 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:40:45.310 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:40:45.316 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:40:45.319 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:40:45.532 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 16:40:45.537 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv6 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 16:40:45.559 +05:30 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5000. ---> System.AggregateException: One or more errors occurred. (An attempt was made to access a socket in a way forbidden by its access permissions) (An attempt was made to access a socket in a way forbidden by its access permissions) ---> System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2019-07-20 16:40:45.764 +05:30 [FTL] An error occurred stopping the application
System.AggregateException: One or more errors occurred. (Not started. Call Start first.) ---> System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.StopAsync(CancellationToken token)
---> (Inner Exception #0) System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)<---

2019-07-20 16:49:14.589 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:49:14.807 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:49:14.807 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:49:14.808 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:49:14.809 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:49:14.809 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:49:14.809 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:49:14.950 +05:30 [DBG] Starting grant removal
2019-07-20 16:49:15.307 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 16:49:15.310 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 16:49:15.310 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 16:49:15.310 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 16:49:15.310 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 16:49:15.311 +05:30 [DBG] Error Url: /home/error
2019-07-20 16:49:15.311 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 16:53:05.476 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 16:53:05.659 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 16:53:05.659 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 16:53:05.659 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 16:53:05.659 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 16:53:05.659 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 16:53:05.660 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 16:53:05.814 +05:30 [DBG] Starting grant removal
2019-07-20 16:53:06.074 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 16:53:06.078 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 16:53:06.078 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 16:53:06.078 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 16:53:06.078 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 16:53:06.078 +05:30 [DBG] Error Url: /home/error
2019-07-20 16:53:06.078 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 17:04:52.177 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 17:04:52.366 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 17:04:52.368 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 17:04:52.368 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 17:04:52.369 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 17:04:52.370 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 17:04:52.370 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 17:04:52.505 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 17:04:52.508 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv6 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 17:04:52.510 +05:30 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5000. ---> System.AggregateException: One or more errors occurred. (An attempt was made to access a socket in a way forbidden by its access permissions) (An attempt was made to access a socket in a way forbidden by its access permissions) ---> System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2019-07-20 17:04:52.580 +05:30 [FTL] An error occurred stopping the application
System.AggregateException: One or more errors occurred. (Not started. Call Start first.) ---> System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.StopAsync(CancellationToken token)
---> (Inner Exception #0) System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)<---

2019-07-20 17:11:22.290 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 17:11:22.471 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 17:11:22.482 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 17:11:22.485 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 17:11:22.489 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 17:11:22.499 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 17:11:22.513 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 17:11:22.670 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 17:11:22.677 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv6 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 17:11:22.686 +05:30 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5000. ---> System.AggregateException: One or more errors occurred. (An attempt was made to access a socket in a way forbidden by its access permissions) (An attempt was made to access a socket in a way forbidden by its access permissions) ---> System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2019-07-20 17:11:22.852 +05:30 [FTL] An error occurred stopping the application
System.AggregateException: One or more errors occurred. (Not started. Call Start first.) ---> System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.StopAsync(CancellationToken token)
---> (Inner Exception #0) System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)<---

2019-07-20 17:34:45.446 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 17:34:45.654 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 17:34:45.657 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 17:34:45.669 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 17:34:45.672 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 17:34:45.680 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 17:34:45.688 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 17:34:45.891 +05:30 [DBG] Starting grant removal
2019-07-20 17:35:20.547 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 17:35:20.586 +05:30 [DBG] Stopping grant removal
2019-07-20 18:03:37.972 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:03:38.128 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:03:38.129 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:03:38.130 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:03:38.130 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:03:38.131 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:03:38.132 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:03:38.276 +05:30 [DBG] Starting grant removal
2019-07-20 18:05:08.036 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 18:05:08.063 +05:30 [DBG] Stopping grant removal
2019-07-20 18:05:15.854 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:05:16.035 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:05:16.036 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:05:16.036 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:05:16.037 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:05:16.037 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:05:16.039 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:05:16.195 +05:30 [DBG] Starting grant removal
2019-07-20 18:07:37.948 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 18:07:37.984 +05:30 [DBG] Stopping grant removal
2019-07-20 18:11:25.622 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:11:25.916 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:11:25.917 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:11:25.917 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:11:25.917 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:11:25.917 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:11:25.917 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:11:26.101 +05:30 [DBG] Starting grant removal
2019-07-20 18:11:27.540 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 18:11:27.585 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 18:11:27.585 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 18:11:27.585 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 18:11:27.585 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 18:11:27.585 +05:30 [DBG] Error Url: /home/error
2019-07-20 18:11:27.586 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 18:14:28.812 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:14:28.991 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:14:28.995 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:14:29.004 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:14:29.011 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:14:29.020 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:14:29.033 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:14:29.217 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 18:14:29.231 +05:30 [WRN] Unable to bind to http://localhost:5000 on the IPv6 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-07-20 18:14:29.243 +05:30 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5000. ---> System.AggregateException: One or more errors occurred. (An attempt was made to access a socket in a way forbidden by its access permissions) (An attempt was made to access a socket in a way forbidden by its access permissions) ---> System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2019-07-20 18:14:29.515 +05:30 [FTL] An error occurred stopping the application
System.AggregateException: One or more errors occurred. (Not started. Call Start first.) ---> System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.StopAsync(CancellationToken token)
---> (Inner Exception #0) System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\TokenCleanup\TokenCleanup.cs:line 77
   at Microsoft.Extensions.DependencyInjection.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in C:\local\identity\server4\IdentityServer4\src\EntityFramework\src\TokenCleanupHost.cs:line 37
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)<---

2019-07-20 18:15:14.910 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:15:15.094 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:15:15.094 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:15:15.094 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:15:15.095 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:15:15.095 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:15:15.095 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:15:15.236 +05:30 [DBG] Starting grant removal
2019-07-20 18:15:15.542 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 18:15:15.546 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 18:15:15.546 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 18:15:15.546 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 18:15:15.546 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 18:15:15.546 +05:30 [DBG] Error Url: /home/error
2019-07-20 18:15:15.546 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 18:15:47.139 +05:30 [DBG] Stopping grant removal
2019-07-20 18:15:47.142 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 18:24:31.918 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:24:32.080 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:24:32.080 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:24:32.080 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:24:32.080 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:24:32.080 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:24:32.080 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:24:32.225 +05:30 [DBG] Starting grant removal
2019-07-20 18:24:32.437 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 18:24:32.442 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 18:24:32.442 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 18:24:32.442 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 18:24:32.442 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 18:24:32.442 +05:30 [DBG] Error Url: /home/error
2019-07-20 18:24:32.442 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 18:51:24.468 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 18:51:24.703 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 18:51:24.703 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 18:51:24.703 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 18:51:24.703 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 18:51:24.703 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 18:51:24.703 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 18:51:25.022 +05:30 [DBG] Starting grant removal
2019-07-20 18:51:25.679 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 18:51:25.683 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 18:51:25.683 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 18:51:25.683 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 18:51:25.683 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 18:51:25.683 +05:30 [DBG] Error Url: /home/error
2019-07-20 18:51:25.683 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 19:37:14.095 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 19:37:14.513 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 19:37:14.513 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 19:37:14.513 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 19:37:14.513 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 19:37:14.513 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 19:37:14.513 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 19:37:15.734 +05:30 [DBG] Starting grant removal
2019-07-20 19:37:16.513 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 19:37:16.521 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 19:37:16.521 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 19:37:16.522 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 19:37:16.523 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 19:37:16.523 +05:30 [DBG] Error Url: /home/error
2019-07-20 19:37:16.523 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 20:00:58.021 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 20:00:58.260 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 20:00:58.260 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 20:00:58.260 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 20:00:58.260 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 20:00:58.260 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 20:00:58.260 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 20:00:58.439 +05:30 [DBG] Starting grant removal
2019-07-20 20:00:58.905 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 20:00:58.909 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 20:00:58.909 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 20:00:58.909 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 20:00:58.909 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 20:00:58.909 +05:30 [DBG] Error Url: /home/error
2019-07-20 20:00:58.910 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 22:00:59.533 +05:30 [INF] Removing 0 grants
2019-07-20 22:00:59.576 +05:30 [WRN] Query: '(from DeviceFlowCodes x in DbSet<DeviceFlowCodes> where [x].Expiration < (Nullable<DateTime>)DateTim...' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-20 22:00:59.624 +05:30 [INF] Removing 0 device flow codes
2019-07-20 22:54:00.346 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 22:54:01.083 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 22:54:01.084 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 22:54:01.084 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 22:54:01.084 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 22:54:01.084 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 22:54:01.084 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 22:54:04.030 +05:30 [DBG] Starting grant removal
2019-07-20 22:54:05.216 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 22:54:05.223 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 22:54:05.223 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 22:54:05.223 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 22:54:05.224 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 22:54:05.224 +05:30 [DBG] Error Url: /home/error
2019-07-20 22:54:05.224 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 22:55:13.874 +05:30 [DBG] Stopping grant removal
2019-07-20 22:55:13.894 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 22:59:42.294 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 22:59:42.859 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 22:59:42.859 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 22:59:42.859 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 22:59:42.859 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 22:59:42.859 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 22:59:42.859 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 22:59:45.032 +05:30 [DBG] Starting grant removal
2019-07-20 22:59:48.052 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 22:59:48.060 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 22:59:48.060 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 22:59:48.060 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 22:59:48.060 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 22:59:48.060 +05:30 [DBG] Error Url: /home/error
2019-07-20 22:59:48.060 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 22:59:52.909 +05:30 [DBG] Stopping grant removal
2019-07-20 22:59:53.235 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 23:00:45.134 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 23:00:45.259 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 23:00:45.260 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 23:00:45.260 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 23:00:45.261 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 23:00:45.261 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 23:00:45.261 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 23:00:45.466 +05:30 [DBG] Starting grant removal
2019-07-20 23:00:45.858 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 23:00:45.863 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 23:00:45.865 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 23:00:45.865 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 23:00:45.865 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 23:00:45.865 +05:30 [DBG] Error Url: /home/error
2019-07-20 23:00:45.865 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 23:00:47.781 +05:30 [DBG] Stopping grant removal
2019-07-20 23:00:47.786 +05:30 [DBG] TaskCanceledException. Exiting.
2019-07-20 23:04:59.578 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-20 23:04:59.870 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-20 23:04:59.870 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-20 23:04:59.870 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-20 23:04:59.871 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-20 23:04:59.871 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-20 23:04:59.871 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-20 23:05:02.670 +05:30 [DBG] Starting grant removal
2019-07-20 23:05:06.743 +05:30 [DBG] Login Url: /Account/Login
2019-07-20 23:05:06.753 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-20 23:05:06.753 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-20 23:05:06.753 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-20 23:05:06.753 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-20 23:05:06.753 +05:30 [DBG] Error Url: /home/error
2019-07-20 23:05:06.755 +05:30 [DBG] Error Id Parameter: errorId
2019-07-20 23:05:23.385 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-20 23:05:23.580 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-20 23:05:23.581 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-20 23:05:23.600 +05:30 [DBG] Start discovery request
2019-07-20 23:05:27.114 +05:30 [DBG] Found ["openid","email","profile","API1"] as all scopes in database
2019-07-20 23:05:27.776 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-20 23:05:27.778 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-20 23:05:27.778 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-20 23:05:27.784 +05:30 [DBG] Start key discovery request
2019-07-20 23:05:28.624 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-20 23:05:28.637 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-20 23:05:28.637 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-20 23:05:28.645 +05:30 [DBG] Start authorize request
2019-07-20 23:05:28.687 +05:30 [DBG] No user present in authorize request
2019-07-20 23:05:28.701 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:05:30.139 +05:30 [DBG] mvc found in database: true
2019-07-20 23:05:30.197 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:05:30.265 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:05:30.268 +05:30 [DBG] No PKCE used.
2019-07-20 23:05:30.385 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:05:31.035 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:05:31.077 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:05:31.325 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:05:31.340 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:05:31.365 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","AllowedRedirectUris":["http://localhost:3728/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile email API1","State":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","UiLocales":null,"Nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:3728/signin-oidc","response_type":"code id_token","scope":"openid profile email API1","response_mode":"form_post","nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","state":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-20 23:05:31.387 +05:30 [INF] Showing login: User is not authenticated
2019-07-20 23:05:31.996 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:05:32.045 +05:30 [DBG] mvc found in database: true
2019-07-20 23:05:32.045 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:05:32.046 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:05:32.047 +05:30 [DBG] No PKCE used.
2019-07-20 23:05:32.074 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:05:32.294 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:05:32.316 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:05:32.559 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:05:32.560 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:05:32.786 +05:30 [DBG] mvc found in database: true
2019-07-20 23:05:32.786 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:30.596 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-20 23:06:30.952 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:06:30.999 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:30.999 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:30.999 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:06:30.999 +05:30 [DBG] No PKCE used.
2019-07-20 23:06:31.024 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:31.216 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:31.230 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:31.283 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:31.290 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:06:32.608 +05:30 [DBG] Augmenting SignInContext
2019-07-20 23:06:32.614 +05:30 [DBG] Adding idp claim with value: local
2019-07-20 23:06:32.615 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-20 23:06:32.615 +05:30 [DBG] Adding auth_time claim with value: 1563644192
2019-07-20 23:06:32.674 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-20 23:06:32.841 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","DisplayName":"bob","Endpoint":"UI","ClientId":"mvc","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOD72CFNTOJ:00000004","TimeStamp":"2019-07-20T17:36:32.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-20 23:06:32.942 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:32.942 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:33.178 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-20 23:06:33.179 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-20 23:06:33.179 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-20 23:06:33.190 +05:30 [DBG] Start authorize callback request
2019-07-20 23:06:33.227 +05:30 [DBG] User in authorize request: dc2d1085-781b-43a2-a654-5e44463a441b
2019-07-20 23:06:33.227 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:06:33.311 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:33.311 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:33.312 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:06:33.312 +05:30 [DBG] No PKCE used.
2019-07-20 23:06:33.332 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:33.573 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:33.598 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:33.811 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:33.812 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:06:33.813 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","AllowedRedirectUris":["http://localhost:3728/signin-oidc"],"SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile email API1","State":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","UiLocales":null,"Nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea42ca3b640be187fdd9530b086916a4","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:3728/signin-oidc","response_type":"code id_token","scope":"openid profile email API1","response_mode":"form_post","nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","state":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-20 23:06:34.028 +05:30 [DBG] npKSQXrVU8gIRUBwL3OZHY+LEOCC6AvxXiZ+VOQquhA= found in database: false
2019-07-20 23:06:34.028 +05:30 [DBG] user_consent grant with value: mvc|dc2d1085-781b-43a2-a654-5e44463a441b not found in store.
2019-07-20 23:06:34.028 +05:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-20 23:06:34.028 +05:30 [INF] Showing consent: User has not yet consented
2019-07-20 23:06:34.156 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:06:34.215 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:34.215 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:34.216 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:06:34.216 +05:30 [DBG] No PKCE used.
2019-07-20 23:06:34.237 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:34.438 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:34.458 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:34.700 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:34.700 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:06:34.780 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:34.780 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:34.832 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:35.025 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:39.023 +05:30 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-20 23:06:39.126 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:06:39.180 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:39.180 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:39.180 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:06:39.180 +05:30 [DBG] No PKCE used.
2019-07-20 23:06:39.197 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:39.443 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:39.449 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:39.651 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:39.651 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:06:39.654 +05:30 [INF] {"SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","ClientId":"mvc","RequestedScopes":["openid","profile","email","API1"],"GrantedScopes":["openid","email","profile","API1"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLOD72CFNTOJ:00000006","TimeStamp":"2019-07-20T17:36:39.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-07-20 23:06:39.780 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:39.780 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:39.925 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-20 23:06:39.928 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-20 23:06:39.929 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-20 23:06:39.929 +05:30 [DBG] Start authorize callback request
2019-07-20 23:06:39.997 +05:30 [DBG] User in authorize request: dc2d1085-781b-43a2-a654-5e44463a441b
2019-07-20 23:06:39.997 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:06:40.114 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:40.115 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:40.115 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:06:40.115 +05:30 [DBG] No PKCE used.
2019-07-20 23:06:40.129 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:40.390 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:40.421 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:40.690 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:40.691 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:06:40.691 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","AllowedRedirectUris":["http://localhost:3728/signin-oidc"],"SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile email API1","State":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","UiLocales":null,"Nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea42ca3b640be187fdd9530b086916a4","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:3728/signin-oidc","response_type":"code id_token","scope":"openid profile email API1","response_mode":"form_post","nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","state":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-20 23:06:40.731 +05:30 [DBG] npKSQXrVU8gIRUBwL3OZHY+LEOCC6AvxXiZ+VOQquhA= found in database: false
2019-07-20 23:06:40.731 +05:30 [DBG] user_consent grant with value: mvc|dc2d1085-781b-43a2-a654-5e44463a441b not found in store.
2019-07-20 23:06:40.731 +05:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-20 23:06:40.745 +05:30 [INF] User consented to scopes: ["openid","email","profile","API1"]
2019-07-20 23:06:40.748 +05:30 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","API1"]
2019-07-20 23:06:40.753 +05:30 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: dc2d1085-781b-43a2-a654-5e44463a441b
2019-07-20 23:06:40.814 +05:30 [DBG] npKSQXrVU8gIRUBwL3OZHY+LEOCC6AvxXiZ+VOQquhA= not found in database
2019-07-20 23:06:41.731 +05:30 [DBG] Creating Hybrid Flow response.
2019-07-20 23:06:41.814 +05:30 [DBG] 4OMNTsbwjHOkMfo2/JzOrHpY9vKGzQ28+A+sOqdxPsM= not found in database
2019-07-20 23:06:41.840 +05:30 [DBG] Creating Implicit Flow response.
2019-07-20 23:06:41.855 +05:30 [DBG] Getting claims for identity token for subject: dc2d1085-781b-43a2-a654-5e44463a441b and client: mvc
2019-07-20 23:06:41.859 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-20 23:06:43.778 +05:30 [INF] {"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","Endpoint":"Authorize","SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","Scopes":"openid profile email API1","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****Hz6g","$type":"Token"},{"TokenType":"code","TokenValue":"****effa","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOD72CFNTOI:00000006","TimeStamp":"2019-07-20T17:36:43.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-20 23:06:43.780 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","ClientId":"mvc","RedirectUri":"http://localhost:3728/signin-oidc","State":"CfDJ8POuXt9tv4tEqo04SnKVjl49fRTRPPA_LSPyoXtQG2hA0plNODKhx_I5BB9WuVtDD2thrF9zVHQ-J1mIr-tH6TJrCbGHwQON2ph39mtXyKdY7WDgoXHQUGVcyyIGwXxciyD6FMxbzBlLuGasW0b6F2scC52nARmvgJcYIh7Pc7hrqyCzqmBgS1HqDdenhNPNMu2rkaSKCM739nQw6tOtUsqrRFzQBvOw3j7amF2mo-aNh6RlvkPZVZQ5HGBFKZRwWr8f9PLFMMsLDYmQNr8lTD-VbaqAxN1DUOcTcuDjYe22DrIKCgl6DGz-LU_8MFCCaw","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-20 23:06:43.844 +05:30 [DBG] Augmenting SignInContext
2019-07-20 23:06:43.847 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-20 23:06:44.742 +05:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-20 23:06:44.761 +05:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-20 23:06:44.761 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-20 23:06:44.775 +05:30 [DBG] Start token request.
2019-07-20 23:06:44.804 +05:30 [DBG] Start client validation
2019-07-20 23:06:44.819 +05:30 [DBG] Start parsing Basic Authentication secret
2019-07-20 23:06:44.825 +05:30 [DBG] Start parsing for secret in post body
2019-07-20 23:06:44.863 +05:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-20 23:06:44.864 +05:30 [DBG] Secret id found: mvc
2019-07-20 23:06:44.948 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:44.963 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:44.999 +05:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-20 23:06:45.000 +05:30 [DBG] Client validation success
2019-07-20 23:06:45.001 +05:30 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLOD72CFNTOJ:00000007","TimeStamp":"2019-07-20T17:36:45.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-07-20 23:06:45.029 +05:30 [DBG] Start token request validation
2019-07-20 23:06:45.048 +05:30 [DBG] Start validation of authorization code token request
2019-07-20 23:06:45.064 +05:30 [DBG] 4OMNTsbwjHOkMfo2/JzOrHpY9vKGzQ28+A+sOqdxPsM= found in database: true
2019-07-20 23:06:45.107 +05:30 [DBG] removing 4OMNTsbwjHOkMfo2/JzOrHpY9vKGzQ28+A+sOqdxPsM= persisted grant from database
2019-07-20 23:06:45.190 +05:30 [DBG] Validation of authorization code token request success
2019-07-20 23:06:45.206 +05:30 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"Mvc Demo","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"2d973c20defa396e5a0f1e875c1fa922035344811fa8e4649c1e054c71faeffa","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"2d973c20defa396e5a0f1e875c1fa922035344811fa8e4649c1e054c71faeffa","grant_type":"authorization_code","redirect_uri":"http://localhost:3728/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-07-20 23:06:45.303 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:45.303 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:45.324 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:45.527 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:45.545 +05:30 [DBG] Getting claims for access token for client: mvc
2019-07-20 23:06:45.546 +05:30 [DBG] Getting claims for access token for subject: dc2d1085-781b-43a2-a654-5e44463a441b
2019-07-20 23:06:45.774 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:45.775 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:45.804 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:06:46.077 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:06:46.077 +05:30 [DBG] Getting claims for identity token for subject: dc2d1085-781b-43a2-a654-5e44463a441b and client: mvc
2019-07-20 23:06:46.077 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-20 23:06:46.091 +05:30 [INF] {"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":null,"Endpoint":"Token","SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","Scopes":"openid profile email API1","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****_ixw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b5fA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOD72CFNTOJ:00000007","TimeStamp":"2019-07-20T17:36:46.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-20 23:06:46.093 +05:30 [DBG] Token request success.
2019-07-20 23:06:51.028 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-20 23:06:51.031 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-20 23:06:51.031 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-20 23:06:51.031 +05:30 [DBG] Start discovery request
2019-07-20 23:06:51.105 +05:30 [DBG] Found ["openid","email","profile","API1"] as all scopes in database
2019-07-20 23:06:51.624 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-20 23:06:51.624 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-20 23:06:51.625 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-20 23:06:51.625 +05:30 [DBG] Start key discovery request
2019-07-20 23:06:56.068 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-20 23:06:56.070 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-20 23:06:56.071 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-20 23:06:56.078 +05:30 [DBG] Processing signout request for dc2d1085-781b-43a2-a654-5e44463a441b
2019-07-20 23:06:56.086 +05:30 [DBG] Start end session request validation
2019-07-20 23:06:56.098 +05:30 [DBG] Start identity token validation
2019-07-20 23:06:56.187 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:56.188 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:56.188 +05:30 [DBG] Client found: mvc / Mvc Demo
2019-07-20 23:06:56.339 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-20 23:06:56.341 +05:30 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"Mvc Demo","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1563644206,"exp":1563644506,"iss":"http://localhost:5000","aud":"mvc","nonce":"636992409284926598.NGMwN2M2ODgtZWRmZi00ZWU3LTk1MzctMzVmMDIxZTJmMTM3NDQ3MTc4NzYtYmUxYS00NTQxLWIzZTctYWVjMjFjYzY4YThm","iat":1563644206,"at_hash":"5fa0Qk6U2bLHDo4W-KTDEg","sid":"ea42ca3b640be187fdd9530b086916a4","sub":"dc2d1085-781b-43a2-a654-5e44463a441b","auth_time":1563644192,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-20 23:06:56.355 +05:30 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"Mvc Demo","SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","PostLogOutUri":"http://localhost:3728/signout-callback-oidc","State":"CfDJ8POuXt9tv4tEqo04SnKVjl75TZe_bnSIuxmG_w6mUvGLVcweLg15hJw458AP3XPBjB17wnqmusCCOmQAQCb44UGEf5i24bvxnNSHc0u-FdZqoGZAYByI_dJaAQdwnzA0_xBbiAf9wXL7mR60ewkOzxU","Raw":{"post_logout_redirect_uri":"http://localhost:3728/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8POuXt9tv4tEqo04SnKVjl75TZe_bnSIuxmG_w6mUvGLVcweLg15hJw458AP3XPBjB17wnqmusCCOmQAQCb44UGEf5i24bvxnNSHc0u-FdZqoGZAYByI_dJaAQdwnzA0_xBbiAf9wXL7mR60ewkOzxU","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-20 23:06:56.362 +05:30 [DBG] Success validating end session request from mvc
2019-07-20 23:06:56.502 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-20 23:06:56.506 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-20 23:06:56.506 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-20 23:06:56.507 +05:30 [INF] {"SubjectId":"dc2d1085-781b-43a2-a654-5e44463a441b","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOD72CFNTOJ:00000009","TimeStamp":"2019-07-20T17:36:56.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-20 23:06:56.792 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-20 23:06:56.800 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-20 23:06:56.800 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-20 23:06:56.830 +05:30 [DBG] Processing signout callback request
2019-07-20 23:06:56.954 +05:30 [DBG] mvc found in database: true
2019-07-20 23:06:56.954 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:06:56.954 +05:30 [DBG] No client front-channel logout URLs
2019-07-20 23:06:56.954 +05:30 [DBG] No client back-channel logout URLs
2019-07-20 23:06:56.954 +05:30 [INF] Successful signout callback.
2019-07-20 23:06:56.954 +05:30 [DBG] No client front-channel iframe urls
2019-07-20 23:06:56.954 +05:30 [DBG] No client back-channel iframe urls
2019-07-20 23:07:01.093 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-20 23:07:01.094 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-20 23:07:01.094 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-20 23:07:01.094 +05:30 [DBG] Start authorize request
2019-07-20 23:07:01.095 +05:30 [DBG] No user present in authorize request
2019-07-20 23:07:01.095 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:01.184 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:01.184 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:01.184 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:01.184 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:01.214 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:01.411 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:01.433 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:01.737 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:01.738 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:01.739 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","AllowedRedirectUris":["http://localhost:3728/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile email API1","State":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","UiLocales":null,"Nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:3728/signin-oidc","response_type":"code id_token","scope":"openid profile email API1","response_mode":"form_post","nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","state":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-20 23:07:01.740 +05:30 [INF] Showing login: User is not authenticated
2019-07-20 23:07:01.792 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:01.868 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:01.868 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:01.869 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:01.869 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:01.889 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:02.152 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:02.176 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:02.436 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:02.437 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:02.509 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:02.509 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:35.771 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-20 23:07:35.782 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:35.862 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:35.863 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:35.864 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:35.864 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:35.885 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:36.101 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:36.119 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:36.381 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:36.381 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:36.451 +05:30 [DBG] Augmenting SignInContext
2019-07-20 23:07:36.452 +05:30 [DBG] Adding idp claim with value: local
2019-07-20 23:07:36.452 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-20 23:07:36.452 +05:30 [DBG] Adding auth_time claim with value: 1563644256
2019-07-20 23:07:36.453 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-20 23:07:36.466 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","DisplayName":"alice","Endpoint":"UI","ClientId":"mvc","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOD72CFNTOJ:0000000B","TimeStamp":"2019-07-20T17:37:36.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-20 23:07:36.517 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:36.517 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:36.548 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-20 23:07:36.549 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-20 23:07:36.549 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-20 23:07:36.550 +05:30 [DBG] Start authorize callback request
2019-07-20 23:07:36.551 +05:30 [DBG] User in authorize request: e69a0683-dce3-4a1c-93e3-b64aab9fa68a
2019-07-20 23:07:36.551 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:36.617 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:36.617 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:36.618 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:36.618 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:36.660 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:36.889 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:36.907 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:37.095 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:37.096 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:37.096 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","AllowedRedirectUris":["http://localhost:3728/signin-oidc"],"SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile email API1","State":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","UiLocales":null,"Nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d41b85b854724ec46e284f654cd25070","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:3728/signin-oidc","response_type":"code id_token","scope":"openid profile email API1","response_mode":"form_post","nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","state":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-20 23:07:37.133 +05:30 [DBG] +hIZ1NkKUNOLsQFiM/U9svd+tFlzYLbxjK18B8FjhQY= found in database: false
2019-07-20 23:07:37.134 +05:30 [DBG] user_consent grant with value: mvc|e69a0683-dce3-4a1c-93e3-b64aab9fa68a not found in store.
2019-07-20 23:07:37.134 +05:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-20 23:07:37.134 +05:30 [INF] Showing consent: User has not yet consented
2019-07-20 23:07:37.191 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:37.237 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:37.237 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:37.237 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:37.237 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:37.260 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:37.587 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:37.604 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:37.810 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:37.811 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:37.869 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:37.869 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:37.885 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:38.121 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:41.508 +05:30 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-20 23:07:41.512 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:41.578 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:41.579 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:41.579 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:41.579 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:41.593 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:41.786 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:41.792 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:41.801 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:41.801 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:41.801 +05:30 [INF] {"SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","ClientId":"mvc","RequestedScopes":["openid","profile","email","API1"],"GrantedScopes":["openid","email","profile","API1"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLOD72CFNTOI:0000000C","TimeStamp":"2019-07-20T17:37:41.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-07-20 23:07:41.810 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:41.810 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:41.840 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-20 23:07:41.841 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-20 23:07:41.841 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-20 23:07:41.841 +05:30 [DBG] Start authorize callback request
2019-07-20 23:07:41.841 +05:30 [DBG] User in authorize request: e69a0683-dce3-4a1c-93e3-b64aab9fa68a
2019-07-20 23:07:41.842 +05:30 [DBG] Start authorize request protocol validation
2019-07-20 23:07:41.901 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:41.901 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:41.901 +05:30 [DBG] Checking for PKCE parameters
2019-07-20 23:07:41.901 +05:30 [DBG] No PKCE used.
2019-07-20 23:07:41.920 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:42.149 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:42.172 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:42.387 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:42.387 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-20 23:07:42.387 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","AllowedRedirectUris":["http://localhost:3728/signin-oidc"],"SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile email API1","State":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","UiLocales":null,"Nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d41b85b854724ec46e284f654cd25070","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:3728/signin-oidc","response_type":"code id_token","scope":"openid profile email API1","response_mode":"form_post","nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","state":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-20 23:07:42.405 +05:30 [DBG] +hIZ1NkKUNOLsQFiM/U9svd+tFlzYLbxjK18B8FjhQY= found in database: false
2019-07-20 23:07:42.405 +05:30 [DBG] user_consent grant with value: mvc|e69a0683-dce3-4a1c-93e3-b64aab9fa68a not found in store.
2019-07-20 23:07:42.405 +05:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-20 23:07:42.405 +05:30 [INF] User consented to scopes: ["openid","email","profile","API1"]
2019-07-20 23:07:42.406 +05:30 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","API1"]
2019-07-20 23:07:42.406 +05:30 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e69a0683-dce3-4a1c-93e3-b64aab9fa68a
2019-07-20 23:07:42.422 +05:30 [DBG] +hIZ1NkKUNOLsQFiM/U9svd+tFlzYLbxjK18B8FjhQY= not found in database
2019-07-20 23:07:42.493 +05:30 [DBG] Creating Hybrid Flow response.
2019-07-20 23:07:42.496 +05:30 [DBG] l0dUAhUKCJzB9uPFOGZuVgo/2iVXQyVJnJjE5svmEzQ= not found in database
2019-07-20 23:07:42.501 +05:30 [DBG] Creating Implicit Flow response.
2019-07-20 23:07:42.501 +05:30 [DBG] Getting claims for identity token for subject: e69a0683-dce3-4a1c-93e3-b64aab9fa68a and client: mvc
2019-07-20 23:07:42.501 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-20 23:07:42.505 +05:30 [INF] {"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":"http://localhost:3728/signin-oidc","Endpoint":"Authorize","SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","Scopes":"openid profile email API1","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****2dNw","$type":"Token"},{"TokenType":"code","TokenValue":"****9f3c","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOD72CFNTOJ:0000000D","TimeStamp":"2019-07-20T17:37:42.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-20 23:07:42.506 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","ClientId":"mvc","RedirectUri":"http://localhost:3728/signin-oidc","State":"CfDJ8POuXt9tv4tEqo04SnKVjl4UtYEtISm06Vc0CKuYtP1OGQUzubJ-PVrZeRenDLqmTyjVLAAiz3GKxhc-VDALA6ohcke2OZKrlBoTuix8_C6-rFujFB7gLOliOlV4mlS80cMEqFKpHL-ULMpRX46_zf4Nf5TH1D_uCcfhWG1cz6x-gs2jsPj-9TKkbTUxSNs-YOAA8IZ66AXhFKo9LouU5gIBgkpwsKuTPw4GeYKj-IP_nFdHzm3stNmK914OIiZo2bX0xE3oM0EdKuIrTpFSoZOwkCKmF7I1CCp92rKEfz100dJI-4BBqn6IwcmE0x7s-w","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-20 23:07:42.506 +05:30 [DBG] Augmenting SignInContext
2019-07-20 23:07:42.507 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-20 23:07:42.605 +05:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-20 23:07:42.606 +05:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-20 23:07:42.606 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-20 23:07:42.606 +05:30 [DBG] Start token request.
2019-07-20 23:07:42.607 +05:30 [DBG] Start client validation
2019-07-20 23:07:42.607 +05:30 [DBG] Start parsing Basic Authentication secret
2019-07-20 23:07:42.607 +05:30 [DBG] Start parsing for secret in post body
2019-07-20 23:07:42.618 +05:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-20 23:07:42.618 +05:30 [DBG] Secret id found: mvc
2019-07-20 23:07:42.800 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:42.801 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:42.801 +05:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-20 23:07:42.801 +05:30 [DBG] Client validation success
2019-07-20 23:07:42.801 +05:30 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLOD72CFNTOI:0000000D","TimeStamp":"2019-07-20T17:37:42.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-07-20 23:07:42.801 +05:30 [DBG] Start token request validation
2019-07-20 23:07:42.801 +05:30 [DBG] Start validation of authorization code token request
2019-07-20 23:07:42.808 +05:30 [DBG] l0dUAhUKCJzB9uPFOGZuVgo/2iVXQyVJnJjE5svmEzQ= found in database: true
2019-07-20 23:07:42.812 +05:30 [DBG] removing l0dUAhUKCJzB9uPFOGZuVgo/2iVXQyVJnJjE5svmEzQ= persisted grant from database
2019-07-20 23:07:43.016 +05:30 [DBG] Validation of authorization code token request success
2019-07-20 23:07:43.016 +05:30 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"Mvc Demo","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"dc5521948eb76dcc8d23bc6418fad5ecc8b67888e7845dd5e4784da966b69f3c","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"dc5521948eb76dcc8d23bc6418fad5ecc8b67888e7845dd5e4784da966b69f3c","grant_type":"authorization_code","redirect_uri":"http://localhost:3728/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-07-20 23:07:43.068 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:43.068 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:43.088 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:43.304 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:43.305 +05:30 [DBG] Getting claims for access token for client: mvc
2019-07-20 23:07:43.305 +05:30 [DBG] Getting claims for access token for subject: e69a0683-dce3-4a1c-93e3-b64aab9fa68a
2019-07-20 23:07:43.388 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:43.388 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:43.420 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-20 23:07:43.641 +05:30 [DBG] Found ["API1"] API scopes in database
2019-07-20 23:07:43.642 +05:30 [DBG] Getting claims for identity token for subject: e69a0683-dce3-4a1c-93e3-b64aab9fa68a and client: mvc
2019-07-20 23:07:43.643 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-20 23:07:43.648 +05:30 [INF] {"ClientId":"mvc","ClientName":"Mvc Demo","RedirectUri":null,"Endpoint":"Token","SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","Scopes":"openid profile email API1","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****GGaA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****NYZg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOD72CFNTOI:0000000D","TimeStamp":"2019-07-20T17:37:43.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-20 23:07:43.648 +05:30 [DBG] Token request success.
2019-07-20 23:07:52.524 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-20 23:07:52.526 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-20 23:07:52.526 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-20 23:07:52.527 +05:30 [DBG] Processing signout request for e69a0683-dce3-4a1c-93e3-b64aab9fa68a
2019-07-20 23:07:52.527 +05:30 [DBG] Start end session request validation
2019-07-20 23:07:52.527 +05:30 [DBG] Start identity token validation
2019-07-20 23:07:52.624 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:52.624 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:52.624 +05:30 [DBG] Client found: mvc / Mvc Demo
2019-07-20 23:07:52.635 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-20 23:07:52.636 +05:30 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"Mvc Demo","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1563644263,"exp":1563644563,"iss":"http://localhost:5000","aud":"mvc","nonce":"636992410210668152.YzMyOWJmNDItMzI0Mi00YmUxLWFlM2EtNmJiMGY5OTVlODY1YzFiNGZmYTEtMjI0MC00YmI5LWJjYTItYWY4NjYxMzVlY2Vl","iat":1563644263,"at_hash":"VZ56FuFX1wgSAbZeQ3GIuA","sid":"d41b85b854724ec46e284f654cd25070","sub":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","auth_time":1563644256,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-20 23:07:52.636 +05:30 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"Mvc Demo","SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","PostLogOutUri":"http://localhost:3728/signout-callback-oidc","State":"CfDJ8POuXt9tv4tEqo04SnKVjl5ETWcX33gnrHyB_y6T6XaGPV8L2bZEJxORpenu3DvRDFx2sg200XKFKjed-mMDh3w8rVU6tNGgQtqsKJPywXcxi1weLhMkSKtrJKgMj_haZShrnag1T7R0duzUecVb3v8","Raw":{"post_logout_redirect_uri":"http://localhost:3728/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8POuXt9tv4tEqo04SnKVjl5ETWcX33gnrHyB_y6T6XaGPV8L2bZEJxORpenu3DvRDFx2sg200XKFKjed-mMDh3w8rVU6tNGgQtqsKJPywXcxi1weLhMkSKtrJKgMj_haZShrnag1T7R0duzUecVb3v8","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-20 23:07:52.636 +05:30 [DBG] Success validating end session request from mvc
2019-07-20 23:07:52.673 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-20 23:07:52.674 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-20 23:07:52.679 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-20 23:07:52.679 +05:30 [INF] {"SubjectId":"e69a0683-dce3-4a1c-93e3-b64aab9fa68a","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOD72CFNTOI:0000000E","TimeStamp":"2019-07-20T17:37:52.0000000Z","ProcessId":17424,"LocalIpAddress":"127.0.0.1:11846","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-20 23:07:52.862 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-20 23:07:52.866 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-20 23:07:52.866 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-20 23:07:52.866 +05:30 [DBG] Processing signout callback request
2019-07-20 23:07:53.043 +05:30 [DBG] mvc found in database: true
2019-07-20 23:07:53.043 +05:30 [DBG] client configuration validation for client mvc succeeded.
2019-07-20 23:07:53.043 +05:30 [DBG] No client front-channel logout URLs
2019-07-20 23:07:53.043 +05:30 [DBG] No client back-channel logout URLs
2019-07-20 23:07:53.043 +05:30 [INF] Successful signout callback.
2019-07-20 23:07:53.043 +05:30 [DBG] No client front-channel iframe urls
2019-07-20 23:07:53.043 +05:30 [DBG] No client back-channel iframe urls
2019-07-27 17:44:33.498 +05:30 [ERR] Failed executing DbCommand (3,193ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (API1).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:4a22da35-0203-49ec-bb69-ed4877c74978
Error Number:2601,State:1,Class:14
2019-07-27 17:44:37.027 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (API1).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (API1).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-27 17:45:34.377 +05:30 [FTL] Application startup exception
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (API1).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at TimeStone.IdentityServer.Startup.InitializeDatabase(IApplicationBuilder app) in C:\Users\kasun\OneDrive\Desktop\Test\TimeStone.IdentityServer.EntityFramwork\TimeStone.IdentityServer\Startup.cs:line 154
   at TimeStone.IdentityServer.Startup.Configure(IApplicationBuilder app) in C:\Users\kasun\OneDrive\Desktop\Test\TimeStone.IdentityServer.EntityFramwork\TimeStone.IdentityServer\Startup.cs:line 99
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-07-27 17:45:35.238 +05:30 [DBG] Starting grant removal
2019-07-27 17:45:37.284 +05:30 [ERR] Connection id "0HLOIHGGI88BI", Request id "0HLOIHGGI88BI:00000001": An unhandled exception was thrown by the application.
System.ArgumentNullException: Value cannot be null.
Parameter name: values
   at System.String.Join(String separator, IEnumerable`1 values)
   at Microsoft.Extensions.RazorViews.BaseView.EndWriteAttribute()
   at Microsoft.AspNetCore.Hosting.Views.ErrorPage.ExecuteAsync()
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2019-07-27 17:54:29.217 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-27 17:54:29.432 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-27 17:54:29.432 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-27 17:54:29.433 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-27 17:54:29.433 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-27 17:54:29.433 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-27 17:54:29.433 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-27 17:54:30.335 +05:30 [DBG] Starting grant removal
2019-07-27 17:54:31.362 +05:30 [DBG] Login Url: /Account/Login
2019-07-27 17:54:31.366 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-27 17:54:31.367 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-27 17:54:31.367 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-27 17:54:31.367 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-27 17:54:31.367 +05:30 [DBG] Error Url: /home/error
2019-07-27 17:54:31.367 +05:30 [DBG] Error Id Parameter: errorId
2019-07-27 17:57:21.151 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:57:21.625 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:57:21.632 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:57:21.669 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:57:21.751 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:57:21.751 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:57:21.844 +05:30 [DBG] Start discovery request
2019-07-27 17:57:22.987 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:57:23.364 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 17:57:23.377 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 17:57:23.377 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 17:57:23.385 +05:30 [DBG] Start authorize request
2019-07-27 17:57:23.455 +05:30 [DBG] No user present in authorize request
2019-07-27 17:57:23.478 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 17:57:24.604 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:57:24.690 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:57:25.059 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:57:25.662 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:57:25.870 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:57:26.334 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:57:26.356 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 17:57:26.383 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c5b541029b2142ce9b0099d261283ce1","UiLocales":null,"Nonce":"da4321ed7cf6485e8bd197203aa56089","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"c5b541029b2142ce9b0099d261283ce1","nonce":"da4321ed7cf6485e8bd197203aa56089"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 17:57:26.398 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 17:57:27.155 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 17:57:28.068 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:57:28.069 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:57:28.303 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:57:28.863 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:57:29.108 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:57:29.673 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:57:29.674 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 17:57:30.365 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:57:30.366 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:16.919 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 17:58:17.136 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 17:58:17.895 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:17.895 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:18.103 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:18.612 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:58:18.804 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:19.459 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:58:19.459 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 17:58:21.016 +05:30 [DBG] Augmenting SignInContext
2019-07-27 17:58:21.021 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 17:58:21.022 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 17:58:21.022 +05:30 [DBG] Adding auth_time claim with value: 1564230501
2019-07-27 17:58:21.056 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 17:58:21.201 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIHLFVP6QK:00000002","TimeStamp":"2019-07-27T12:28:21.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 17:58:21.979 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:21.979 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:22.109 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 17:58:22.111 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 17:58:22.111 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 17:58:22.119 +05:30 [DBG] Start authorize callback request
2019-07-27 17:58:22.126 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 17:58:22.126 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 17:58:22.709 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:22.710 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:22.868 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:23.284 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:58:23.414 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:23.969 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:58:23.970 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 17:58:23.971 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c5b541029b2142ce9b0099d261283ce1","UiLocales":null,"Nonce":"da4321ed7cf6485e8bd197203aa56089","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d05a1fed76931aa423e0a17f79eee11e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"c5b541029b2142ce9b0099d261283ce1","nonce":"da4321ed7cf6485e8bd197203aa56089"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 17:58:24.148 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 17:58:24.160 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 17:58:24.179 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 17:58:24.181 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 17:58:24.683 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 17:58:24.683 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 17:58:24.701 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****cHPw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****AUfQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QJ:00000005","TimeStamp":"2019-07-27T12:28:24.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 17:58:24.705 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"c5b541029b2142ce9b0099d261283ce1","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 17:58:24.740 +05:30 [DBG] Augmenting SignInContext
2019-07-27 17:58:24.741 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 17:58:27.801 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:58:27.844 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:27.845 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:27.845 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:58:27.846 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:58:27.847 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:58:27.847 +05:30 [DBG] Start discovery request
2019-07-27 17:58:28.266 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:58:28.307 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 17:58:28.342 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:28.343 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:28.343 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 17:58:28.345 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 17:58:28.345 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 17:58:28.357 +05:30 [DBG] Start key discovery request
2019-07-27 17:58:28.492 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 17:58:28.527 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:28.527 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:28.560 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 17:58:28.594 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:28.594 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:28.595 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 17:58:28.598 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 17:58:28.598 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 17:58:28.608 +05:30 [DBG] Start userinfo request
2019-07-27 17:58:28.614 +05:30 [DBG] Bearer token found in header
2019-07-27 17:58:29.271 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:29.271 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:29.841 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:29.841 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:29.904 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 17:58:29.906 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230504,"exp":1564234104,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230501,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 17:58:29.935 +05:30 [DBG] Creating userinfo response
2019-07-27 17:58:29.942 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:58:29.947 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:58:30.062 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:30.064 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 17:58:30.065 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:58:30.178 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:30.315 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 17:58:30.316 +05:30 [DBG] End userinfo request
2019-07-27 17:58:30.348 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 17:58:30.351 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 17:58:30.352 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 17:58:30.353 +05:30 [DBG] Rendering check session result
2019-07-27 17:58:30.459 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:58:30.506 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:30.506 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:30.506 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:58:30.506 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:58:30.506 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:58:30.506 +05:30 [DBG] Start discovery request
2019-07-27 17:58:31.065 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:58:31.083 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 17:58:31.084 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 17:58:31.084 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 17:58:31.086 +05:30 [DBG] Rendering check session result
2019-07-27 17:58:47.378 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:58:47.414 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:47.414 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:47.415 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:58:47.415 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:58:47.416 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:58:47.416 +05:30 [DBG] Start discovery request
2019-07-27 17:58:47.835 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:58:47.909 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 17:58:47.910 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 17:58:47.910 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 17:58:47.910 +05:30 [DBG] Start authorize request
2019-07-27 17:58:47.910 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 17:58:47.910 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 17:58:48.465 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:48.465 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:48.609 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:49.055 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:58:49.222 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:49.687 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:58:49.688 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 17:58:49.688 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"beb16d3213d04c369cb2d4fc3f0bfe10","UiLocales":null,"Nonce":"69ee0b9ca4084015a2929933abfb0688","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d05a1fed76931aa423e0a17f79eee11e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"beb16d3213d04c369cb2d4fc3f0bfe10","nonce":"69ee0b9ca4084015a2929933abfb0688"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 17:58:49.743 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 17:58:49.744 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 17:58:49.745 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 17:58:49.745 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 17:58:49.914 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 17:58:49.914 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 17:58:49.919 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Sg8g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****XdJw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QK:00000004","TimeStamp":"2019-07-27T12:28:49.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 17:58:49.920 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"beb16d3213d04c369cb2d4fc3f0bfe10","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 17:58:50.916 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:58:50.957 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:50.958 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:50.959 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:58:50.959 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:58:50.959 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:58:50.959 +05:30 [DBG] Start discovery request
2019-07-27 17:58:51.391 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:58:51.401 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 17:58:51.445 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:51.445 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:51.446 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 17:58:51.446 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 17:58:51.446 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 17:58:51.446 +05:30 [DBG] Start key discovery request
2019-07-27 17:58:51.517 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 17:58:51.550 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:51.550 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:51.561 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 17:58:51.595 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:51.595 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:51.596 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 17:58:51.597 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 17:58:51.598 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 17:58:51.598 +05:30 [DBG] Start userinfo request
2019-07-27 17:58:51.598 +05:30 [DBG] Bearer token found in header
2019-07-27 17:58:52.161 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:52.161 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:52.670 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:58:52.670 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:58:52.720 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 17:58:52.721 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230529,"exp":1564234129,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230501,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 17:58:52.721 +05:30 [DBG] Creating userinfo response
2019-07-27 17:58:52.721 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:58:52.721 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:58:52.968 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:52.968 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 17:58:52.968 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:58:53.200 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:58:53.380 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 17:58:53.380 +05:30 [DBG] End userinfo request
2019-07-27 17:58:53.423 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 17:58:53.424 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 17:58:53.424 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 17:58:53.424 +05:30 [DBG] Rendering check session result
2019-07-27 17:58:53.473 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:58:53.518 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:58:53.519 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:58:53.519 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:58:53.520 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:58:53.520 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:58:53.520 +05:30 [DBG] Start discovery request
2019-07-27 17:58:54.134 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:58:54.188 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 17:58:54.189 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 17:58:54.190 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 17:58:54.190 +05:30 [DBG] Rendering check session result
2019-07-27 17:59:09.794 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:59:09.827 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:59:09.827 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:59:09.828 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:59:09.828 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:59:09.829 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:59:09.829 +05:30 [DBG] Start discovery request
2019-07-27 17:59:10.172 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:59:10.207 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 17:59:10.207 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 17:59:10.207 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 17:59:10.208 +05:30 [DBG] Start authorize request
2019-07-27 17:59:10.208 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 17:59:10.208 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 17:59:10.707 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:59:10.707 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:59:10.842 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:59:11.249 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:59:11.432 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:59:11.936 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 17:59:11.937 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 17:59:11.938 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"2488aa464fd642cda07e57355f80bc0c","UiLocales":null,"Nonce":"20ffeea73f5a4b8b8508f5c351cb5824","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d05a1fed76931aa423e0a17f79eee11e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"2488aa464fd642cda07e57355f80bc0c","nonce":"20ffeea73f5a4b8b8508f5c351cb5824"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 17:59:11.992 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 17:59:11.992 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 17:59:11.992 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 17:59:11.992 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 17:59:12.151 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 17:59:12.151 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 17:59:12.155 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****e5Cg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****3epw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QM:00000006","TimeStamp":"2019-07-27T12:29:12.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 17:59:12.156 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"2488aa464fd642cda07e57355f80bc0c","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 17:59:12.991 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:59:13.035 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:59:13.035 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:59:13.035 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:59:13.036 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:59:13.036 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:59:13.036 +05:30 [DBG] Start discovery request
2019-07-27 17:59:13.449 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:59:13.459 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 17:59:13.516 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:59:13.516 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:59:13.516 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 17:59:13.517 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 17:59:13.517 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 17:59:13.517 +05:30 [DBG] Start key discovery request
2019-07-27 17:59:13.634 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 17:59:13.674 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:59:13.674 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:59:13.680 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 17:59:13.715 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:59:13.715 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:59:13.716 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 17:59:13.717 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 17:59:13.717 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 17:59:13.717 +05:30 [DBG] Start userinfo request
2019-07-27 17:59:13.717 +05:30 [DBG] Bearer token found in header
2019-07-27 17:59:14.370 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:59:14.370 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:59:14.906 +05:30 [DBG] angular_spa found in database: true
2019-07-27 17:59:14.906 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 17:59:14.960 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 17:59:14.960 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230552,"exp":1564234152,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230501,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 17:59:14.960 +05:30 [DBG] Creating userinfo response
2019-07-27 17:59:14.961 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:59:14.961 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:59:15.189 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:59:15.189 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 17:59:15.189 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 17:59:15.422 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 17:59:15.534 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 17:59:15.534 +05:30 [DBG] End userinfo request
2019-07-27 17:59:15.559 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 17:59:15.559 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 17:59:15.559 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 17:59:15.559 +05:30 [DBG] Rendering check session result
2019-07-27 17:59:15.627 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 17:59:15.678 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 17:59:15.679 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 17:59:15.679 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 17:59:15.679 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 17:59:15.679 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 17:59:15.679 +05:30 [DBG] Start discovery request
2019-07-27 17:59:16.277 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 17:59:16.314 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 17:59:16.314 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 17:59:16.314 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 17:59:16.314 +05:30 [DBG] Rendering check session result
2019-07-27 18:00:47.841 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:00:47.906 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:00:47.906 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:00:47.906 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:00:47.906 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:00:47.906 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:00:47.906 +05:30 [DBG] Start discovery request
2019-07-27 18:00:48.286 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:00:48.330 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:00:48.332 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:00:48.333 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:00:48.333 +05:30 [DBG] Start authorize request
2019-07-27 18:00:48.333 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:00:48.334 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:00:48.962 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:00:48.963 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:00:49.102 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:00:49.566 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:00:49.766 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:00:50.210 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:00:50.210 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:00:50.210 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7753382964a644a399eaa5c4cf18296f","UiLocales":null,"Nonce":"802009a619064526a7c4b1c584933705","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d05a1fed76931aa423e0a17f79eee11e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"7753382964a644a399eaa5c4cf18296f","nonce":"802009a619064526a7c4b1c584933705"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:00:50.272 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:00:50.273 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:00:50.273 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:00:50.273 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:00:50.431 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:00:50.431 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:00:50.437 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****DSSA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7haw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QO:00000002","TimeStamp":"2019-07-27T12:30:50.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:00:50.437 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"7753382964a644a399eaa5c4cf18296f","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:00:52.072 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:00:52.118 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:00:52.119 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:00:52.119 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:00:52.120 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:00:52.120 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:00:52.120 +05:30 [DBG] Start discovery request
2019-07-27 18:00:52.565 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:00:52.582 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:00:52.622 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:00:52.622 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:00:52.623 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:00:52.624 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:00:52.624 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:00:52.624 +05:30 [DBG] Start key discovery request
2019-07-27 18:00:52.674 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:00:52.708 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:00:52.708 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:00:52.719 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:00:52.767 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:00:52.767 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:00:52.768 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:00:52.769 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:00:52.769 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:00:52.769 +05:30 [DBG] Start userinfo request
2019-07-27 18:00:52.769 +05:30 [DBG] Bearer token found in header
2019-07-27 18:00:53.332 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:00:53.332 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:00:53.853 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:00:53.854 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:00:53.912 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:00:53.912 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230650,"exp":1564234250,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230501,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:00:53.912 +05:30 [DBG] Creating userinfo response
2019-07-27 18:00:53.912 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:00:53.913 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:00:54.257 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:00:54.258 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:00:54.258 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:00:54.566 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:00:54.739 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:00:54.739 +05:30 [DBG] End userinfo request
2019-07-27 18:00:54.771 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:00:54.772 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:00:54.773 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:00:54.773 +05:30 [DBG] Rendering check session result
2019-07-27 18:00:54.864 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:00:55.011 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:00:55.011 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:00:55.012 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:00:55.012 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:00:55.012 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:00:55.012 +05:30 [DBG] Start discovery request
2019-07-27 18:00:55.598 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:00:55.641 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:00:55.641 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:00:55.641 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:00:55.641 +05:30 [DBG] Rendering check session result
2019-07-27 18:01:11.903 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:01:11.904 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:01:11.904 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:01:11.904 +05:30 [DBG] Start discovery request
2019-07-27 18:01:12.353 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:01:22.795 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 18:01:22.800 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 18:01:22.801 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 18:01:22.822 +05:30 [DBG] Processing signout request for anonymous
2019-07-27 18:01:22.834 +05:30 [DBG] Start end session request validation
2019-07-27 18:01:22.836 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{},"$type":"EndSessionRequestValidationLog"}
2019-07-27 18:01:22.837 +05:30 [DBG] Success validating end session request from null
2019-07-27 18:01:47.818 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:01:47.856 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:01:47.856 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:01:47.856 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:01:47.856 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:01:47.856 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:01:47.857 +05:30 [DBG] Start discovery request
2019-07-27 18:01:48.192 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:01:48.247 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:01:48.247 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:01:48.247 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:01:48.247 +05:30 [DBG] Start authorize request
2019-07-27 18:01:48.247 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:01:48.248 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:01:48.757 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:01:48.757 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:01:48.884 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:01:49.313 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:01:49.465 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:01:49.949 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:01:49.950 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:01:49.950 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"2c127b8e35094937a4c46d8b52ca69df","UiLocales":null,"Nonce":"45b9599017504fe9bfc7b6f5da71aa3d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d05a1fed76931aa423e0a17f79eee11e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"2c127b8e35094937a4c46d8b52ca69df","nonce":"45b9599017504fe9bfc7b6f5da71aa3d"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:01:50.025 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:01:50.025 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:01:50.025 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:01:50.025 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:01:50.221 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:01:50.221 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:01:50.225 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****rSzA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pPMA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QO:0000000F","TimeStamp":"2019-07-27T12:31:50.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:01:50.226 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"2c127b8e35094937a4c46d8b52ca69df","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:01:52.027 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:01:52.098 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:01:52.098 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:01:52.098 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:01:52.099 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:01:52.099 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:01:52.099 +05:30 [DBG] Start discovery request
2019-07-27 18:01:52.546 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:01:52.560 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:01:52.601 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:01:52.601 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:01:52.602 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:01:52.602 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:01:52.602 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:01:52.603 +05:30 [DBG] Start key discovery request
2019-07-27 18:01:52.665 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:01:52.705 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:01:52.705 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:01:52.713 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:01:52.741 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:01:52.741 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:01:52.741 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:01:52.742 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:01:52.742 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:01:52.742 +05:30 [DBG] Start userinfo request
2019-07-27 18:01:52.742 +05:30 [DBG] Bearer token found in header
2019-07-27 18:01:53.269 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:01:53.269 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:01:53.758 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:01:53.758 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:01:53.817 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:01:53.817 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230710,"exp":1564234310,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230501,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:01:53.818 +05:30 [DBG] Creating userinfo response
2019-07-27 18:01:53.818 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:01:53.818 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:01:54.045 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:01:54.045 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:01:54.045 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:01:54.272 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:01:54.464 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:01:54.464 +05:30 [DBG] End userinfo request
2019-07-27 18:01:54.643 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:01:54.643 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:01:54.643 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:01:54.643 +05:30 [DBG] Rendering check session result
2019-07-27 18:01:54.757 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:01:54.843 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:01:54.843 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:01:54.844 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:01:54.845 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:01:54.845 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:01:54.845 +05:30 [DBG] Start discovery request
2019-07-27 18:01:55.428 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:01:55.514 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:01:55.514 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:01:55.514 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:01:55.514 +05:30 [DBG] Rendering check session result
2019-07-27 18:02:24.776 +05:30 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-27 18:02:42.098 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:02:42.100 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:02:42.100 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:02:42.100 +05:30 [DBG] Start discovery request
2019-07-27 18:02:42.511 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:02:47.519 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 18:02:47.523 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 18:02:47.523 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 18:02:47.523 +05:30 [DBG] Processing signout request for anonymous
2019-07-27 18:02:47.523 +05:30 [DBG] Start end session request validation
2019-07-27 18:02:47.523 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{},"$type":"EndSessionRequestValidationLog"}
2019-07-27 18:02:47.524 +05:30 [DBG] Success validating end session request from null
2019-07-27 18:05:54.364 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:05:54.405 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:05:54.405 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:05:54.405 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:05:54.406 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:05:54.406 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:05:54.407 +05:30 [DBG] Start discovery request
2019-07-27 18:05:54.795 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:05:54.889 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:05:54.890 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:05:54.890 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:05:54.890 +05:30 [DBG] Start authorize request
2019-07-27 18:05:54.890 +05:30 [DBG] No user present in authorize request
2019-07-27 18:05:54.890 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:05:55.462 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:05:55.462 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:05:55.617 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:05:56.083 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:05:56.248 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:05:56.647 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:05:56.648 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:05:56.648 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"cef9313d65944f7e974ce72605ad4c02","UiLocales":null,"Nonce":"83b5b21221a84a57abfe225101b48cdc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"cef9313d65944f7e974ce72605ad4c02","nonce":"83b5b21221a84a57abfe225101b48cdc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:05:56.648 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 18:05:56.706 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:05:57.659 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:05:57.659 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:05:57.880 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:05:58.397 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:05:58.644 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:05:59.194 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:05:59.194 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:05:59.859 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:05:59.860 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:15.208 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 18:06:15.268 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:06:15.960 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:15.960 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:16.143 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:16.629 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:06:16.866 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:17.382 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:06:17.383 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:06:17.680 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:06:17.681 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 18:06:17.681 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 18:06:17.681 +05:30 [DBG] Adding auth_time claim with value: 1564230977
2019-07-27 18:06:17.682 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:06:17.785 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIHLFVP6QS:00000002","TimeStamp":"2019-07-27T12:36:17.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 18:06:18.485 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:18.485 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:18.512 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 18:06:18.513 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 18:06:18.513 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 18:06:18.513 +05:30 [DBG] Start authorize callback request
2019-07-27 18:06:18.513 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:06:18.513 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:06:19.010 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:19.011 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:19.124 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:19.506 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:06:19.642 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:20.011 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:06:20.012 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:06:20.012 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"cef9313d65944f7e974ce72605ad4c02","UiLocales":null,"Nonce":"83b5b21221a84a57abfe225101b48cdc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4f187404e7e30a90cb7806cfc8841f65","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"cef9313d65944f7e974ce72605ad4c02","nonce":"83b5b21221a84a57abfe225101b48cdc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:06:20.069 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:06:20.069 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:06:20.069 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:06:20.069 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:06:20.283 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:06:20.283 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:06:20.287 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BnBQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dFZQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QP:00000005","TimeStamp":"2019-07-27T12:36:20.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:06:20.287 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"cef9313d65944f7e974ce72605ad4c02","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:06:20.288 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:06:20.288 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:06:22.184 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:06:22.227 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:22.227 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:22.228 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:06:22.228 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:06:22.228 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:06:22.228 +05:30 [DBG] Start discovery request
2019-07-27 18:06:22.555 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:06:22.566 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:06:22.597 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:22.597 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:22.597 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:06:22.598 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:06:22.598 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:06:22.598 +05:30 [DBG] Start key discovery request
2019-07-27 18:06:22.672 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:06:22.704 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:22.704 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:22.713 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:06:22.742 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:22.742 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:22.742 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:06:22.742 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:06:22.742 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:06:22.742 +05:30 [DBG] Start userinfo request
2019-07-27 18:06:22.743 +05:30 [DBG] Bearer token found in header
2019-07-27 18:06:23.184 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:23.184 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:23.687 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:23.687 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:23.747 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:06:23.747 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230980,"exp":1564234580,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230977,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:06:23.747 +05:30 [DBG] Creating userinfo response
2019-07-27 18:06:23.748 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:06:23.748 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:06:23.947 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:23.948 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:06:23.948 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:06:24.173 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:24.314 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:06:24.315 +05:30 [DBG] End userinfo request
2019-07-27 18:06:24.369 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:06:24.370 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:06:24.370 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:06:24.370 +05:30 [DBG] Rendering check session result
2019-07-27 18:06:24.414 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:06:24.452 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:24.452 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:24.453 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:06:24.453 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:06:24.453 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:06:24.453 +05:30 [DBG] Start discovery request
2019-07-27 18:06:24.984 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:06:25.019 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:06:25.019 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:06:25.019 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:06:25.019 +05:30 [DBG] Rendering check session result
2019-07-27 18:06:32.033 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:06:32.061 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:32.061 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:32.061 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:06:32.062 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:06:32.062 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:06:32.062 +05:30 [DBG] Start discovery request
2019-07-27 18:06:32.424 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:06:32.494 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:06:32.495 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:06:32.495 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:06:32.495 +05:30 [DBG] Start authorize request
2019-07-27 18:06:32.495 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:06:32.495 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:06:33.011 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:33.012 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:33.135 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:33.611 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:06:33.784 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:34.215 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:06:34.216 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:06:34.216 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e0a6deca8aa74bd684c6b0fc2930cc0b","UiLocales":null,"Nonce":"5290550e395f4b4090f2c82809b715c5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4f187404e7e30a90cb7806cfc8841f65","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"e0a6deca8aa74bd684c6b0fc2930cc0b","nonce":"5290550e395f4b4090f2c82809b715c5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:06:34.283 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:06:34.283 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:06:34.283 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:06:34.283 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:06:34.443 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:06:34.443 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:06:34.447 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****phNg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lOdw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6QS:00000004","TimeStamp":"2019-07-27T12:36:34.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:06:34.447 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"e0a6deca8aa74bd684c6b0fc2930cc0b","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:06:35.290 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:06:35.335 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:35.335 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:35.336 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:06:35.337 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:06:35.337 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:06:35.337 +05:30 [DBG] Start discovery request
2019-07-27 18:06:35.737 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:06:35.746 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:06:35.774 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:35.774 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:35.775 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:06:35.775 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:06:35.776 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:06:35.776 +05:30 [DBG] Start key discovery request
2019-07-27 18:06:35.799 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:06:35.847 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:35.848 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:35.876 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:06:35.911 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:35.911 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:35.911 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:06:35.912 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:06:35.912 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:06:35.913 +05:30 [DBG] Start userinfo request
2019-07-27 18:06:35.913 +05:30 [DBG] Bearer token found in header
2019-07-27 18:06:36.571 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:36.572 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:37.058 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:06:37.058 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:06:37.122 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:06:37.122 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564230994,"exp":1564234594,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564230977,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:06:37.122 +05:30 [DBG] Creating userinfo response
2019-07-27 18:06:37.123 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:06:37.123 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:06:37.364 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:37.364 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:06:37.364 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:06:37.606 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:06:37.748 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:06:37.748 +05:30 [DBG] End userinfo request
2019-07-27 18:06:37.776 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:06:37.776 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:06:37.776 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:06:37.776 +05:30 [DBG] Rendering check session result
2019-07-27 18:06:37.875 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:06:37.921 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:06:37.921 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:06:37.922 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:06:37.922 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:06:37.923 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:06:37.923 +05:30 [DBG] Start discovery request
2019-07-27 18:06:38.519 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:06:38.547 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:06:38.547 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:06:38.547 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:06:38.547 +05:30 [DBG] Rendering check session result
2019-07-27 18:08:10.131 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:08:10.170 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:08:10.170 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:08:10.171 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:08:10.171 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:08:10.171 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:08:10.171 +05:30 [DBG] Start discovery request
2019-07-27 18:08:10.723 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:08:10.805 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:08:10.805 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:08:10.805 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:08:10.806 +05:30 [DBG] Rendering check session result
2019-07-27 18:08:13.822 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:08:13.913 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:08:13.913 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:08:13.914 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:08:13.914 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:08:13.914 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:08:13.914 +05:30 [DBG] Start discovery request
2019-07-27 18:08:14.550 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:08:14.596 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:08:14.597 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:08:14.597 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:08:14.597 +05:30 [DBG] Rendering check session result
2019-07-27 18:08:16.350 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:08:16.423 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:08:16.424 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:08:16.424 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:08:16.425 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:08:16.425 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:08:16.426 +05:30 [DBG] Start discovery request
2019-07-27 18:08:16.988 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:08:17.022 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:08:17.022 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:08:17.022 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:08:17.022 +05:30 [DBG] Rendering check session result
2019-07-27 18:08:18.818 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:08:18.877 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:08:18.877 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:08:18.877 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:08:18.878 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:08:18.878 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:08:18.878 +05:30 [DBG] Start discovery request
2019-07-27 18:08:19.421 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:08:19.463 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:08:19.464 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:08:19.464 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:08:19.464 +05:30 [DBG] Rendering check session result
2019-07-27 18:08:50.703 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:08:50.936 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:08:50.937 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:08:50.937 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:08:50.937 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:08:50.937 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:08:50.937 +05:30 [DBG] Start discovery request
2019-07-27 18:08:51.711 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:08:51.812 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:08:51.812 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:08:51.813 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:08:51.813 +05:30 [DBG] Rendering check session result
2019-07-27 18:09:57.836 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:09:57.870 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:09:57.870 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:09:57.871 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:09:57.872 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:09:57.872 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:09:57.872 +05:30 [DBG] Start discovery request
2019-07-27 18:09:58.496 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:09:58.608 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:09:58.608 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:09:58.609 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:09:58.609 +05:30 [DBG] Rendering check session result
2019-07-27 18:12:30.485 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:12:30.762 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:12:30.762 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:12:30.762 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:12:30.762 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:12:30.763 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:12:30.763 +05:30 [DBG] Start discovery request
2019-07-27 18:12:31.414 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:12:31.467 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:12:31.467 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:12:31.467 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:12:31.468 +05:30 [DBG] Rendering check session result
2019-07-27 18:12:35.905 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:12:36.008 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:12:36.008 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:12:36.008 +05:30 [DBG] Start authorize request
2019-07-27 18:12:36.009 +05:30 [DBG] No user present in authorize request
2019-07-27 18:12:36.009 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:12:36.634 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:12:36.692 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:12:37.120 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"9d035bbcb12b4aa0a21f05758034d85c","nonce":"4dddca2ed2de42dfa1f365a64d9c4d0a","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:12:37.801 +05:30 [ERR] Request validation failed
2019-07-27 18:12:37.801 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"9d035bbcb12b4aa0a21f05758034d85c","nonce":"4dddca2ed2de42dfa1f365a64d9c4d0a","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:12:37.864 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6R0:00000003","TimeStamp":"2019-07-27T12:42:37.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 18:12:45.500 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:12:45.526 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:12:45.624 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:12:45.624 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:12:45.625 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:12:45.625 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:12:45.625 +05:30 [DBG] Start discovery request
2019-07-27 18:12:45.958 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:12:46.843 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:12:46.844 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:12:46.844 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:12:46.844 +05:30 [DBG] Start authorize request
2019-07-27 18:12:46.844 +05:30 [DBG] No user present in authorize request
2019-07-27 18:12:46.844 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:12:47.789 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:12:47.789 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:12:47.928 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:12:48.329 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:12:48.442 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:12:48.674 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:12:48.674 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:12:48.674 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ffbcff5845da4203bc96108d4ae29f0c","UiLocales":null,"Nonce":"847081d30b2b4511993dd9cff3d608f2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"ffbcff5845da4203bc96108d4ae29f0c","nonce":"847081d30b2b4511993dd9cff3d608f2"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:12:48.675 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 18:12:48.766 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:12:49.397 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:12:49.397 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:12:49.565 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:12:49.984 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:12:50.148 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:12:50.499 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:12:50.499 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:12:51.078 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:12:51.078 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:02.574 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 18:13:02.638 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:13:03.479 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:03.479 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:03.659 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:04.149 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:13:04.315 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:04.716 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:13:04.716 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:13:05.221 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:13:05.221 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 18:13:05.221 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 18:13:05.221 +05:30 [DBG] Adding auth_time claim with value: 1564231385
2019-07-27 18:13:05.222 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:13:05.300 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIHLFVP6R4:00000002","TimeStamp":"2019-07-27T12:43:05.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 18:13:06.007 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:06.007 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:06.015 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 18:13:06.015 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 18:13:06.015 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 18:13:06.016 +05:30 [DBG] Start authorize callback request
2019-07-27 18:13:06.016 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:13:06.016 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:13:06.635 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:06.635 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:06.746 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:07.047 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:13:07.170 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:07.466 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:13:07.467 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:13:07.467 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ffbcff5845da4203bc96108d4ae29f0c","UiLocales":null,"Nonce":"847081d30b2b4511993dd9cff3d608f2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b90281b3e595e9ae5472e8c70acf14b2","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"ffbcff5845da4203bc96108d4ae29f0c","nonce":"847081d30b2b4511993dd9cff3d608f2"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:13:07.551 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:13:07.551 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:13:07.551 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:13:07.551 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:13:07.757 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:13:07.757 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:13:07.761 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BK1Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Wc3A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6R1:00000005","TimeStamp":"2019-07-27T12:43:07.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:13:07.761 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"ffbcff5845da4203bc96108d4ae29f0c","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:13:07.761 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:13:07.761 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:13:09.179 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:13:09.223 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:09.223 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:09.223 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:13:09.224 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:13:09.224 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:13:09.224 +05:30 [DBG] Start discovery request
2019-07-27 18:13:09.584 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:13:09.635 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:13:09.662 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:09.662 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:09.662 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:13:09.662 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:13:09.662 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:13:09.662 +05:30 [DBG] Start key discovery request
2019-07-27 18:13:09.694 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:13:09.717 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:09.717 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:09.723 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:13:09.750 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:09.750 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:09.750 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:13:09.751 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:13:09.751 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:13:09.751 +05:30 [DBG] Start userinfo request
2019-07-27 18:13:09.751 +05:30 [DBG] Bearer token found in header
2019-07-27 18:13:10.207 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:10.208 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:10.615 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:10.615 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:10.681 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:13:10.681 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564231387,"exp":1564234987,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564231385,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:13:10.681 +05:30 [DBG] Creating userinfo response
2019-07-27 18:13:10.681 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:13:10.681 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:13:10.912 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:10.912 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:13:10.912 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:13:11.107 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:11.212 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:13:11.212 +05:30 [DBG] End userinfo request
2019-07-27 18:13:11.231 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:13:11.231 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:13:11.231 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:13:11.231 +05:30 [DBG] Rendering check session result
2019-07-27 18:13:11.286 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:13:11.324 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:11.324 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:11.325 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:13:11.325 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:13:11.326 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:13:11.326 +05:30 [DBG] Start discovery request
2019-07-27 18:13:11.774 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:13:11.789 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:13:11.792 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:13:11.792 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:13:11.792 +05:30 [DBG] Rendering check session result
2019-07-27 18:13:30.502 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:13:30.503 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:13:30.503 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:13:30.504 +05:30 [DBG] Start authorize request
2019-07-27 18:13:30.510 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:13:30.513 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:13:30.589 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:13:30.590 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:13:30.594 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:13:30.594 +05:30 [DBG] Start authorize request
2019-07-27 18:13:30.595 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:13:30.595 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:13:31.918 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:31.918 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:31.918 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"a71185b3ed934556a14e213c3aeb9d0a","nonce":"a5f5c7cfecdc47e28a830e8a374aeafd","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:13:31.918 +05:30 [ERR] Request validation failed
2019-07-27 18:13:31.918 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"a71185b3ed934556a14e213c3aeb9d0a","nonce":"a5f5c7cfecdc47e28a830e8a374aeafd","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:13:31.919 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6R5:00000004","TimeStamp":"2019-07-27T12:43:31.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 18:13:32.697 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:32.698 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:32.698 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"bc2bb8c6052c48849753d427a302543e","nonce":"79c72efd57ed4982babc1ccb84254637","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:13:32.699 +05:30 [ERR] Request validation failed
2019-07-27 18:13:32.699 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"bc2bb8c6052c48849753d427a302543e","nonce":"79c72efd57ed4982babc1ccb84254637","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:13:32.700 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6R4:00000004","TimeStamp":"2019-07-27T12:43:32.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 18:13:55.742 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:13:55.765 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:55.766 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:55.766 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:13:55.767 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:13:55.767 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:13:55.767 +05:30 [DBG] Start discovery request
2019-07-27 18:13:56.078 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:13:56.151 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:13:56.151 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:13:56.151 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:13:56.151 +05:30 [DBG] Start authorize request
2019-07-27 18:13:56.151 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:13:56.151 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:13:56.583 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:56.583 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:13:56.702 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:56.997 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:13:57.098 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:13:57.411 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:13:57.412 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:13:57.412 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"b68398b2d9b047f8836fa2dbe39c00e5","UiLocales":null,"Nonce":"77f0dcca2caa4692a1034d0ef5b5f06e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b90281b3e595e9ae5472e8c70acf14b2","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"b68398b2d9b047f8836fa2dbe39c00e5","nonce":"77f0dcca2caa4692a1034d0ef5b5f06e"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:13:57.476 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:13:57.476 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:13:57.477 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:13:57.477 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:13:57.635 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:13:57.635 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:13:57.640 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ixoQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****xePw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6R3:00000004","TimeStamp":"2019-07-27T12:43:57.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:13:57.640 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"b68398b2d9b047f8836fa2dbe39c00e5","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:13:58.526 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:13:58.557 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:58.557 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:58.557 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:13:58.558 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:13:58.558 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:13:58.558 +05:30 [DBG] Start discovery request
2019-07-27 18:13:58.964 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:13:58.984 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:13:59.038 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:59.038 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:59.039 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:13:59.039 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:13:59.039 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:13:59.039 +05:30 [DBG] Start key discovery request
2019-07-27 18:13:59.102 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:13:59.130 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:59.130 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:59.138 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:13:59.172 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:13:59.172 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:13:59.172 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:13:59.173 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:13:59.173 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:13:59.173 +05:30 [DBG] Start userinfo request
2019-07-27 18:13:59.173 +05:30 [DBG] Bearer token found in header
2019-07-27 18:13:59.630 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:13:59.630 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:14:00.091 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:14:00.091 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:14:00.136 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:14:00.136 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564231437,"exp":1564235037,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564231385,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:14:00.137 +05:30 [DBG] Creating userinfo response
2019-07-27 18:14:00.137 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:14:00.137 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:14:00.368 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:14:00.369 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:14:00.369 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:14:00.619 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:14:00.786 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:14:00.786 +05:30 [DBG] End userinfo request
2019-07-27 18:14:00.810 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:14:00.810 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:14:00.810 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:14:00.810 +05:30 [DBG] Rendering check session result
2019-07-27 18:14:00.877 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:14:00.939 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:00.939 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:00.939 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:14:00.940 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:14:00.940 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:14:00.940 +05:30 [DBG] Start discovery request
2019-07-27 18:14:01.483 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:14:01.527 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:14:01.527 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:14:01.527 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:14:01.527 +05:30 [DBG] Rendering check session result
2019-07-27 18:14:09.162 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:14:09.239 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:09.239 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:09.240 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:14:09.240 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:14:09.240 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:14:09.240 +05:30 [DBG] Start discovery request
2019-07-27 18:14:09.568 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:14:09.589 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:14:09.593 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:14:09.593 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:14:09.593 +05:30 [DBG] Start authorize request
2019-07-27 18:14:09.593 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:14:09.595 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:14:10.122 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:14:10.122 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:14:10.265 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:14:10.601 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:14:10.719 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:14:10.981 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:14:10.982 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:14:10.982 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"01fbd4e7182e48eeb395a5983beac7c1","UiLocales":null,"Nonce":"e4efada0b6314909926eefc5db639dcd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b90281b3e595e9ae5472e8c70acf14b2","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"01fbd4e7182e48eeb395a5983beac7c1","nonce":"e4efada0b6314909926eefc5db639dcd"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:14:11.036 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:14:11.036 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:14:11.037 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:14:11.037 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:14:11.152 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:14:11.153 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:14:11.156 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****j2yQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fK4w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6R1:00000009","TimeStamp":"2019-07-27T12:44:11.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:14:11.157 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"01fbd4e7182e48eeb395a5983beac7c1","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:14:12.017 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:14:12.051 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:12.052 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:12.052 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:14:12.052 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:14:12.052 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:14:12.052 +05:30 [DBG] Start discovery request
2019-07-27 18:14:12.377 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:14:12.385 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:14:12.413 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:12.414 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:12.414 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:14:12.415 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:14:12.415 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:14:12.415 +05:30 [DBG] Start key discovery request
2019-07-27 18:14:12.442 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:14:12.472 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:12.472 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:12.479 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:14:12.506 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:12.506 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:12.506 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:14:12.506 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:14:12.507 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:14:12.507 +05:30 [DBG] Start userinfo request
2019-07-27 18:14:12.507 +05:30 [DBG] Bearer token found in header
2019-07-27 18:14:12.910 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:14:12.910 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:14:13.354 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:14:13.354 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:14:13.414 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:14:13.414 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564231451,"exp":1564235051,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564231385,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:14:13.415 +05:30 [DBG] Creating userinfo response
2019-07-27 18:14:13.415 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:14:13.415 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:14:13.702 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:14:13.702 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:14:13.702 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:14:13.874 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:14:14.008 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:14:14.008 +05:30 [DBG] End userinfo request
2019-07-27 18:14:14.048 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:14:14.048 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:14:14.048 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:14:14.048 +05:30 [DBG] Rendering check session result
2019-07-27 18:14:14.095 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:14:14.129 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:14.129 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:14.129 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:14:14.130 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:14:14.130 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:14:14.130 +05:30 [DBG] Start discovery request
2019-07-27 18:14:14.574 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:14:14.590 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:14:14.590 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:14:14.591 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:14:14.591 +05:30 [DBG] Rendering check session result
2019-07-27 18:14:49.196 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:14:49.238 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:14:49.239 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:14:49.239 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:14:49.239 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:14:49.239 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:14:49.239 +05:30 [DBG] Start discovery request
2019-07-27 18:14:49.752 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:14:49.802 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:14:49.802 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:14:49.802 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:14:49.802 +05:30 [DBG] Rendering check session result
2019-07-27 18:15:02.775 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:15:02.813 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:02.813 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:02.813 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:15:02.814 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:15:02.814 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:15:02.814 +05:30 [DBG] Start discovery request
2019-07-27 18:15:03.304 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:15:03.341 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:15:03.341 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:15:03.341 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:15:03.341 +05:30 [DBG] Rendering check session result
2019-07-27 18:15:08.487 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:15:08.520 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:08.521 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:08.521 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:15:08.521 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:15:08.521 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:15:08.521 +05:30 [DBG] Start discovery request
2019-07-27 18:15:08.886 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:15:08.909 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:15:08.910 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:15:08.910 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:15:08.910 +05:30 [DBG] Start authorize request
2019-07-27 18:15:08.910 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:15:08.910 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:15:09.376 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:15:09.376 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:15:09.502 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:15:09.912 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:15:10.099 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:15:10.602 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:15:10.602 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:15:10.602 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"cb38e8d2419d437bbe021ad72b2127af","UiLocales":null,"Nonce":"dba55986556c404c8a84861e63284277","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b90281b3e595e9ae5472e8c70acf14b2","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"cb38e8d2419d437bbe021ad72b2127af","nonce":"dba55986556c404c8a84861e63284277"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:15:10.675 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:15:10.676 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:15:10.676 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:15:10.740 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:15:10.888 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:15:10.888 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:15:10.894 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****N9SA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****AifQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6R5:00000009","TimeStamp":"2019-07-27T12:45:10.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:15:10.894 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"cb38e8d2419d437bbe021ad72b2127af","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:15:11.898 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:15:11.973 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:11.974 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:11.974 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:15:11.974 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:15:11.974 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:15:11.974 +05:30 [DBG] Start discovery request
2019-07-27 18:15:12.357 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:15:12.386 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:15:12.417 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:12.417 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:12.417 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:15:12.418 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:15:12.418 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:15:12.418 +05:30 [DBG] Start key discovery request
2019-07-27 18:15:12.468 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:15:12.497 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:12.497 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:12.505 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:15:12.539 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:12.539 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:12.539 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:15:12.540 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:15:12.540 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:15:12.540 +05:30 [DBG] Start userinfo request
2019-07-27 18:15:12.540 +05:30 [DBG] Bearer token found in header
2019-07-27 18:15:13.146 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:15:13.146 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:15:13.598 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:15:13.598 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:15:13.644 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:15:13.645 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564231510,"exp":1564235110,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564231385,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:15:13.645 +05:30 [DBG] Creating userinfo response
2019-07-27 18:15:13.645 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:15:13.645 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:15:13.860 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:15:13.861 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:15:13.861 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:15:14.095 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:15:14.270 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:15:14.270 +05:30 [DBG] End userinfo request
2019-07-27 18:15:14.293 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:15:14.293 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:15:14.293 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:15:14.293 +05:30 [DBG] Rendering check session result
2019-07-27 18:15:14.343 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:15:14.390 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:15:14.390 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:15:14.390 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:15:14.391 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:15:14.391 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:15:14.391 +05:30 [DBG] Start discovery request
2019-07-27 18:15:14.978 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:15:15.033 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:15:15.033 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:15:15.033 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:15:15.033 +05:30 [DBG] Rendering check session result
2019-07-27 18:34:35.856 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:34:36.345 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:34:36.346 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:34:36.347 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:34:36.350 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:34:36.350 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:34:36.350 +05:30 [DBG] Start discovery request
2019-07-27 18:34:36.779 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:34:36.878 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:34:36.879 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:34:36.879 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:34:36.879 +05:30 [DBG] Start authorize request
2019-07-27 18:34:36.889 +05:30 [DBG] No user present in authorize request
2019-07-27 18:34:36.889 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:34:37.374 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:34:37.374 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:34:37.532 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:34:37.940 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:34:38.143 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:34:38.615 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:34:38.616 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:34:38.616 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1f492bdb2ab74eedb4dc6bc418bdfce0","UiLocales":null,"Nonce":"6f9de87de4c347e0987857ff3ebdc532","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"1f492bdb2ab74eedb4dc6bc418bdfce0","nonce":"6f9de87de4c347e0987857ff3ebdc532"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:34:38.616 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 18:34:38.836 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:34:39.594 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:34:39.595 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:34:39.842 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:34:40.372 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:34:40.567 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:34:41.128 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:34:41.128 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:34:41.766 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:34:41.767 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:35:49.762 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 18:35:49.823 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:35:50.493 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:35:50.493 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:35:50.698 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:35:51.237 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:35:51.424 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:35:51.978 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:35:51.979 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:35:52.401 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:35:52.402 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 18:35:52.402 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 18:35:52.402 +05:30 [DBG] Adding auth_time claim with value: 1564232752
2019-07-27 18:35:52.403 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:35:52.481 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:00000001","TimeStamp":"2019-07-27T13:05:52.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 18:35:53.217 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:35:53.217 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:35:53.273 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 18:35:53.273 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 18:35:53.273 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 18:35:53.274 +05:30 [DBG] Start authorize callback request
2019-07-27 18:35:53.274 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:35:53.274 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:35:53.759 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:35:53.759 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:35:53.899 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:35:54.358 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:35:54.525 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:35:54.926 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:35:54.927 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:35:54.928 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1f492bdb2ab74eedb4dc6bc418bdfce0","UiLocales":null,"Nonce":"6f9de87de4c347e0987857ff3ebdc532","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea2445bbd97ab780b4f3af8ba2735c91","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"1f492bdb2ab74eedb4dc6bc418bdfce0","nonce":"6f9de87de4c347e0987857ff3ebdc532"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:35:54.982 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:35:54.982 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:35:54.982 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:35:54.983 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:35:55.119 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:35:55.119 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:35:55.124 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****QDfA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CzAQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:00000002","TimeStamp":"2019-07-27T13:05:55.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:35:55.124 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"1f492bdb2ab74eedb4dc6bc418bdfce0","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:35:55.125 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:35:55.125 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:35:56.698 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:35:56.737 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:35:56.737 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:35:56.737 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:35:56.738 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:35:56.738 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:35:56.738 +05:30 [DBG] Start discovery request
2019-07-27 18:35:57.155 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:35:57.168 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:35:57.202 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:35:57.202 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:35:57.202 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:35:57.202 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:35:57.203 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:35:57.203 +05:30 [DBG] Start key discovery request
2019-07-27 18:35:57.260 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:35:57.292 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:35:57.293 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:35:57.304 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:35:57.337 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:35:57.337 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:35:57.338 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:35:57.339 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:35:57.340 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:35:57.340 +05:30 [DBG] Start userinfo request
2019-07-27 18:35:57.340 +05:30 [DBG] Bearer token found in header
2019-07-27 18:35:57.827 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:35:57.827 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:35:58.269 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:35:58.269 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:35:58.324 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:35:58.325 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564232755,"exp":1564236355,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564232752,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:35:58.325 +05:30 [DBG] Creating userinfo response
2019-07-27 18:35:58.325 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:35:58.325 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:35:58.555 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:35:58.555 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:35:58.555 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:35:58.814 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:35:58.995 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:35:58.996 +05:30 [DBG] End userinfo request
2019-07-27 18:35:59.025 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:35:59.025 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:35:59.025 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:35:59.026 +05:30 [DBG] Rendering check session result
2019-07-27 18:35:59.089 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:35:59.133 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:35:59.133 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:35:59.134 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:35:59.135 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:35:59.135 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:35:59.135 +05:30 [DBG] Start discovery request
2019-07-27 18:35:59.716 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:35:59.754 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:35:59.754 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:35:59.755 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:35:59.755 +05:30 [DBG] Rendering check session result
2019-07-27 18:36:06.004 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:36:06.039 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:06.039 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:06.040 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:36:06.040 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:36:06.040 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:36:06.040 +05:30 [DBG] Start discovery request
2019-07-27 18:36:06.446 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:36:06.498 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:36:06.500 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:36:06.500 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:36:06.500 +05:30 [DBG] Start authorize request
2019-07-27 18:36:06.500 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:36:06.500 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:36:06.943 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:36:06.943 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:36:07.061 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:07.447 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:36:07.593 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:08.027 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:36:08.028 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:36:08.028 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"afd45186ae49431dad1dd9d30e90d9a3","UiLocales":null,"Nonce":"76fc5d0964d34e698377f1b052be2d5a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea2445bbd97ab780b4f3af8ba2735c91","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"afd45186ae49431dad1dd9d30e90d9a3","nonce":"76fc5d0964d34e698377f1b052be2d5a"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:36:08.073 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:36:08.073 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:36:08.074 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:36:08.074 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:36:08.247 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:36:08.247 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:36:08.251 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****LBtA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****axGQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:0000000B","TimeStamp":"2019-07-27T13:06:08.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:36:08.251 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"afd45186ae49431dad1dd9d30e90d9a3","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:36:09.042 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:36:09.073 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:09.073 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:09.073 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:36:09.074 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:36:09.074 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:36:09.074 +05:30 [DBG] Start discovery request
2019-07-27 18:36:09.465 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:36:09.474 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:36:09.503 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:09.504 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:09.504 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:36:09.505 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:36:09.505 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:36:09.505 +05:30 [DBG] Start key discovery request
2019-07-27 18:36:09.547 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:36:09.588 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:09.588 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:09.601 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:36:09.638 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:09.639 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:09.639 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:36:09.640 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:36:09.640 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:36:09.641 +05:30 [DBG] Start userinfo request
2019-07-27 18:36:09.641 +05:30 [DBG] Bearer token found in header
2019-07-27 18:36:10.148 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:36:10.148 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:36:10.666 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:36:10.666 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:36:10.718 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:36:10.718 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564232768,"exp":1564236368,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564232752,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:36:10.719 +05:30 [DBG] Creating userinfo response
2019-07-27 18:36:10.719 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:36:10.719 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:36:10.958 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:10.959 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:36:10.959 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:36:11.189 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:11.354 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:36:11.354 +05:30 [DBG] End userinfo request
2019-07-27 18:36:11.372 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:36:11.372 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:36:11.372 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:36:11.372 +05:30 [DBG] Rendering check session result
2019-07-27 18:36:11.432 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:36:11.500 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:11.501 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:11.502 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:36:11.502 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:36:11.503 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:36:11.503 +05:30 [DBG] Start discovery request
2019-07-27 18:36:12.005 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:36:12.024 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:36:12.025 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:36:12.025 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:36:12.025 +05:30 [DBG] Rendering check session result
2019-07-27 18:36:27.519 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:36:27.549 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:27.549 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:27.549 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:36:27.550 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:36:27.550 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:36:27.550 +05:30 [DBG] Start discovery request
2019-07-27 18:36:27.936 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:36:27.979 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:36:27.981 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:36:27.981 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:36:27.981 +05:30 [DBG] Start authorize request
2019-07-27 18:36:27.981 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:36:27.982 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:36:28.519 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:36:28.520 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:36:28.644 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:29.036 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:36:29.186 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:29.619 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:36:29.619 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:36:29.619 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"376b6e560bb64f918126bb1d3ef16da6","UiLocales":null,"Nonce":"38782c325a2c4e49a3721340ab9a11eb","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea2445bbd97ab780b4f3af8ba2735c91","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"376b6e560bb64f918126bb1d3ef16da6","nonce":"38782c325a2c4e49a3721340ab9a11eb"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:36:29.665 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:36:29.666 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:36:29.666 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:36:29.666 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:36:29.853 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:36:29.853 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:36:29.857 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-_6A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pOwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:00000014","TimeStamp":"2019-07-27T13:06:29.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:36:29.857 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"376b6e560bb64f918126bb1d3ef16da6","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:36:30.592 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:36:30.624 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:30.624 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:30.624 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:36:30.625 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:36:30.625 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:36:30.625 +05:30 [DBG] Start discovery request
2019-07-27 18:36:31.037 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:36:31.048 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:36:31.088 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:31.088 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:31.089 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:36:31.089 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:36:31.089 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:36:31.089 +05:30 [DBG] Start key discovery request
2019-07-27 18:36:31.156 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:36:31.200 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:31.200 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:31.208 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:36:31.240 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:31.240 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:31.241 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:36:31.241 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:36:31.241 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:36:31.241 +05:30 [DBG] Start userinfo request
2019-07-27 18:36:31.241 +05:30 [DBG] Bearer token found in header
2019-07-27 18:36:31.766 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:36:31.767 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:36:32.258 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:36:32.258 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:36:32.329 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:36:32.330 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564232789,"exp":1564236389,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564232752,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:36:32.330 +05:30 [DBG] Creating userinfo response
2019-07-27 18:36:32.330 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:36:32.330 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:36:32.554 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:32.554 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:36:32.554 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:36:32.807 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:36:32.986 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:36:32.987 +05:30 [DBG] End userinfo request
2019-07-27 18:36:33.004 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:36:33.004 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:36:33.004 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:36:33.004 +05:30 [DBG] Rendering check session result
2019-07-27 18:36:33.072 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:36:33.161 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:36:33.161 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:36:33.161 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:36:33.162 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:36:33.162 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:36:33.162 +05:30 [DBG] Start discovery request
2019-07-27 18:36:33.700 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:36:33.720 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:36:33.720 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:36:33.720 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:36:33.720 +05:30 [DBG] Rendering check session result
2019-07-27 18:37:29.640 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:37:29.672 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:29.672 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:29.672 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:37:29.673 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:37:29.673 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:37:29.673 +05:30 [DBG] Start discovery request
2019-07-27 18:37:30.004 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:37:30.092 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:37:30.093 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:37:30.093 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:37:30.093 +05:30 [DBG] Start authorize request
2019-07-27 18:37:30.093 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:37:30.093 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:37:30.566 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:30.566 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:37:30.682 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:31.077 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:37:31.242 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:31.664 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:37:31.664 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:37:31.665 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"dc6b399aba97423d91257c67dea490f0","UiLocales":null,"Nonce":"339daa9d82b84a3cbfc140b32345bcd1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea2445bbd97ab780b4f3af8ba2735c91","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"dc6b399aba97423d91257c67dea490f0","nonce":"339daa9d82b84a3cbfc140b32345bcd1"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:37:31.761 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:37:31.761 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:37:31.761 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:37:31.761 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 18:37:31.942 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 18:37:31.943 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:37:31.959 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****EmQw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****vOjQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:0000001D","TimeStamp":"2019-07-27T13:07:31.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:37:31.960 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"dc6b399aba97423d91257c67dea490f0","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:37:33.548 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:37:33.574 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:33.574 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:33.575 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:37:33.576 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:37:33.576 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:37:33.576 +05:30 [DBG] Start discovery request
2019-07-27 18:37:33.956 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:37:33.967 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:37:34.011 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:34.011 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:34.011 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:37:34.011 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:37:34.011 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:37:34.011 +05:30 [DBG] Start key discovery request
2019-07-27 18:37:34.118 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:37:34.151 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:34.151 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:34.161 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:37:34.189 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:34.190 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:34.190 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:37:34.190 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:37:34.190 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:37:34.190 +05:30 [DBG] Start userinfo request
2019-07-27 18:37:34.191 +05:30 [DBG] Bearer token found in header
2019-07-27 18:37:34.701 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:34.702 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:37:35.223 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:35.224 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:37:35.275 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:37:35.275 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564232851,"exp":1564236451,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564232752,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:37:35.276 +05:30 [DBG] Creating userinfo response
2019-07-27 18:37:35.276 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:37:35.276 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:37:35.550 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:35.550 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:37:35.551 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:37:35.760 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:35.920 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:37:35.920 +05:30 [DBG] End userinfo request
2019-07-27 18:37:35.984 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:37:35.986 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:37:35.987 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:37:35.987 +05:30 [DBG] Rendering check session result
2019-07-27 18:37:36.056 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:37:36.106 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:36.106 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:36.107 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:37:36.108 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:37:36.108 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:37:36.109 +05:30 [DBG] Start discovery request
2019-07-27 18:37:36.750 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:37:36.772 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:37:36.772 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:37:36.772 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:37:36.773 +05:30 [DBG] Rendering check session result
2019-07-27 18:37:46.535 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:37:46.536 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:37:46.536 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:37:46.537 +05:30 [DBG] Start authorize request
2019-07-27 18:37:46.537 +05:30 [DBG] No user present in authorize request
2019-07-27 18:37:46.537 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:37:47.404 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:47.404 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:37:47.404 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"e7e479a236284573abdf29f2024f3151","nonce":"1e44e96a3d774dda8129b5613b37c84e","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:37:47.404 +05:30 [ERR] Request validation failed
2019-07-27 18:37:47.404 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"e7e479a236284573abdf29f2024f3151","nonce":"1e44e96a3d774dda8129b5613b37c84e","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:37:47.404 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RB:00000025","TimeStamp":"2019-07-27T13:07:47.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 18:37:51.620 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:37:51.665 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:37:51.665 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:37:51.665 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:37:51.665 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:37:51.665 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:37:51.666 +05:30 [DBG] Start discovery request
2019-07-27 18:37:51.969 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:37:51.994 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:37:51.996 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:37:51.997 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:37:51.997 +05:30 [DBG] Start authorize request
2019-07-27 18:37:51.997 +05:30 [DBG] No user present in authorize request
2019-07-27 18:37:51.998 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:37:52.532 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:52.533 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:37:52.665 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:53.065 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:37:53.176 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:53.569 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:37:53.570 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:37:53.570 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"50d3be8c86ba4f7b8c13226a461025ca","UiLocales":null,"Nonce":"79b6428bc47b49a6964550d8c855d2a1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"50d3be8c86ba4f7b8c13226a461025ca","nonce":"79b6428bc47b49a6964550d8c855d2a1"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:37:53.570 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 18:37:53.650 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:37:54.673 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:54.673 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:37:54.902 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:55.525 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:37:55.760 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:37:56.477 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:37:56.477 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:37:57.188 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:37:57.188 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:38:15.107 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 18:38:15.172 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:38:15.971 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:38:15.971 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:38:16.207 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:38:16.726 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:38:16.945 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:38:17.517 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:38:17.517 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:38:17.722 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:38:17.722 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 18:38:17.722 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 18:38:17.722 +05:30 [DBG] Adding auth_time claim with value: 1564232897
2019-07-27 18:38:17.723 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:38:17.803 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:0000002A","TimeStamp":"2019-07-27T13:08:17.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 18:38:18.528 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:38:18.529 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:38:18.562 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 18:38:18.563 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 18:38:18.563 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 18:38:18.563 +05:30 [DBG] Start authorize callback request
2019-07-27 18:38:18.563 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:38:18.563 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:38:19.041 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:38:19.041 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:38:19.171 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:38:19.584 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:38:19.752 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:38:20.188 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:38:20.189 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:38:20.190 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"50d3be8c86ba4f7b8c13226a461025ca","UiLocales":null,"Nonce":"79b6428bc47b49a6964550d8c855d2a1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"50d3be8c86ba4f7b8c13226a461025ca","nonce":"79b6428bc47b49a6964550d8c855d2a1"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:38:20.240 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:38:20.240 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:38:20.240 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:38:20.240 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:38:20.377 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 18:38:20.377 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:38:20.382 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****VWxg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****MaOA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RB:0000002B","TimeStamp":"2019-07-27T13:08:20.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:38:20.383 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"50d3be8c86ba4f7b8c13226a461025ca","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:38:20.384 +05:30 [DBG] Augmenting SignInContext
2019-07-27 18:38:20.384 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 18:38:22.306 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:38:22.340 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:38:22.340 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:38:22.341 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:38:22.341 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:38:22.341 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:38:22.341 +05:30 [DBG] Start discovery request
2019-07-27 18:38:22.739 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:38:22.771 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:38:22.799 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:38:22.799 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:38:22.799 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:38:22.799 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:38:22.799 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:38:22.799 +05:30 [DBG] Start key discovery request
2019-07-27 18:38:22.827 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:38:22.854 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:38:22.854 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:38:22.886 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:38:22.923 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:38:22.923 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:38:22.923 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:38:22.923 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:38:22.923 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:38:22.923 +05:30 [DBG] Start userinfo request
2019-07-27 18:38:22.924 +05:30 [DBG] Bearer token found in header
2019-07-27 18:38:23.425 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:38:23.425 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:38:23.939 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:38:23.939 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:38:23.990 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:38:23.991 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564232900,"exp":1564236500,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:38:23.991 +05:30 [DBG] Creating userinfo response
2019-07-27 18:38:23.991 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:38:23.991 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:38:24.181 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:38:24.182 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:38:24.182 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:38:24.371 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:38:24.527 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:38:24.527 +05:30 [DBG] End userinfo request
2019-07-27 18:38:24.719 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:38:24.719 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:38:24.719 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:38:24.719 +05:30 [DBG] Rendering check session result
2019-07-27 18:38:24.801 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:38:24.905 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:38:24.905 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:38:24.905 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:38:24.906 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:38:24.906 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:38:24.906 +05:30 [DBG] Start discovery request
2019-07-27 18:38:25.429 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:38:25.481 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:38:25.482 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:38:25.482 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:38:25.482 +05:30 [DBG] Rendering check session result
2019-07-27 18:48:18.306 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:48:18.377 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:48:18.377 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:48:18.377 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:48:18.377 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:48:18.378 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:48:18.378 +05:30 [DBG] Start discovery request
2019-07-27 18:48:18.778 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:48:18.821 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:48:18.822 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:48:18.822 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:48:18.822 +05:30 [DBG] Start authorize request
2019-07-27 18:48:18.822 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:48:18.822 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:48:19.320 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:48:19.321 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:48:19.454 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:48:19.867 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:48:20.023 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:48:20.417 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:48:20.418 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:48:20.418 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"96381aeb3c4e46b289aceb00801bd706","UiLocales":null,"Nonce":"4f64c2e6891c437194396222106af669","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"96381aeb3c4e46b289aceb00801bd706","nonce":"4f64c2e6891c437194396222106af669"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:48:20.524 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:48:20.525 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:48:20.525 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:48:20.525 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:48:20.716 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 18:48:20.716 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:48:20.720 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****dFqg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****J-dQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RD:00000002","TimeStamp":"2019-07-27T13:18:20.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:48:20.720 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"96381aeb3c4e46b289aceb00801bd706","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:48:21.647 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:48:21.688 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:48:21.688 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:48:21.688 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:48:21.689 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:48:21.689 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:48:21.689 +05:30 [DBG] Start discovery request
2019-07-27 18:48:22.070 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:48:22.082 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:48:22.113 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:48:22.113 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:48:22.113 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:48:22.113 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:48:22.113 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:48:22.113 +05:30 [DBG] Start key discovery request
2019-07-27 18:48:22.155 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:48:22.183 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:48:22.183 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:48:22.243 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:48:22.295 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:48:22.295 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:48:22.295 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:48:22.296 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:48:22.296 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:48:22.296 +05:30 [DBG] Start userinfo request
2019-07-27 18:48:22.296 +05:30 [DBG] Bearer token found in header
2019-07-27 18:48:22.773 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:48:22.773 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:48:23.315 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:48:23.315 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:48:23.387 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:48:23.387 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564233500,"exp":1564237100,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:48:23.387 +05:30 [DBG] Creating userinfo response
2019-07-27 18:48:23.387 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:48:23.387 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:48:23.642 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:48:23.642 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:48:23.643 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:48:23.853 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:48:24.010 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:48:24.010 +05:30 [DBG] End userinfo request
2019-07-27 18:48:24.052 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:48:24.053 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:48:24.053 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:48:24.053 +05:30 [DBG] Rendering check session result
2019-07-27 18:48:24.103 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:48:24.137 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:48:24.138 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:48:24.177 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:48:24.177 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:48:24.177 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:48:24.177 +05:30 [DBG] Start discovery request
2019-07-27 18:48:24.694 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:48:24.727 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:48:24.727 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:48:24.727 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:48:24.727 +05:30 [DBG] Rendering check session result
2019-07-27 18:49:19.519 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:49:19.575 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:49:19.575 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:49:19.576 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:49:19.577 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:49:19.577 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:49:19.577 +05:30 [DBG] Start discovery request
2019-07-27 18:49:19.989 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:49:20.076 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:49:20.076 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:49:20.076 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:49:20.076 +05:30 [DBG] Rendering check session result
2019-07-27 18:50:30.460 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:30.510 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:30.510 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:30.511 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:30.512 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:30.512 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:30.512 +05:30 [DBG] Start discovery request
2019-07-27 18:50:30.992 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:31.051 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:50:31.051 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:50:31.051 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:50:31.052 +05:30 [DBG] Rendering check session result
2019-07-27 18:50:32.502 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:32.551 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:32.551 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:32.551 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:32.551 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:32.552 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:32.552 +05:30 [DBG] Start discovery request
2019-07-27 18:50:33.037 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:33.069 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:50:33.070 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:50:33.070 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:50:33.070 +05:30 [DBG] Start authorize request
2019-07-27 18:50:33.070 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:50:33.070 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:50:33.555 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:33.555 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:33.703 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:34.062 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:50:34.183 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:34.562 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:50:34.562 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:50:34.563 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ec7922c63cf948e9aa05c28096528030","UiLocales":null,"Nonce":"e447e21fa3004690b97ad18f53bb9269","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"ec7922c63cf948e9aa05c28096528030","nonce":"e447e21fa3004690b97ad18f53bb9269"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:50:34.680 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:50:34.680 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:50:34.682 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:50:34.682 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:50:34.857 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 18:50:34.857 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:50:34.863 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****mspw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uUtQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RE:00000004","TimeStamp":"2019-07-27T13:20:34.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:50:34.863 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"ec7922c63cf948e9aa05c28096528030","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:50:35.805 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:35.840 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:35.840 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:35.840 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:35.841 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:35.841 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:35.841 +05:30 [DBG] Start discovery request
2019-07-27 18:50:36.209 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:36.224 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:50:36.269 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:36.269 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:36.269 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:50:36.269 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:50:36.270 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:50:36.270 +05:30 [DBG] Start key discovery request
2019-07-27 18:50:36.312 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:50:36.350 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:36.351 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:36.360 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:50:36.397 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:36.397 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:36.398 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:50:36.399 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:50:36.399 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:50:36.399 +05:30 [DBG] Start userinfo request
2019-07-27 18:50:36.399 +05:30 [DBG] Bearer token found in header
2019-07-27 18:50:36.933 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:36.933 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:37.404 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:37.404 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:37.448 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:50:37.448 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564233634,"exp":1564237234,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:50:37.448 +05:30 [DBG] Creating userinfo response
2019-07-27 18:50:37.448 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:50:37.448 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:50:37.653 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:37.654 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:50:37.654 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:50:37.863 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:38.016 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:50:38.016 +05:30 [DBG] End userinfo request
2019-07-27 18:50:38.046 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:50:38.048 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:50:38.048 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:50:38.048 +05:30 [DBG] Rendering check session result
2019-07-27 18:50:38.131 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:38.181 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:38.182 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:38.182 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:38.183 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:38.183 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:38.183 +05:30 [DBG] Start discovery request
2019-07-27 18:50:38.734 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:38.800 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:50:38.802 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:50:38.803 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:50:38.803 +05:30 [DBG] Rendering check session result
2019-07-27 18:50:39.703 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:50:39.703 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:50:39.704 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:50:39.704 +05:30 [DBG] Start authorize request
2019-07-27 18:50:39.704 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:50:39.704 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:50:40.408 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:40.408 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:40.409 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"1be0fb8703484e1da57c63a5e5286a61","nonce":"87d5833a00b046c4941c32b09a19060b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:50:40.409 +05:30 [ERR] Request validation failed
2019-07-27 18:50:40.409 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"1be0fb8703484e1da57c63a5e5286a61","nonce":"87d5833a00b046c4941c32b09a19060b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:50:40.410 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RE:0000000C","TimeStamp":"2019-07-27T13:20:40.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 18:50:44.087 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:44.123 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:44.123 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:44.124 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:44.125 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:44.125 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:44.125 +05:30 [DBG] Start discovery request
2019-07-27 18:50:44.514 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:44.529 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:50:44.532 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:50:44.532 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:50:44.532 +05:30 [DBG] Start authorize request
2019-07-27 18:50:44.533 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:50:44.533 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:50:45.025 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:45.026 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:45.172 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:45.612 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:50:45.770 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:46.238 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:50:46.239 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:50:46.239 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"f580f800888340d09f33530459ff3be4","UiLocales":null,"Nonce":"7fc74898ff674816af8e5dc1bca5e3b3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"f580f800888340d09f33530459ff3be4","nonce":"7fc74898ff674816af8e5dc1bca5e3b3"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:50:46.289 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:50:46.290 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:50:46.291 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:50:46.291 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:50:46.449 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 18:50:46.449 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:50:46.453 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****AD1A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A3Xw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RE:0000000F","TimeStamp":"2019-07-27T13:20:46.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:50:46.454 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"f580f800888340d09f33530459ff3be4","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:50:47.240 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:47.273 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:47.273 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:47.274 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:47.274 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:47.275 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:47.275 +05:30 [DBG] Start discovery request
2019-07-27 18:50:47.627 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:47.638 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:50:47.683 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:47.683 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:47.684 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:50:47.684 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:50:47.684 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:50:47.685 +05:30 [DBG] Start key discovery request
2019-07-27 18:50:47.728 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:50:47.770 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:47.770 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:47.777 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:50:47.814 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:47.815 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:47.815 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:50:47.815 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:50:47.815 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:50:47.815 +05:30 [DBG] Start userinfo request
2019-07-27 18:50:47.815 +05:30 [DBG] Bearer token found in header
2019-07-27 18:50:48.367 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:48.367 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:48.868 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:50:48.868 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:50:48.924 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:50:48.924 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564233646,"exp":1564237246,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:50:48.924 +05:30 [DBG] Creating userinfo response
2019-07-27 18:50:48.924 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:50:48.924 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:50:49.150 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:49.151 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:50:49.151 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:50:49.341 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:50:49.469 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:50:49.469 +05:30 [DBG] End userinfo request
2019-07-27 18:50:49.516 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:50:49.516 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:50:49.516 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:50:49.516 +05:30 [DBG] Rendering check session result
2019-07-27 18:50:49.560 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:50:49.597 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:50:49.598 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:50:49.598 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:50:49.598 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:50:49.598 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:50:49.598 +05:30 [DBG] Start discovery request
2019-07-27 18:50:50.172 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:50:50.207 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:50:50.233 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:50:50.233 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:50:50.233 +05:30 [DBG] Rendering check session result
2019-07-27 18:54:06.028 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:54:06.030 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:54:06.030 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:54:06.030 +05:30 [DBG] Start authorize request
2019-07-27 18:54:06.030 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:54:06.030 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:54:07.061 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:54:07.061 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:54:07.062 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"fce60e143528467daccd67959e827e47","nonce":"0f65768a696b4f55a8b5fcb29628e6e8","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:54:07.062 +05:30 [ERR] Request validation failed
2019-07-27 18:54:07.062 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"fce60e143528467daccd67959e827e47","nonce":"0f65768a696b4f55a8b5fcb29628e6e8","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:54:07.062 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RF:00000001","TimeStamp":"2019-07-27T13:24:07.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 18:54:20.574 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:20.631 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:20.632 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:20.632 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:20.633 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:20.633 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:20.634 +05:30 [DBG] Start discovery request
2019-07-27 18:54:21.283 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:54:21.772 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:54:21.772 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:54:21.772 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:54:21.772 +05:30 [DBG] Rendering check session result
2019-07-27 18:54:35.799 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:35.846 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:35.846 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:35.846 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:35.846 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:35.846 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:35.846 +05:30 [DBG] Start discovery request
2019-07-27 18:54:36.376 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:54:36.420 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:36.463 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:36.463 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:36.463 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:36.464 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:36.464 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:36.464 +05:30 [DBG] Start discovery request
2019-07-27 18:54:36.766 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:54:36.766 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:54:36.767 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:54:36.767 +05:30 [DBG] Rendering check session result
2019-07-27 18:54:36.981 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:54:37.029 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 18:54:37.029 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 18:54:37.029 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 18:54:37.029 +05:30 [DBG] Start authorize request
2019-07-27 18:54:37.030 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:54:37.030 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 18:54:37.665 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:54:37.665 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:54:37.859 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:54:38.348 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:54:38.540 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:54:39.170 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 18:54:39.171 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 18:54:39.171 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"a1fb3ecf8d2f463ca09a9a06796e405f","UiLocales":null,"Nonce":"e9ff89dabb84407d8906601b5ad11752","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"a1fb3ecf8d2f463ca09a9a06796e405f","nonce":"e9ff89dabb84407d8906601b5ad11752"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 18:54:39.306 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 18:54:39.307 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 18:54:39.307 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 18:54:39.307 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 18:54:39.766 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 18:54:39.766 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 18:54:39.772 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****rj0A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****L2cA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RG:00000002","TimeStamp":"2019-07-27T13:24:39.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 18:54:39.773 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"a1fb3ecf8d2f463ca09a9a06796e405f","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 18:54:42.310 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:42.441 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:42.441 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:42.441 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:42.442 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:42.442 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:42.442 +05:30 [DBG] Start discovery request
2019-07-27 18:54:43.121 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:54:43.240 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 18:54:43.441 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:43.441 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:43.441 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 18:54:43.442 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 18:54:43.442 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 18:54:43.442 +05:30 [DBG] Start key discovery request
2019-07-27 18:54:43.527 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:54:43.598 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:43.598 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:43.636 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 18:54:43.683 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:43.683 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:43.684 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 18:54:43.685 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 18:54:43.685 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 18:54:43.685 +05:30 [DBG] Start userinfo request
2019-07-27 18:54:43.685 +05:30 [DBG] Bearer token found in header
2019-07-27 18:54:44.365 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:54:44.366 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:54:45.089 +05:30 [DBG] angular_spa found in database: true
2019-07-27 18:54:45.089 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 18:54:45.159 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 18:54:45.159 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564233879,"exp":1564237479,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 18:54:45.159 +05:30 [DBG] Creating userinfo response
2019-07-27 18:54:45.159 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:54:45.160 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:54:45.452 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:54:45.452 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 18:54:45.453 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 18:54:45.741 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 18:54:45.913 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 18:54:45.913 +05:30 [DBG] End userinfo request
2019-07-27 18:54:46.125 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:46.184 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:46.184 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:46.185 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:46.187 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:46.187 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:46.187 +05:30 [DBG] Start discovery request
2019-07-27 18:54:47.061 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:54:47.178 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:54:47.178 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:54:47.179 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:54:47.179 +05:30 [DBG] Rendering check session result
2019-07-27 18:54:47.269 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:54:47.270 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:54:47.270 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:54:47.270 +05:30 [DBG] Rendering check session result
2019-07-27 18:54:50.577 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:50.658 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:50.658 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:50.658 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:50.658 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:50.658 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:50.658 +05:30 [DBG] Start discovery request
2019-07-27 18:54:51.285 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:54:51.378 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:54:51.378 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:54:51.378 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:54:51.379 +05:30 [DBG] Rendering check session result
2019-07-27 18:54:59.376 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:54:59.446 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:54:59.446 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:54:59.447 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:54:59.448 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:54:59.448 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:54:59.448 +05:30 [DBG] Start discovery request
2019-07-27 18:55:00.030 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:55:00.077 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:55:00.077 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:55:00.077 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:55:00.077 +05:30 [DBG] Rendering check session result
2019-07-27 18:55:03.205 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:55:03.356 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:55:03.356 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:55:03.356 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:55:03.356 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:55:03.357 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:55:03.357 +05:30 [DBG] Start discovery request
2019-07-27 18:55:03.882 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:55:03.929 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:55:03.929 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:55:03.929 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:55:03.929 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:10.699 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:10.762 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:10.762 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:10.762 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:10.763 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:10.763 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:10.763 +05:30 [DBG] Start discovery request
2019-07-27 18:57:11.260 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:11.275 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:11.354 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:11.354 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:11.355 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:11.355 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:11.356 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:11.356 +05:30 [DBG] Start discovery request
2019-07-27 18:57:11.685 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:11.685 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:11.685 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:11.685 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:11.978 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:12.149 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:12.150 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:12.150 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:12.150 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:20.609 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:20.678 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:20.678 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:20.678 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:20.678 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:20.679 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:20.679 +05:30 [DBG] Start discovery request
2019-07-27 18:57:21.147 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:21.203 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:21.203 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:21.203 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:21.203 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:25.069 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:25.161 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:25.161 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:25.162 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:25.162 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:25.162 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:25.162 +05:30 [DBG] Start discovery request
2019-07-27 18:57:25.728 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:25.780 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:25.780 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:25.780 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:25.780 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:33.319 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:33.410 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:33.410 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:33.411 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:33.411 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:33.412 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:33.412 +05:30 [DBG] Start discovery request
2019-07-27 18:57:33.862 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:33.932 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:33.932 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:33.932 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:33.932 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:36.120 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:36.257 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:36.257 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:36.258 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:36.258 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:36.258 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:36.258 +05:30 [DBG] Start discovery request
2019-07-27 18:57:37.315 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:38.747 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:38.776 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:38.777 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:38.777 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:38.777 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:38.777 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:38.777 +05:30 [DBG] Start discovery request
2019-07-27 18:57:39.371 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:40.537 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:40.746 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:40.746 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:40.747 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:40.748 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:40.748 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:40.748 +05:30 [DBG] Start discovery request
2019-07-27 18:57:41.328 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:41.379 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:41.380 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:41.380 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:41.380 +05:30 [DBG] Rendering check session result
2019-07-27 18:57:44.405 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:57:44.470 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:57:44.470 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:57:44.470 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:57:44.471 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:57:44.471 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:57:44.471 +05:30 [DBG] Start discovery request
2019-07-27 18:57:45.314 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:57:45.340 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:57:45.340 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:57:45.341 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:57:45.341 +05:30 [DBG] Rendering check session result
2019-07-27 18:58:22.024 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:58:22.074 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:58:22.075 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:58:22.075 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:58:22.075 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:58:22.075 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:58:22.075 +05:30 [DBG] Start discovery request
2019-07-27 18:58:22.872 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:58:22.938 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:58:22.939 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:58:22.939 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:58:22.939 +05:30 [DBG] Rendering check session result
2019-07-27 18:58:23.446 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 18:58:23.494 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 18:58:23.494 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 18:58:23.496 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 18:58:23.496 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 18:58:23.496 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 18:58:23.496 +05:30 [DBG] Start discovery request
2019-07-27 18:58:23.960 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 18:58:24.019 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 18:58:24.020 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 18:58:24.020 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 18:58:24.020 +05:30 [DBG] Rendering check session result
2019-07-27 19:04:46.219 +05:30 [INF] Removing 0 grants
2019-07-27 19:04:46.403 +05:30 [WRN] Query: '(from DeviceFlowCodes x in DbSet<DeviceFlowCodes> where [x].Expiration < (Nullable<DateTime>)DateTim...' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-27 19:04:46.605 +05:30 [INF] Removing 0 device flow codes
2019-07-27 19:17:11.931 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:17:12.064 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:17:12.064 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:17:12.064 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:17:12.064 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:17:12.064 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:17:12.064 +05:30 [DBG] Start discovery request
2019-07-27 19:17:12.731 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:17:14.747 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:17:14.785 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:17:14.785 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:17:14.786 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:17:14.786 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:17:14.786 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:17:14.786 +05:30 [DBG] Start discovery request
2019-07-27 19:17:15.262 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:17:15.263 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:17:15.263 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:17:15.263 +05:30 [DBG] Rendering check session result
2019-07-27 19:17:15.266 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:17:15.727 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:17:15.727 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:17:15.728 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:17:15.728 +05:30 [DBG] Rendering check session result
2019-07-27 19:18:13.052 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:18:13.150 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:18:13.150 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:18:13.151 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:18:13.151 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:18:13.151 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:18:13.151 +05:30 [DBG] Start discovery request
2019-07-27 19:18:13.841 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:18:13.911 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:18:13.911 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:18:13.912 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:18:13.912 +05:30 [DBG] Rendering check session result
2019-07-27 19:18:16.420 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:18:16.457 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:18:16.457 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:18:16.458 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:18:16.459 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:18:16.459 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:18:16.459 +05:30 [DBG] Start discovery request
2019-07-27 19:18:16.956 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:18:17.051 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:18:17.051 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:18:17.051 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:18:17.051 +05:30 [DBG] Rendering check session result
2019-07-27 19:19:49.433 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:19:49.530 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:19:49.531 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:19:49.531 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:19:49.531 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:19:49.531 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:19:49.531 +05:30 [DBG] Start discovery request
2019-07-27 19:19:50.169 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:19:50.869 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:19:50.869 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:19:50.870 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:19:50.870 +05:30 [DBG] Rendering check session result
2019-07-27 19:19:55.290 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:19:55.322 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:19:55.322 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:19:55.323 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:19:55.323 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:19:55.323 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:19:55.324 +05:30 [DBG] Start discovery request
2019-07-27 19:19:55.825 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:19:55.922 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:19:55.980 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:19:55.980 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:19:55.980 +05:30 [DBG] Start authorize request
2019-07-27 19:19:55.989 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:19:55.989 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:19:56.627 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:19:56.628 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:19:56.853 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:19:57.373 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:19:57.552 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:19:58.007 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:19:58.007 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:19:58.023 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"4788f2a0762a4f83bf748bfad9790e7b","UiLocales":null,"Nonce":"3e8c93438fff4d5f8be2a31d78a05846","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"4788f2a0762a4f83bf748bfad9790e7b","nonce":"3e8c93438fff4d5f8be2a31d78a05846"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:19:58.194 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:19:58.194 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:19:58.194 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:19:58.194 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:19:58.536 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 19:19:58.536 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:19:58.581 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****66MA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zDnA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RM:00000004","TimeStamp":"2019-07-27T13:49:58.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:19:58.582 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"4788f2a0762a4f83bf748bfad9790e7b","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:20:00.875 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:20:00.925 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:20:00.925 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:20:00.925 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:20:00.925 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:20:00.925 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:20:00.926 +05:30 [DBG] Start discovery request
2019-07-27 19:20:01.354 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:20:01.382 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:20:01.418 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:20:01.418 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:20:01.418 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:20:01.436 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:20:01.436 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:20:01.436 +05:30 [DBG] Start key discovery request
2019-07-27 19:20:01.469 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:20:01.618 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:20:01.619 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:20:01.660 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:20:01.761 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:20:01.761 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:20:01.761 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:20:01.762 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:20:01.762 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:20:01.762 +05:30 [DBG] Start userinfo request
2019-07-27 19:20:01.762 +05:30 [DBG] Bearer token found in header
2019-07-27 19:20:02.349 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:20:02.350 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:20:02.957 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:20:02.957 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:20:02.997 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:20:03.012 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564235398,"exp":1564238998,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:20:03.013 +05:30 [DBG] Creating userinfo response
2019-07-27 19:20:03.013 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:20:03.013 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:20:03.211 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:20:03.212 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:20:03.212 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:20:03.449 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:20:03.687 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:20:03.687 +05:30 [DBG] End userinfo request
2019-07-27 19:20:03.776 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:20:03.776 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:20:03.777 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:20:03.777 +05:30 [DBG] Rendering check session result
2019-07-27 19:20:03.884 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:20:03.941 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:20:03.941 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:20:03.942 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:20:03.942 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:20:03.943 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:20:03.943 +05:30 [DBG] Start discovery request
2019-07-27 19:20:04.641 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:20:04.668 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:20:04.668 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:20:04.668 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:20:04.668 +05:30 [DBG] Rendering check session result
2019-07-27 19:28:57.290 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:28:57.364 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:28:57.365 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:28:57.365 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:28:57.366 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:28:57.366 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:28:57.366 +05:30 [DBG] Start discovery request
2019-07-27 19:28:57.900 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:28:58.471 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:28:58.472 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:28:58.472 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:28:58.472 +05:30 [DBG] Rendering check session result
2019-07-27 19:29:00.192 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:29:00.681 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:29:00.681 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:29:00.682 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:29:00.682 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:29:00.682 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:29:00.682 +05:30 [DBG] Start discovery request
2019-07-27 19:29:01.194 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:29:02.855 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:29:02.856 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:29:02.856 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:29:02.856 +05:30 [DBG] Start authorize request
2019-07-27 19:29:02.856 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:29:02.856 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:29:04.786 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:29:04.786 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:29:05.427 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:29:06.462 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:29:06.617 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:29:06.958 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:29:06.959 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:29:06.960 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"f7f097dd315b410d82471c356b9d9e46","UiLocales":null,"Nonce":"235f331a74a24f2e86e505650568d0c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"f7f097dd315b410d82471c356b9d9e46","nonce":"235f331a74a24f2e86e505650568d0c6"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:29:07.020 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:29:07.021 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:29:07.021 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:29:07.021 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:29:07.318 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 19:29:07.318 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:29:07.323 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****w_0A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****toiw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RN:00000004","TimeStamp":"2019-07-27T13:59:07.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:29:07.323 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"f7f097dd315b410d82471c356b9d9e46","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:29:09.358 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:29:09.397 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:29:09.397 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:29:09.397 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:29:09.398 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:29:09.398 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:29:09.398 +05:30 [DBG] Start discovery request
2019-07-27 19:29:09.781 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:29:09.816 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:29:09.854 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:29:09.854 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:29:09.854 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:29:09.854 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:29:09.854 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:29:09.854 +05:30 [DBG] Start key discovery request
2019-07-27 19:29:09.896 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:29:09.975 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:29:10.001 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:29:10.026 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:29:10.062 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:29:10.062 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:29:10.062 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:29:10.063 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:29:10.063 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:29:10.063 +05:30 [DBG] Start userinfo request
2019-07-27 19:29:10.063 +05:30 [DBG] Bearer token found in header
2019-07-27 19:29:10.566 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:29:10.566 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:29:11.078 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:29:11.078 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:29:11.128 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:29:11.128 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564235947,"exp":1564239547,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:29:11.128 +05:30 [DBG] Creating userinfo response
2019-07-27 19:29:11.128 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:29:11.128 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:29:11.327 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:29:11.327 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:29:11.328 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:29:11.577 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:29:11.751 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:29:11.751 +05:30 [DBG] End userinfo request
2019-07-27 19:29:11.796 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:29:11.796 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:29:11.796 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:29:11.797 +05:30 [DBG] Rendering check session result
2019-07-27 19:29:11.906 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:29:11.957 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:29:11.957 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:29:11.957 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:29:11.958 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:29:11.958 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:29:11.958 +05:30 [DBG] Start discovery request
2019-07-27 19:29:12.470 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:29:12.505 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:29:12.505 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:29:12.505 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:29:12.505 +05:30 [DBG] Rendering check session result
2019-07-27 19:30:11.959 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:30:11.997 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:11.997 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:11.997 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:30:11.998 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:30:11.998 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:30:11.998 +05:30 [DBG] Start discovery request
2019-07-27 19:30:12.416 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:30:12.442 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:30:12.442 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:30:12.442 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:30:12.442 +05:30 [DBG] Rendering check session result
2019-07-27 19:30:14.192 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:30:14.220 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:14.220 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:14.220 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:30:14.221 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:30:14.221 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:30:14.221 +05:30 [DBG] Start discovery request
2019-07-27 19:30:14.604 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:30:14.667 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:30:14.668 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:30:14.668 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:30:14.668 +05:30 [DBG] Start authorize request
2019-07-27 19:30:14.668 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:30:14.668 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:30:15.227 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:30:15.228 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:30:15.423 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:30:15.831 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:30:15.964 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:30:16.393 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:30:16.394 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:30:16.394 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"8302e2eba1f549b18ad787190ac64fee","UiLocales":null,"Nonce":"6311b2b090c54a0d8e597850d750f9bd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"8302e2eba1f549b18ad787190ac64fee","nonce":"6311b2b090c54a0d8e597850d750f9bd"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:30:16.452 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:30:16.452 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:30:16.452 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:30:16.452 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:30:16.631 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 19:30:16.631 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:30:16.636 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****tCfw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****asNg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RN:0000000F","TimeStamp":"2019-07-27T14:00:16.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:30:16.636 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"8302e2eba1f549b18ad787190ac64fee","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:30:18.466 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:30:18.596 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:18.597 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:18.597 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:30:18.597 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:30:18.597 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:30:18.597 +05:30 [DBG] Start discovery request
2019-07-27 19:30:18.964 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:30:18.997 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:30:19.093 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:19.093 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:19.093 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:30:19.094 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:30:19.094 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:30:19.094 +05:30 [DBG] Start key discovery request
2019-07-27 19:30:19.168 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:30:19.201 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:19.201 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:19.210 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:30:19.258 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:19.258 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:19.279 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:30:19.280 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:30:19.280 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:30:19.280 +05:30 [DBG] Start userinfo request
2019-07-27 19:30:19.280 +05:30 [DBG] Bearer token found in header
2019-07-27 19:30:19.802 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:30:19.803 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:30:20.337 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:30:20.337 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:30:20.496 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:30:20.509 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564236016,"exp":1564239616,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:30:20.509 +05:30 [DBG] Creating userinfo response
2019-07-27 19:30:20.510 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:30:20.510 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:30:20.638 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:30:20.639 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:30:20.639 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:30:20.805 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:30:20.932 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:30:20.932 +05:30 [DBG] End userinfo request
2019-07-27 19:30:21.008 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:30:21.008 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:30:21.008 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:30:21.008 +05:30 [DBG] Rendering check session result
2019-07-27 19:30:21.062 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:30:21.120 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:30:21.120 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:30:21.120 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:30:21.121 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:30:21.122 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:30:21.122 +05:30 [DBG] Start discovery request
2019-07-27 19:30:21.826 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:30:21.852 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:30:21.852 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:30:21.852 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:30:21.852 +05:30 [DBG] Rendering check session result
2019-07-27 19:31:48.231 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:31:48.275 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:31:48.276 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:31:48.277 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:31:48.277 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:31:48.278 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:31:48.278 +05:30 [DBG] Start discovery request
2019-07-27 19:31:48.855 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:31:48.864 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:31:48.928 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:31:48.944 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:31:48.944 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:31:48.944 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:31:48.945 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:31:48.945 +05:30 [DBG] Start discovery request
2019-07-27 19:31:49.442 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:31:49.442 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:31:49.442 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:31:49.443 +05:30 [DBG] Rendering check session result
2019-07-27 19:31:49.498 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:31:49.778 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:31:49.779 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:31:49.788 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:31:49.788 +05:30 [DBG] Rendering check session result
2019-07-27 19:32:02.252 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:32:02.347 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:32:02.347 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:32:02.625 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:32:02.625 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:32:02.625 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:32:02.625 +05:30 [DBG] Start discovery request
2019-07-27 19:32:03.094 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:32:03.102 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:32:03.146 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:32:03.146 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:32:03.146 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:32:03.147 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:32:03.147 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:32:03.147 +05:30 [DBG] Start discovery request
2019-07-27 19:32:03.459 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:32:03.460 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:32:03.460 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:32:03.460 +05:30 [DBG] Rendering check session result
2019-07-27 19:32:03.673 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:32:03.739 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:32:03.799 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:32:03.799 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:32:03.799 +05:30 [DBG] Rendering check session result
2019-07-27 19:32:11.862 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:32:11.948 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:32:11.949 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:32:11.949 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:32:11.950 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:32:11.950 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:32:11.950 +05:30 [DBG] Start discovery request
2019-07-27 19:32:12.478 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:32:12.498 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:32:12.535 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:32:12.535 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:32:12.535 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:32:12.536 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:32:12.536 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:32:12.536 +05:30 [DBG] Start discovery request
2019-07-27 19:32:12.995 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:32:12.995 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:32:12.995 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:32:12.995 +05:30 [DBG] Rendering check session result
2019-07-27 19:32:13.090 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:32:13.214 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:32:13.214 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:32:13.214 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:32:13.214 +05:30 [DBG] Rendering check session result
2019-07-27 19:33:00.363 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:33:00.467 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:00.468 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:00.468 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:33:00.468 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:33:00.468 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:33:00.468 +05:30 [DBG] Start discovery request
2019-07-27 19:33:01.067 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:33:01.180 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:33:01.180 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:33:01.180 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:33:01.180 +05:30 [DBG] Rendering check session result
2019-07-27 19:33:02.132 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:33:02.259 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:02.259 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:02.260 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:33:02.260 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:33:02.260 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:33:02.260 +05:30 [DBG] Start discovery request
2019-07-27 19:33:02.834 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:33:02.977 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:33:02.977 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:33:02.993 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:33:02.994 +05:30 [DBG] Rendering check session result
2019-07-27 19:33:06.292 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:33:06.358 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:06.358 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:06.358 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:33:06.358 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:33:06.359 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:33:06.359 +05:30 [DBG] Start discovery request
2019-07-27 19:33:06.807 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:33:06.828 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:33:06.830 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:33:06.830 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:33:06.830 +05:30 [DBG] Rendering check session result
2019-07-27 19:33:08.217 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:33:08.217 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:33:08.218 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:33:08.218 +05:30 [DBG] Start authorize request
2019-07-27 19:33:08.229 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:33:08.229 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:33:08.994 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:33:08.994 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:33:09.148 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:33:09.752 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:33:09.895 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:33:10.329 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:33:10.329 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:33:10.329 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"cd107436ca724a969a7b8b7bf49bedb3","UiLocales":null,"Nonce":"d6495c54987a42988753e05077119b97","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ea53bd56098412682e922522af6c96c7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"cd107436ca724a969a7b8b7bf49bedb3","nonce":"d6495c54987a42988753e05077119b97"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:33:10.387 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:33:10.387 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:33:10.387 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:33:10.407 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:33:10.571 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 19:33:10.571 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:33:10.576 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****94lw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c3Xg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6RO:0000000A","TimeStamp":"2019-07-27T14:03:10.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:33:10.577 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"cd107436ca724a969a7b8b7bf49bedb3","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:33:12.859 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:33:12.903 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:12.904 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:12.904 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:33:12.904 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:33:12.904 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:33:12.904 +05:30 [DBG] Start discovery request
2019-07-27 19:33:13.364 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:33:13.380 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:33:13.420 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:33:13.420 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:33:13.420 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:33:13.420 +05:30 [DBG] Rendering check session result
2019-07-27 19:33:13.422 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:13.423 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:13.423 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:33:13.424 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:33:13.424 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:33:13.424 +05:30 [DBG] Start discovery request
2019-07-27 19:33:13.937 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:33:13.951 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:33:13.984 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:13.984 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:13.985 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:33:13.985 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:33:13.986 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:33:13.986 +05:30 [DBG] Start key discovery request
2019-07-27 19:33:14.024 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:33:14.063 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:14.063 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:14.073 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:33:14.101 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:14.116 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:14.117 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:33:14.117 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:33:14.117 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:33:14.117 +05:30 [DBG] Start userinfo request
2019-07-27 19:33:14.117 +05:30 [DBG] Bearer token found in header
2019-07-27 19:33:14.929 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:33:14.929 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:33:15.569 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:33:15.569 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:33:15.619 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:33:15.620 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564236190,"exp":1564239790,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564232897,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:33:15.620 +05:30 [DBG] Creating userinfo response
2019-07-27 19:33:15.620 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:33:15.620 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:33:15.846 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:33:15.846 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:33:15.846 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:33:16.031 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:33:16.181 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:33:16.182 +05:30 [DBG] End userinfo request
2019-07-27 19:33:16.336 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:33:16.382 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:33:16.382 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:33:16.383 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:33:16.383 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:33:16.383 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:33:16.423 +05:30 [DBG] Start discovery request
2019-07-27 19:33:17.019 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:33:17.075 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:33:17.076 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:33:17.077 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:33:17.077 +05:30 [DBG] Rendering check session result
2019-07-27 19:37:22.727 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:37:22.728 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:37:22.728 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:37:22.728 +05:30 [DBG] Start authorize request
2019-07-27 19:37:22.750 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 19:37:22.750 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:37:23.221 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:37:23.221 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:37:23.221 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email API1","state":"6b7ea339ed2e4f7daf301d9e621d721f","nonce":"cdb8ebe3016745a2b24bb10f7d35aeff","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:37:23.221 +05:30 [ERR] Request validation failed
2019-07-27 19:37:23.222 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token token","scope":"openid profile email API1","state":"6b7ea339ed2e4f7daf301d9e621d721f","nonce":"cdb8ebe3016745a2b24bb10f7d35aeff","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:37:23.237 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RQ:00000001","TimeStamp":"2019-07-27T14:07:23.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:39:51.944 +05:30 [ERR] Exception reading protected message
System.Security.Cryptography.CryptographicException: The provided payload cannot be decrypted because it was not protected with this protection provider.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at IdentityServer4.Stores.ProtectedDataMessageStore`1.ReadAsync(String value) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\ProtectedDataMessageStore.cs:line 54
2019-07-27 19:39:51.944 +05:30 [ERR] Exception reading protected message
System.Security.Cryptography.CryptographicException: The provided payload cannot be decrypted because it was not protected with this protection provider.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at IdentityServer4.Stores.ProtectedDataMessageStore`1.ReadAsync(String value) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\ProtectedDataMessageStore.cs:line 54
2019-07-27 19:40:27.829 +05:30 [DBG] CORS request made for path: /account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 19:40:30.553 +05:30 [ERR] Exception reading protected message
System.Security.Cryptography.CryptographicException: The provided payload cannot be decrypted because it was not protected with this protection provider.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at IdentityServer4.Stores.ProtectedDataMessageStore`1.ReadAsync(String value) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\ProtectedDataMessageStore.cs:line 54
2019-07-27 19:40:30.768 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-27 19:40:30.850 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-27 19:40:30.850 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-27 19:40:30.865 +05:30 [INF] {"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIHLFVP6RT:00000002","TimeStamp":"2019-07-27T14:10:30.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-27 19:40:30.964 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-27 19:40:31.047 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-27 19:40:31.047 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-27 19:40:31.103 +05:30 [DBG] Processing signout callback request
2019-07-27 19:40:31.748 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:31.749 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:31.749 +05:30 [DBG] No client front-channel logout URLs
2019-07-27 19:40:31.750 +05:30 [DBG] No client back-channel logout URLs
2019-07-27 19:40:31.750 +05:30 [INF] Successful signout callback.
2019-07-27 19:40:31.750 +05:30 [DBG] No client front-channel iframe urls
2019-07-27 19:40:31.750 +05:30 [DBG] No client back-channel iframe urls
2019-07-27 19:40:31.793 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:40:31.794 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:40:31.831 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:40:31.831 +05:30 [DBG] Start authorize request
2019-07-27 19:40:31.832 +05:30 [DBG] No user present in authorize request
2019-07-27 19:40:31.832 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:40:32.084 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:40:32.085 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:40:32.085 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:40:32.085 +05:30 [DBG] Start authorize request
2019-07-27 19:40:32.086 +05:30 [DBG] No user present in authorize request
2019-07-27 19:40:32.086 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:40:32.721 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:32.721 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:32.721 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"e9414c7aec6b442ba66a5459b5f83236","nonce":"09d093a4dc6545b4ab5d3e585d58be3a","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:32.722 +05:30 [ERR] Request validation failed
2019-07-27 19:40:32.723 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"e9414c7aec6b442ba66a5459b5f83236","nonce":"09d093a4dc6545b4ab5d3e585d58be3a","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:32.723 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RR:00000003","TimeStamp":"2019-07-27T14:10:32.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:40:32.898 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:40:32.901 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:40:32.901 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:40:32.901 +05:30 [DBG] Start authorize request
2019-07-27 19:40:32.901 +05:30 [DBG] No user present in authorize request
2019-07-27 19:40:32.901 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:40:33.530 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:33.530 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:33.531 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"3190f934f5304c82b4d75fe2eeb2ccab","nonce":"e1fb54177e9b4789b8f908ac6c188b8c","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:33.531 +05:30 [ERR] Request validation failed
2019-07-27 19:40:33.531 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"3190f934f5304c82b4d75fe2eeb2ccab","nonce":"e1fb54177e9b4789b8f908ac6c188b8c","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:33.531 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RS:00000003","TimeStamp":"2019-07-27T14:10:33.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:40:33.808 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:33.809 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:33.809 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"5be7ce1251d0452cb021192a9e87a014","nonce":"a4442484570a434493e049c52632cadd","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:33.809 +05:30 [ERR] Request validation failed
2019-07-27 19:40:33.809 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"5be7ce1251d0452cb021192a9e87a014","nonce":"a4442484570a434493e049c52632cadd","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:33.810 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RT:00000003","TimeStamp":"2019-07-27T14:10:33.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:40:39.368 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:40:39.412 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:40:39.412 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:40:39.412 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:40:39.413 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:40:39.413 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:40:39.413 +05:30 [DBG] Start discovery request
2019-07-27 19:40:39.818 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:40:39.899 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:40:39.901 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:40:39.901 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:40:39.902 +05:30 [DBG] Rendering check session result
2019-07-27 19:40:39.965 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:40:39.966 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:40:39.967 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:40:39.967 +05:30 [DBG] Start authorize request
2019-07-27 19:40:39.967 +05:30 [DBG] No user present in authorize request
2019-07-27 19:40:39.967 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:40:40.469 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:40.470 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:40.470 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"96b89f74d36d4b3fb8076b67f0b18aba","nonce":"51b74029cdb04c19ba3532f5c46f5867","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:40.471 +05:30 [ERR] Request validation failed
2019-07-27 19:40:40.471 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"96b89f74d36d4b3fb8076b67f0b18aba","nonce":"51b74029cdb04c19ba3532f5c46f5867","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:40.472 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6RV:00000004","TimeStamp":"2019-07-27T14:10:40.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:40:40.951 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:40:40.969 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:40:40.969 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:40:40.969 +05:30 [DBG] Start authorize request
2019-07-27 19:40:40.969 +05:30 [DBG] No user present in authorize request
2019-07-27 19:40:40.969 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:40:41.537 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:41.538 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:41.721 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:40:42.192 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:40:42.334 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:40:42.723 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:40:42.723 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:40:42.723 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"9ad14238bb1b44e8b957a5f864a0ece9","UiLocales":null,"Nonce":"090063e8f1de4abaa83eead761bcf719","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"9ad14238bb1b44e8b957a5f864a0ece9","nonce":"090063e8f1de4abaa83eead761bcf719"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:40:42.723 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 19:40:42.845 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:40:43.583 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:43.583 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:40:43.836 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:40:44.533 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:40:44.711 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:40:45.251 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:40:45.252 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:40:45.902 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:40:45.902 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:41:47.360 +05:30 [ERR] Exception reading protected message
System.Security.Cryptography.CryptographicException: The provided payload cannot be decrypted because it was not protected with this protection provider.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at IdentityServer4.Stores.ProtectedDataMessageStore`1.ReadAsync(String value) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\ProtectedDataMessageStore.cs:line 54
2019-07-27 19:47:36.270 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:47:37.952 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:47:37.952 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:47:38.070 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:47:38.071 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:47:38.071 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:47:38.071 +05:30 [DBG] Start discovery request
2019-07-27 19:47:39.193 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:47:39.570 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:47:39.571 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:47:39.571 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:47:39.571 +05:30 [DBG] Rendering check session result
2019-07-27 19:47:40.249 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:47:40.250 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:47:40.250 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:47:40.250 +05:30 [DBG] Start authorize request
2019-07-27 19:47:40.251 +05:30 [DBG] No user present in authorize request
2019-07-27 19:47:40.251 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:47:41.884 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:47:41.884 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:47:41.997 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"395400823d38432ca4fd35e0d86ed883","nonce":"6f3359f1d1b0475da5afa142fc67bb7b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:47:41.997 +05:30 [ERR] Request validation failed
2019-07-27 19:47:41.997 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"395400823d38432ca4fd35e0d86ed883","nonce":"6f3359f1d1b0475da5afa142fc67bb7b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:47:41.997 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S0:00000003","TimeStamp":"2019-07-27T14:17:41.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:48:03.628 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:48:03.661 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:48:03.661 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:48:03.661 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:48:03.662 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:48:03.662 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:48:03.662 +05:30 [DBG] Start discovery request
2019-07-27 19:48:04.046 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:48:04.128 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:48:04.129 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:48:04.129 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:48:04.129 +05:30 [DBG] Start authorize request
2019-07-27 19:48:04.129 +05:30 [DBG] No user present in authorize request
2019-07-27 19:48:04.129 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:48:04.681 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:48:04.681 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:48:04.881 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:05.337 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:05.478 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:06.174 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:06.175 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:48:06.175 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7f75995b4dff41349e16f7d9991e413f","UiLocales":null,"Nonce":"6c525d8dad744f449a07fd30293f121d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"7f75995b4dff41349e16f7d9991e413f","nonce":"6c525d8dad744f449a07fd30293f121d"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:48:06.175 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 19:48:06.300 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:48:07.153 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:48:07.154 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:48:07.499 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:08.224 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:08.530 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:09.262 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:09.262 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:48:09.900 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:48:09.901 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:48:33.819 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 19:48:33.987 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:48:34.718 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:48:34.719 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:48:34.949 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:35.466 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:35.668 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:36.175 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:36.176 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:48:36.474 +05:30 [WRN] Invalid password for user 51889b61-8249-43ee-9843-05e977a12abe.
2019-07-27 19:48:36.484 +05:30 [WRN] User 51889b61-8249-43ee-9843-05e977a12abe failed to provide the correct password.
2019-07-27 19:48:39.356 +05:30 [INF] {"Username":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLOIHLFVP6S0:00000008","TimeStamp":"2019-07-27T14:18:39.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-07-27 19:48:39.425 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:48:40.491 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:48:40.491 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:48:40.749 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:41.335 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:41.615 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:48:42.481 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:48:42.481 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:48:43.279 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:48:43.279 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:49:04.198 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 19:49:04.255 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:49:04.868 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:49:04.868 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:49:05.047 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:49:05.542 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:49:05.768 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:49:06.303 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:49:06.303 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:49:06.761 +05:30 [DBG] Augmenting SignInContext
2019-07-27 19:49:06.761 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 19:49:06.762 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 19:49:06.762 +05:30 [DBG] Adding auth_time claim with value: 1564237146
2019-07-27 19:49:06.762 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 19:49:06.856 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIHLFVP6S0:00000009","TimeStamp":"2019-07-27T14:19:06.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 19:49:07.552 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:49:07.553 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:49:07.574 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 19:49:07.575 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 19:49:07.575 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 19:49:07.575 +05:30 [DBG] Start authorize callback request
2019-07-27 19:49:07.576 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:49:07.576 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:49:08.103 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:49:08.103 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:49:08.237 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:49:08.632 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:49:08.774 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:49:09.133 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:49:09.134 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:49:09.135 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7f75995b4dff41349e16f7d9991e413f","UiLocales":null,"Nonce":"6c525d8dad744f449a07fd30293f121d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"7f75995b4dff41349e16f7d9991e413f","nonce":"6c525d8dad744f449a07fd30293f121d"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:49:09.213 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:49:09.214 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:49:09.214 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:49:09.214 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:49:09.388 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 19:49:09.388 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:49:09.392 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9UuA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zyHA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6S0:0000000A","TimeStamp":"2019-07-27T14:19:09.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:49:09.392 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"7f75995b4dff41349e16f7d9991e413f","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:49:09.393 +05:30 [DBG] Augmenting SignInContext
2019-07-27 19:49:09.393 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 19:49:11.225 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:49:11.290 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:49:11.290 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:49:11.290 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:49:11.291 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:49:11.291 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:49:11.291 +05:30 [DBG] Start discovery request
2019-07-27 19:49:11.684 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:49:11.696 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:49:11.725 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:49:11.725 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:49:11.725 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:49:11.725 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:49:11.726 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:49:11.726 +05:30 [DBG] Start key discovery request
2019-07-27 19:49:11.776 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:49:11.816 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:49:11.816 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:49:11.841 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:49:11.879 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:49:11.880 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:49:11.880 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:49:11.880 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:49:11.880 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:49:11.880 +05:30 [DBG] Start userinfo request
2019-07-27 19:49:11.880 +05:30 [DBG] Bearer token found in header
2019-07-27 19:49:12.375 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:49:12.376 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:49:12.888 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:49:12.888 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:49:12.969 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:49:12.970 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564237149,"exp":1564240749,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564237146,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:49:12.970 +05:30 [DBG] Creating userinfo response
2019-07-27 19:49:12.970 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:49:12.970 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:49:13.252 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:49:13.253 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:49:13.253 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:49:13.453 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:49:13.594 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:49:13.594 +05:30 [DBG] End userinfo request
2019-07-27 19:49:13.650 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:49:13.650 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:49:13.650 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:49:13.650 +05:30 [DBG] Rendering check session result
2019-07-27 19:49:13.688 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:49:13.721 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:49:13.721 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:49:13.722 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:49:13.722 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:49:13.722 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:49:13.722 +05:30 [DBG] Start discovery request
2019-07-27 19:49:14.498 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:49:14.530 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:49:14.530 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:49:14.530 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:49:14.530 +05:30 [DBG] Rendering check session result
2019-07-27 19:56:02.180 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:06.470 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:06.471 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:06.475 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:06.536 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:06.606 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:06.606 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:06.606 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:06.629 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:06.631 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:06.631 +05:30 [DBG] Start discovery request
2019-07-27 19:56:06.634 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:06.699 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:06.699 +05:30 [DBG] Start discovery request
2019-07-27 19:56:08.419 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:08.567 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:08.861 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:56:08.861 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:56:08.861 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:56:08.861 +05:30 [DBG] Rendering check session result
2019-07-27 19:56:09.637 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:56:09.637 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:56:09.638 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:56:09.638 +05:30 [DBG] Start authorize request
2019-07-27 19:56:09.638 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:56:09.638 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:56:12.147 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:12.147 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:12.348 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"667d7ceb47cd49809c8987171558b3f6","nonce":"eadd60fbfeff43a69b4c64e050505e20","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:56:12.348 +05:30 [ERR] Request validation failed
2019-07-27 19:56:12.349 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"667d7ceb47cd49809c8987171558b3f6","nonce":"eadd60fbfeff43a69b4c64e050505e20","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:56:12.349 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S2:00000003","TimeStamp":"2019-07-27T14:26:12.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 19:56:17.807 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:17.831 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:17.831 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:17.832 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:17.832 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:17.833 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:17.833 +05:30 [DBG] Start discovery request
2019-07-27 19:56:18.810 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:18.921 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:56:18.922 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:56:18.922 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:56:18.923 +05:30 [DBG] Start authorize request
2019-07-27 19:56:18.924 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:56:18.924 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:56:19.679 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:19.679 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:20.222 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:23.902 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:56:24.098 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:24.495 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:56:24.495 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:56:24.496 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1f9cf111eebb40a6a8b38ff225eef0e6","UiLocales":null,"Nonce":"f223b755ea4e489abf7f5ae8c72e58cc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"1f9cf111eebb40a6a8b38ff225eef0e6","nonce":"f223b755ea4e489abf7f5ae8c72e58cc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:56:25.083 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:56:25.084 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:56:25.084 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:56:25.084 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:56:25.309 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 19:56:25.309 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:56:25.315 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****nalA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Xhkw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6S2:00000006","TimeStamp":"2019-07-27T14:26:25.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:56:25.315 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"1f9cf111eebb40a6a8b38ff225eef0e6","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:56:28.336 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:28.362 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:28.362 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:28.363 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:28.364 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:28.364 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:28.364 +05:30 [DBG] Start discovery request
2019-07-27 19:56:28.780 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:28.799 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:56:28.859 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:28.860 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:28.860 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:56:28.861 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:56:28.861 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:56:28.861 +05:30 [DBG] Start key discovery request
2019-07-27 19:56:28.912 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:56:28.938 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:28.938 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:28.970 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:56:29.006 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:29.006 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:29.007 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:56:29.007 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:56:29.008 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:56:29.008 +05:30 [DBG] Start userinfo request
2019-07-27 19:56:29.008 +05:30 [DBG] Bearer token found in header
2019-07-27 19:56:29.505 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:29.505 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:30.125 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:30.126 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:30.211 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:56:30.212 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564237585,"exp":1564241185,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564237146,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:56:30.212 +05:30 [DBG] Creating userinfo response
2019-07-27 19:56:30.212 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:56:30.212 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:56:30.474 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:30.474 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:56:30.474 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:56:30.711 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:30.870 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:56:30.870 +05:30 [DBG] End userinfo request
2019-07-27 19:56:30.893 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:56:30.893 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:56:30.893 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:56:30.893 +05:30 [DBG] Rendering check session result
2019-07-27 19:56:30.968 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:31.110 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:31.111 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:31.111 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:31.112 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:31.112 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:31.112 +05:30 [DBG] Start discovery request
2019-07-27 19:56:31.690 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:31.714 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:56:31.714 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:56:31.714 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:56:31.714 +05:30 [DBG] Rendering check session result
2019-07-27 19:56:48.506 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:48.588 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:48.588 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:48.588 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:48.588 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:48.588 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:48.588 +05:30 [DBG] Start discovery request
2019-07-27 19:56:49.122 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:49.144 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 19:56:49.144 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 19:56:49.144 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 19:56:49.144 +05:30 [DBG] Start authorize request
2019-07-27 19:56:49.181 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:56:49.181 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 19:56:49.722 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:49.722 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:49.856 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:50.298 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:56:50.433 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:50.857 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 19:56:50.857 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 19:56:50.858 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"da7821a84d1f4a769c92fd64cc319c5b","UiLocales":null,"Nonce":"754099d22cf943a89a7a19292f613206","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"da7821a84d1f4a769c92fd64cc319c5b","nonce":"754099d22cf943a89a7a19292f613206"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 19:56:50.915 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 19:56:50.915 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 19:56:50.915 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 19:56:50.916 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 19:56:51.089 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 19:56:51.089 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 19:56:51.094 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Gv7w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ZSDA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6S2:0000000F","TimeStamp":"2019-07-27T14:26:51.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 19:56:51.094 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"da7821a84d1f4a769c92fd64cc319c5b","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 19:56:53.017 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:53.062 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:53.063 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:53.063 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:53.064 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:53.064 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:53.064 +05:30 [DBG] Start discovery request
2019-07-27 19:56:53.443 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:53.478 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 19:56:53.526 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:53.526 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:53.526 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 19:56:53.527 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 19:56:53.527 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 19:56:53.527 +05:30 [DBG] Start key discovery request
2019-07-27 19:56:53.571 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:56:53.616 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:53.616 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:53.629 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 19:56:53.662 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:53.662 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:53.663 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 19:56:53.663 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 19:56:53.663 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 19:56:53.663 +05:30 [DBG] Start userinfo request
2019-07-27 19:56:53.663 +05:30 [DBG] Bearer token found in header
2019-07-27 19:56:54.232 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:54.232 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:54.755 +05:30 [DBG] angular_spa found in database: true
2019-07-27 19:56:54.756 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 19:56:54.805 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 19:56:54.805 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564237611,"exp":1564241211,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564237146,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 19:56:54.805 +05:30 [DBG] Creating userinfo response
2019-07-27 19:56:54.805 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:56:54.805 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:56:55.092 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:55.092 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 19:56:55.093 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 19:56:55.331 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 19:56:55.489 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 19:56:55.489 +05:30 [DBG] End userinfo request
2019-07-27 19:56:55.536 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:56:55.537 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:56:55.538 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:56:55.538 +05:30 [DBG] Rendering check session result
2019-07-27 19:56:55.615 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 19:56:55.671 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 19:56:55.672 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 19:56:55.672 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 19:56:55.672 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 19:56:55.672 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 19:56:55.672 +05:30 [DBG] Start discovery request
2019-07-27 19:56:56.259 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 19:56:56.279 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 19:56:56.301 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 19:56:56.301 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 19:56:56.301 +05:30 [DBG] Rendering check session result
2019-07-27 20:02:17.088 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:02:17.716 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:02:17.716 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:02:18.495 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:02:18.519 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:02:18.520 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:02:18.520 +05:30 [DBG] Start discovery request
2019-07-27 20:02:19.490 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:02:19.647 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:02:19.648 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:02:19.648 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:02:19.648 +05:30 [DBG] Rendering check session result
2019-07-27 20:02:23.206 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:02:23.266 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:02:23.267 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:02:23.267 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:02:23.268 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:02:23.268 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:02:23.268 +05:30 [DBG] Start discovery request
2019-07-27 20:02:23.672 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:02:23.900 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:02:23.900 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:02:23.900 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:02:23.900 +05:30 [DBG] Rendering check session result
2019-07-27 20:02:24.290 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:02:24.302 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:02:24.302 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:02:24.302 +05:30 [DBG] Start authorize request
2019-07-27 20:02:24.302 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:02:24.302 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:02:24.982 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:02:25.002 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:02:25.044 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"0a9ebbc94a044759a76772a6d2b56bf3","nonce":"084b216cd8b045b5851580fcbf5b0f09","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:02:25.045 +05:30 [ERR] Request validation failed
2019-07-27 20:02:25.045 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"0a9ebbc94a044759a76772a6d2b56bf3","nonce":"084b216cd8b045b5851580fcbf5b0f09","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:02:25.054 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S3:00000005","TimeStamp":"2019-07-27T14:32:25.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:07:27.663 +05:30 [INF] Removing 0 grants
2019-07-27 20:07:27.726 +05:30 [INF] Removing 0 device flow codes
2019-07-27 20:08:54.733 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:08:54.792 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:08:54.792 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:08:54.793 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:08:54.794 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:08:54.794 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:08:54.794 +05:30 [DBG] Start discovery request
2019-07-27 20:08:55.849 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:08:56.110 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:08:56.110 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:08:56.110 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:08:56.110 +05:30 [DBG] Rendering check session result
2019-07-27 20:08:56.274 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:08:56.275 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:08:56.275 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:08:56.275 +05:30 [DBG] Start authorize request
2019-07-27 20:08:56.275 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:08:56.275 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:08:56.760 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:08:56.760 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:08:56.761 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"7383b0bb795d472a9fb102ca78353311","nonce":"a1f54c2154db4889a402f2fc712ecd1b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:08:56.761 +05:30 [ERR] Request validation failed
2019-07-27 20:08:56.761 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"7383b0bb795d472a9fb102ca78353311","nonce":"a1f54c2154db4889a402f2fc712ecd1b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:08:56.762 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S4:00000003","TimeStamp":"2019-07-27T14:38:56.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:08:57.550 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:08:57.581 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:08:57.582 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:08:57.583 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:08:57.584 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:08:57.584 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:08:57.584 +05:30 [DBG] Start discovery request
2019-07-27 20:08:57.957 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:08:58.008 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:08:58.011 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:08:58.011 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:08:58.013 +05:30 [DBG] Start authorize request
2019-07-27 20:08:58.013 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:08:58.013 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:08:58.738 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:08:58.738 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:08:59.301 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:08:59.964 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:09:00.175 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:09:00.710 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:09:00.710 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 20:09:01.255 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"4d31c1cc2cf1412cb1a43ca3e62d8540","UiLocales":null,"Nonce":"784f268a40294e6382447d2444879dbb","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"4d31c1cc2cf1412cb1a43ca3e62d8540","nonce":"784f268a40294e6382447d2444879dbb"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:09:03.027 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 20:09:03.027 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 20:09:03.027 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 20:09:03.027 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:09:03.413 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 20:09:03.413 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 20:09:03.418 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****hxCg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DpDA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6S4:00000006","TimeStamp":"2019-07-27T14:39:03.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 20:09:03.419 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"4d31c1cc2cf1412cb1a43ca3e62d8540","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 20:09:05.413 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:09:05.448 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:09:05.448 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:09:05.448 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:09:05.449 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:09:05.449 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:09:05.449 +05:30 [DBG] Start discovery request
2019-07-27 20:09:05.865 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:09:05.876 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 20:09:05.919 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:09:05.919 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:09:05.920 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 20:09:05.921 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 20:09:05.921 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 20:09:05.921 +05:30 [DBG] Start key discovery request
2019-07-27 20:09:05.966 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 20:09:06.003 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:09:06.003 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:09:06.035 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 20:09:06.114 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:09:06.114 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:09:06.114 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 20:09:06.115 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 20:09:06.133 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 20:09:06.133 +05:30 [DBG] Start userinfo request
2019-07-27 20:09:06.133 +05:30 [DBG] Bearer token found in header
2019-07-27 20:09:06.891 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:09:06.891 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:09:07.736 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:09:07.736 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:09:07.794 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 20:09:07.795 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564238343,"exp":1564241943,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564237146,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 20:09:07.795 +05:30 [DBG] Creating userinfo response
2019-07-27 20:09:07.796 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:09:07.796 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:09:08.043 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:09:08.043 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 20:09:08.043 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:09:08.538 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:09:08.762 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 20:09:08.762 +05:30 [DBG] End userinfo request
2019-07-27 20:09:08.818 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:09:08.818 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:09:08.818 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:09:08.818 +05:30 [DBG] Rendering check session result
2019-07-27 20:09:08.882 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:09:08.920 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:09:08.920 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:09:08.920 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:09:08.921 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:09:08.922 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:09:08.922 +05:30 [DBG] Start discovery request
2019-07-27 20:09:09.539 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:09:09.571 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:09:09.572 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:09:09.573 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:09:09.573 +05:30 [DBG] Rendering check session result
2019-07-27 20:10:07.931 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:08.007 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:08.007 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:08.007 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:08.007 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:08.007 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:08.008 +05:30 [DBG] Start discovery request
2019-07-27 20:10:08.573 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:08.579 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:08.613 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:08.613 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:08.614 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:08.615 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:08.615 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:08.615 +05:30 [DBG] Start discovery request
2019-07-27 20:10:08.617 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:10:08.617 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:10:08.618 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:10:08.618 +05:30 [DBG] Rendering check session result
2019-07-27 20:10:08.885 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:10:08.887 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:10:08.887 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:10:08.887 +05:30 [DBG] Start authorize request
2019-07-27 20:10:08.887 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:10:08.887 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:10:09.295 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:09.480 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:10:09.481 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:10:09.481 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:10:09.481 +05:30 [DBG] Start authorize request
2019-07-27 20:10:09.481 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:10:09.481 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:10:10.197 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:10:10.197 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:10:10.198 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"47ef4f0f3895497cbcb467c7f231a1c0","nonce":"64d4391f131441a8ada920c2e9b461da","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:10:10.198 +05:30 [ERR] Request validation failed
2019-07-27 20:10:10.198 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"47ef4f0f3895497cbcb467c7f231a1c0","nonce":"64d4391f131441a8ada920c2e9b461da","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:10:10.199 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S5:00000002","TimeStamp":"2019-07-27T14:40:10.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:10:10.515 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:10:10.515 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:10:10.709 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:10:11.134 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:10:11.288 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:10:11.741 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:10:11.741 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 20:10:11.741 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"cae0e5e8f9b6476e9f3bc39c55552d44","UiLocales":null,"Nonce":"c15bfd74f0df4d78b8d62042c6087785","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"cae0e5e8f9b6476e9f3bc39c55552d44","nonce":"c15bfd74f0df4d78b8d62042c6087785"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:10:11.829 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 20:10:11.829 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 20:10:11.829 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 20:10:11.829 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:10:12.043 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 20:10:12.044 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 20:10:12.048 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lMNA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****z2pQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIHLFVP6S4:00000010","TimeStamp":"2019-07-27T14:40:12.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 20:10:12.048 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"cae0e5e8f9b6476e9f3bc39c55552d44","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 20:10:14.067 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:14.107 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:14.107 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:14.107 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:14.108 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:14.108 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:14.108 +05:30 [DBG] Start discovery request
2019-07-27 20:10:14.503 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:14.582 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 20:10:14.615 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:14.615 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:14.615 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 20:10:14.616 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 20:10:14.616 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 20:10:14.616 +05:30 [DBG] Start key discovery request
2019-07-27 20:10:14.656 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 20:10:14.687 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:14.687 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:14.704 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 20:10:14.741 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:14.741 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:14.742 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 20:10:14.743 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 20:10:14.743 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 20:10:14.743 +05:30 [DBG] Start userinfo request
2019-07-27 20:10:14.743 +05:30 [DBG] Bearer token found in header
2019-07-27 20:10:15.294 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:10:15.294 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:10:15.869 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:10:15.869 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:10:16.010 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 20:10:16.010 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564238412,"exp":1564242012,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564237146,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 20:10:16.011 +05:30 [DBG] Creating userinfo response
2019-07-27 20:10:16.011 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:10:16.011 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:10:16.377 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:10:16.377 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 20:10:16.378 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:10:16.643 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:10:16.804 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 20:10:16.804 +05:30 [DBG] End userinfo request
2019-07-27 20:10:16.890 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:10:16.890 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:10:16.890 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:10:16.890 +05:30 [DBG] Rendering check session result
2019-07-27 20:10:16.973 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:17.043 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:17.043 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:17.044 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:17.045 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:17.045 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:17.045 +05:30 [DBG] Start discovery request
2019-07-27 20:10:17.647 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:17.729 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:10:17.730 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:10:17.730 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:10:17.730 +05:30 [DBG] Rendering check session result
2019-07-27 20:10:20.518 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:20.566 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:20.566 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:20.567 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:20.569 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:20.570 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:20.570 +05:30 [DBG] Start discovery request
2019-07-27 20:10:21.074 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:21.138 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:10:21.138 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:10:21.138 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:10:21.138 +05:30 [DBG] Rendering check session result
2019-07-27 20:10:24.131 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:24.187 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:24.187 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:24.188 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:24.189 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:24.189 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:24.189 +05:30 [DBG] Start discovery request
2019-07-27 20:10:24.787 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:24.866 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:10:24.866 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:10:24.866 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:10:24.866 +05:30 [DBG] Rendering check session result
2019-07-27 20:10:27.277 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:10:27.327 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:10:27.327 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:10:27.328 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:10:27.328 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:10:27.328 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:10:27.328 +05:30 [DBG] Start discovery request
2019-07-27 20:10:27.832 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:10:28.075 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:10:28.075 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:10:28.075 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:10:28.075 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:02.236 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:02.305 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:02.305 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:02.306 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:02.306 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:02.306 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:02.306 +05:30 [DBG] Start discovery request
2019-07-27 20:13:02.980 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:03.040 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:03.040 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:03.040 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:03.040 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:03.755 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:03.795 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:03.795 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:03.795 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:03.795 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:03.795 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:03.795 +05:30 [DBG] Start discovery request
2019-07-27 20:13:04.399 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:04.763 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:04.763 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:04.763 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:04.764 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:04.956 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:13:04.956 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:13:04.956 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:13:04.956 +05:30 [DBG] Start authorize request
2019-07-27 20:13:04.956 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:13:04.957 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:13:06.036 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:13:06.036 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:13:06.036 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"579a9348b1ee482d8caca8ac188eae87","nonce":"8495cdd901b8492798d61d8a06203c97","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:13:06.037 +05:30 [ERR] Request validation failed
2019-07-27 20:13:06.037 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"579a9348b1ee482d8caca8ac188eae87","nonce":"8495cdd901b8492798d61d8a06203c97","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:13:06.038 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S6:00000005","TimeStamp":"2019-07-27T14:43:06.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:13:07.645 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:07.693 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:07.694 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:07.694 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:07.694 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:07.694 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:07.694 +05:30 [DBG] Start discovery request
2019-07-27 20:13:08.261 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:08.328 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:08.328 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:08.328 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:08.328 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:11.272 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:11.334 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:11.334 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:11.334 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:11.335 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:11.335 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:11.335 +05:30 [DBG] Start discovery request
2019-07-27 20:13:11.925 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:11.947 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:11.948 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:11.949 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:11.949 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:16.300 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:16.375 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:16.375 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:16.375 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:16.376 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:16.376 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:16.376 +05:30 [DBG] Start discovery request
2019-07-27 20:13:16.895 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:16.947 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:16.947 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:16.947 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:16.947 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:19.422 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:19.504 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:19.504 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:19.504 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:19.505 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:19.505 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:19.505 +05:30 [DBG] Start discovery request
2019-07-27 20:13:20.031 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:20.071 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:20.071 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:20.071 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:20.071 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:22.778 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:22.822 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:22.822 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:22.823 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:22.823 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:22.823 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:22.823 +05:30 [DBG] Start discovery request
2019-07-27 20:13:23.455 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:23.535 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:23.535 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:23.535 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:23.535 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:34.376 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:34.557 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:34.558 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:34.558 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:34.558 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:34.558 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:34.558 +05:30 [DBG] Start discovery request
2019-07-27 20:13:35.171 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:35.224 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:35.224 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:35.224 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:35.224 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:39.220 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:13:39.591 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:13:39.592 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:13:39.592 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:13:39.592 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:13:39.593 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:13:39.593 +05:30 [DBG] Start discovery request
2019-07-27 20:13:40.188 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:13:40.623 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:13:40.623 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:13:40.623 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:13:40.623 +05:30 [DBG] Rendering check session result
2019-07-27 20:13:40.917 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:13:40.918 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:13:40.918 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:13:40.918 +05:30 [DBG] Start authorize request
2019-07-27 20:13:40.918 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:13:40.918 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:13:41.447 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:13:41.447 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:13:41.447 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"a1c9176c0fb1407fa20dfdbc6ee96655","nonce":"d46fc189221043a8ba562bec04db2ed4","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:13:41.447 +05:30 [ERR] Request validation failed
2019-07-27 20:13:41.448 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"a1c9176c0fb1407fa20dfdbc6ee96655","nonce":"d46fc189221043a8ba562bec04db2ed4","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:13:41.448 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S6:00000015","TimeStamp":"2019-07-27T14:43:41.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:14:12.012 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:14:12.081 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:14:12.081 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:14:12.081 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:14:12.081 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:14:12.081 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:14:12.081 +05:30 [DBG] Start discovery request
2019-07-27 20:14:13.413 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:14:13.506 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:14:13.506 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:14:13.506 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:14:13.506 +05:30 [DBG] Rendering check session result
2019-07-27 20:14:15.846 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:14:15.890 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:14:15.890 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:14:15.890 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:14:15.890 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:14:15.890 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:14:15.891 +05:30 [DBG] Start discovery request
2019-07-27 20:14:16.477 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:14:17.161 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:14:17.162 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:14:17.162 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:14:17.162 +05:30 [DBG] Rendering check session result
2019-07-27 20:14:17.466 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:14:17.466 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:14:17.466 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:14:17.466 +05:30 [DBG] Start authorize request
2019-07-27 20:14:17.466 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:14:17.466 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:14:18.739 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:14:18.739 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:14:18.740 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"cd93193586f643c1a60f5e4e3a0846d8","nonce":"987aa031b5d54efe9a0db1a6937388a9","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:14:18.740 +05:30 [ERR] Request validation failed
2019-07-27 20:14:18.740 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"cd93193586f643c1a60f5e4e3a0846d8","nonce":"987aa031b5d54efe9a0db1a6937388a9","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:14:18.740 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6S6:0000001B","TimeStamp":"2019-07-27T14:44:18.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:14:19.747 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:14:19.830 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:14:19.830 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:14:19.831 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:14:19.831 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:14:19.831 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:14:19.831 +05:30 [DBG] Start discovery request
2019-07-27 20:14:20.423 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:14:20.475 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:14:20.475 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:14:20.475 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:14:20.475 +05:30 [DBG] Rendering check session result
2019-07-27 20:14:23.194 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:14:23.280 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:14:23.280 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:14:23.281 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:14:23.282 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:14:23.282 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:14:23.282 +05:30 [DBG] Start discovery request
2019-07-27 20:14:23.811 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:14:23.862 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:14:23.863 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:14:23.863 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:14:23.864 +05:30 [DBG] Rendering check session result
2019-07-27 20:14:26.347 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:14:26.433 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:14:26.433 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:14:26.433 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:14:26.433 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:14:26.433 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:14:26.433 +05:30 [DBG] Start discovery request
2019-07-27 20:14:27.035 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:14:27.088 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:14:27.088 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:14:27.088 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:14:27.089 +05:30 [DBG] Rendering check session result
2019-07-27 20:14:37.664 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:14:37.664 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:14:37.665 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:14:37.665 +05:30 [DBG] Start discovery request
2019-07-27 20:14:38.148 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:14:51.159 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 20:14:51.236 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 20:14:51.237 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 20:14:51.237 +05:30 [DBG] Processing signout request for anonymous
2019-07-27 20:14:51.237 +05:30 [DBG] Start end session request validation
2019-07-27 20:14:51.238 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{},"$type":"EndSessionRequestValidationLog"}
2019-07-27 20:14:51.238 +05:30 [DBG] Success validating end session request from null
2019-07-27 20:15:23.461 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:15:23.530 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:15:23.530 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:15:23.531 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:15:23.531 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:15:23.531 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:15:23.531 +05:30 [DBG] Start discovery request
2019-07-27 20:15:24.069 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:15:24.120 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:15:24.120 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:15:24.120 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:15:24.120 +05:30 [DBG] Rendering check session result
2019-07-27 20:15:28.709 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:15:28.798 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:15:28.798 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:15:28.799 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:15:28.799 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:15:28.799 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:15:28.799 +05:30 [DBG] Start discovery request
2019-07-27 20:15:29.447 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:15:29.607 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:15:29.608 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:15:29.608 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:15:29.608 +05:30 [DBG] Rendering check session result
2019-07-27 20:17:48.723 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:17:48.791 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:17:48.791 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:17:48.791 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:17:48.791 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:17:48.792 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:17:48.792 +05:30 [DBG] Start discovery request
2019-07-27 20:17:49.387 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:17:49.457 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:17:49.457 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:17:49.457 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:17:49.457 +05:30 [DBG] Rendering check session result
2019-07-27 20:17:50.291 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:17:50.327 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:17:50.327 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:17:50.327 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:17:50.327 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:17:50.327 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:17:50.328 +05:30 [DBG] Start discovery request
2019-07-27 20:17:51.381 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:17:52.269 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:17:52.270 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:17:52.270 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:17:52.270 +05:30 [DBG] Rendering check session result
2019-07-27 20:17:52.521 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:17:52.669 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:17:52.670 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:17:52.670 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:17:52.671 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:17:52.671 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:17:52.672 +05:30 [DBG] Start discovery request
2019-07-27 20:17:53.264 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:17:53.314 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:17:53.314 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:17:53.314 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:17:53.314 +05:30 [DBG] Rendering check session result
2019-07-27 20:17:53.898 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:17:53.900 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:17:53.900 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:17:53.900 +05:30 [DBG] Start authorize request
2019-07-27 20:17:53.900 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:17:53.900 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:17:55.237 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:17:55.237 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:17:55.238 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"5683321ffcbd416c869bd8c773f9285b","nonce":"b53af86f66f74db896164659b6897538","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:17:55.238 +05:30 [ERR] Request validation failed
2019-07-27 20:17:55.239 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"5683321ffcbd416c869bd8c773f9285b","nonce":"b53af86f66f74db896164659b6897538","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:17:55.240 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIHLFVP6SA:00000007","TimeStamp":"2019-07-27T14:47:55.0000000Z","ProcessId":15860,"LocalIpAddress":"127.0.0.1:11495","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:17:56.139 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:17:56.186 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:17:56.186 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:17:56.186 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:17:56.187 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:17:56.187 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:17:56.188 +05:30 [DBG] Start discovery request
2019-07-27 20:17:56.820 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:17:56.908 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:17:56.908 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:17:56.909 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:17:56.910 +05:30 [DBG] Rendering check session result
2019-07-27 20:44:58.560 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-27 20:44:59.022 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-27 20:44:59.022 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-27 20:44:59.022 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-27 20:44:59.022 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-27 20:44:59.022 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-27 20:44:59.022 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-27 20:45:06.017 +05:30 [DBG] Starting grant removal
2019-07-27 20:45:09.377 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:45:09.580 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:45:09.584 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:45:10.563 +05:30 [DBG] Login Url: /Account/Login
2019-07-27 20:45:10.563 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-27 20:45:10.563 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-27 20:45:10.563 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-27 20:45:10.563 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-27 20:45:10.563 +05:30 [DBG] Error Url: /home/error
2019-07-27 20:45:10.563 +05:30 [DBG] Error Id Parameter: errorId
2019-07-27 20:45:10.639 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:45:10.833 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:45:10.833 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:45:10.841 +05:30 [DBG] Start discovery request
2019-07-27 20:45:12.446 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:57:40.764 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-27 20:57:41.110 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-27 20:57:41.110 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-27 20:57:41.110 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-27 20:57:41.110 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-27 20:57:41.110 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-27 20:57:41.111 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-27 20:57:42.915 +05:30 [DBG] Starting grant removal
2019-07-27 20:57:43.911 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:57:43.911 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:57:43.911 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:57:44.772 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:57:44.778 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:57:44.782 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:57:44.782 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:57:44.810 +05:30 [DBG] Login Url: /Account/Login
2019-07-27 20:57:44.810 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-27 20:57:44.810 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-27 20:57:44.810 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-27 20:57:44.810 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-27 20:57:44.811 +05:30 [DBG] Error Url: /home/error
2019-07-27 20:57:44.811 +05:30 [DBG] Error Id Parameter: errorId
2019-07-27 20:57:44.910 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:57:44.910 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:57:44.921 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:57:44.921 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:57:44.921 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:57:45.197 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:57:45.197 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:57:45.197 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:57:45.197 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:57:45.197 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:57:45.197 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:57:45.230 +05:30 [DBG] Start discovery request
2019-07-27 20:57:45.230 +05:30 [DBG] Start discovery request
2019-07-27 20:57:45.230 +05:30 [DBG] Start discovery request
2019-07-27 20:57:51.967 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:57:51.967 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:57:51.967 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:57:52.794 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:57:52.831 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:57:52.831 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:57:52.832 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:57:52.832 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:57:52.832 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:57:52.832 +05:30 [DBG] Start discovery request
2019-07-27 20:57:53.634 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:57:54.019 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:57:54.065 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:57:54.065 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:57:54.065 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:57:54.066 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:57:54.066 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:57:54.066 +05:30 [DBG] Start discovery request
2019-07-27 20:57:55.012 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:57:57.954 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:57:57.954 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:57:57.954 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:57:57.954 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:57:57.956 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:57:57.956 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:57:57.957 +05:30 [DBG] Rendering check session result
2019-07-27 20:57:57.958 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:57:57.958 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:57:57.959 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:57:57.959 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:57:57.959 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:57:57.959 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:57:57.976 +05:30 [DBG] Start authorize request
2019-07-27 20:57:57.976 +05:30 [DBG] Start authorize request
2019-07-27 20:57:57.976 +05:30 [DBG] Start authorize request
2019-07-27 20:57:58.069 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:57:58.069 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:57:58.069 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:57:58.775 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:57:58.775 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:57:58.775 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:57:58.775 +05:30 [DBG] Start authorize request
2019-07-27 20:57:58.776 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:57:58.788 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:57:58.788 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:57:58.788 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:57:58.789 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:58:01.113 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:58:01.165 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:58:01.165 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:58:01.166 +05:30 [DBG] Start authorize request
2019-07-27 20:58:01.366 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:58:01.366 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:58:02.870 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:02.870 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:02.874 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:02.874 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:02.877 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:02.905 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:02.905 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:02.905 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:02.913 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:02.914 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:03.035 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"d9872b3f5b0c4e028ce093613db5572e","nonce":"3b0e9f6befb34cf1b0d467d5addfee82","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:03.048 +05:30 [ERR] Request validation failed
2019-07-27 20:58:03.049 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"d9872b3f5b0c4e028ce093613db5572e","nonce":"3b0e9f6befb34cf1b0d467d5addfee82","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:03.960 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIKRS1U82J:00000003","TimeStamp":"2019-07-27T15:28:03.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:58:03.963 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:03.966 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:03.970 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:03.981 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:05.962 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:05.966 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:06.026 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:06.026 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:06.683 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:06.678 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:06.854 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:06.934 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:08.343 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:08.463 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 20:58:08.464 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"5872b9b917e244fd8fcc01f1288fea48","UiLocales":null,"Nonce":"a5f3785fea594cda85edac7eacce880c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"5872b9b917e244fd8fcc01f1288fea48","nonce":"a5f3785fea594cda85edac7eacce880c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:08.538 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:08.538 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:08.538 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 20:58:08.538 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 20:58:08.538 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"25299050a50c47a193678490aa6fecb7","UiLocales":null,"Nonce":"097a96cc7d92442eb337bd2e92076614","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"25299050a50c47a193678490aa6fecb7","nonce":"097a96cc7d92442eb337bd2e92076614"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:08.538 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"3e84203261a74ec2b5c5e1efa871736e","UiLocales":null,"Nonce":"ce2e5cb57d224916907b2e7bc1fbb5f4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"3e84203261a74ec2b5c5e1efa871736e","nonce":"ce2e5cb57d224916907b2e7bc1fbb5f4"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:08.948 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 20:58:08.957 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 20:58:08.968 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 20:58:08.968 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 20:58:09.006 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 20:58:09.006 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 20:58:09.007 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:58:09.007 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:58:09.095 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 20:58:09.098 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 20:58:09.100 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 20:58:09.100 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:58:10.608 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 20:58:10.608 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 20:58:10.630 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"71b950038bc64f84a9316d50ff2d73f2","UiLocales":null,"Nonce":"dacbb30a09e148559f0eac3f958854e3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f01c62e652b9c598df04af04942398e9","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"71b950038bc64f84a9316d50ff2d73f2","nonce":"dacbb30a09e148559f0eac3f958854e3"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:10.631 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 20:58:10.631 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 20:58:10.631 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 20:58:10.631 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:58:11.596 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 20:58:11.596 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 20:58:11.596 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 20:58:11.596 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 20:58:11.596 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 20:58:11.597 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 20:58:11.596 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 20:58:11.599 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 20:58:11.633 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wkvw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_nSg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82L:00000006","TimeStamp":"2019-07-27T15:28:11.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 20:58:11.634 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****WcPw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_nSg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82K:00000002","TimeStamp":"2019-07-27T15:28:11.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 20:58:11.635 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Y_yQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_nSg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82I:00000006","TimeStamp":"2019-07-27T15:28:11.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 20:58:11.635 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9ZKQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_nSg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82M:00000003","TimeStamp":"2019-07-27T15:28:11.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 20:58:11.636 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"25299050a50c47a193678490aa6fecb7","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 20:58:11.636 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"3e84203261a74ec2b5c5e1efa871736e","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 20:58:11.636 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"71b950038bc64f84a9316d50ff2d73f2","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 20:58:11.636 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"5872b9b917e244fd8fcc01f1288fea48","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 20:58:24.877 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:58:24.934 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:24.935 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:24.935 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:58:24.935 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:58:24.935 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:58:24.935 +05:30 [DBG] Start discovery request
2019-07-27 20:58:25.377 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:58:25.475 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:58:25.556 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:25.556 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:25.557 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:58:25.557 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:58:25.557 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:58:25.557 +05:30 [DBG] Start discovery request
2019-07-27 20:58:25.557 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:58:25.557 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:58:25.557 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:58:25.614 +05:30 [DBG] Rendering check session result
2019-07-27 20:58:25.839 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 20:58:25.839 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 20:58:25.839 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 20:58:25.840 +05:30 [DBG] Start authorize request
2019-07-27 20:58:25.840 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 20:58:25.840 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 20:58:26.296 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:58:26.457 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 20:58:26.516 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:26.516 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:26.516 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 20:58:26.517 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 20:58:26.517 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 20:58:26.579 +05:30 [DBG] Start key discovery request
2019-07-27 20:58:26.644 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:26.644 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:26.645 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"0006c826bca74bf3ba496b7273410d76","nonce":"f6b12fac04a04014a1513ce7c5d1e528","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:26.646 +05:30 [ERR] Request validation failed
2019-07-27 20:58:26.646 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"0006c826bca74bf3ba496b7273410d76","nonce":"f6b12fac04a04014a1513ce7c5d1e528","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 20:58:26.647 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIKRS1U82L:00000007","TimeStamp":"2019-07-27T15:28:26.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 20:58:26.831 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 20:58:26.865 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:26.866 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:26.895 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 20:58:26.941 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:26.941 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:26.942 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 20:58:26.948 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 20:58:26.948 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 20:58:26.960 +05:30 [DBG] Start userinfo request
2019-07-27 20:58:26.968 +05:30 [DBG] Bearer token found in header
2019-07-27 20:58:27.698 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:27.699 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:28.280 +05:30 [DBG] angular_spa found in database: true
2019-07-27 20:58:28.280 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 20:58:28.364 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 20:58:28.367 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564241291,"exp":1564244891,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564237146,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 20:58:28.390 +05:30 [DBG] Creating userinfo response
2019-07-27 20:58:28.397 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:58:28.402 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:58:28.559 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:28.560 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 20:58:28.561 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 20:58:28.743 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 20:58:28.847 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 20:58:28.847 +05:30 [DBG] End userinfo request
2019-07-27 20:58:28.972 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:58:29.011 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:29.011 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:29.012 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:58:29.013 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:58:29.013 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:58:29.013 +05:30 [DBG] Start discovery request
2019-07-27 20:58:29.672 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:58:29.706 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:58:29.707 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:58:29.707 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:58:29.707 +05:30 [DBG] Rendering check session result
2019-07-27 20:58:33.659 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:58:33.699 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:33.700 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:33.700 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:58:33.701 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:58:33.701 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:58:33.701 +05:30 [DBG] Start discovery request
2019-07-27 20:58:34.287 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:58:34.333 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:58:34.333 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:58:34.333 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:58:34.333 +05:30 [DBG] Rendering check session result
2019-07-27 20:58:36.087 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 20:58:36.161 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 20:58:36.161 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 20:58:36.162 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 20:58:36.162 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 20:58:36.162 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 20:58:36.162 +05:30 [DBG] Start discovery request
2019-07-27 20:58:36.822 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 20:58:36.888 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 20:58:36.888 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 20:58:36.888 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 20:58:36.888 +05:30 [DBG] Rendering check session result
2019-07-27 21:00:34.042 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:00:35.500 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:00:35.500 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:00:35.568 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:00:35.569 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:00:35.569 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:00:35.569 +05:30 [DBG] Start discovery request
2019-07-27 21:00:36.067 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:00:36.104 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:00:36.105 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:00:36.105 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:00:36.105 +05:30 [DBG] Rendering check session result
2019-07-27 21:01:15.881 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:01:15.883 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:01:15.883 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:01:15.883 +05:30 [DBG] Start authorize request
2019-07-27 21:01:15.884 +05:30 [DBG] No user present in authorize request
2019-07-27 21:01:15.884 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:01:16.946 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:01:16.946 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:01:16.947 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/silent-refresh.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"99b6d41886b6465b9ae19670ef270836","nonce":"12d23f458d0e45f6975addf5815c97d0","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:01:16.947 +05:30 [ERR] Request validation failed
2019-07-27 21:01:16.948 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/silent-refresh.html","response_type":"id_token","scope":"openid","state":"99b6d41886b6465b9ae19670ef270836","nonce":"12d23f458d0e45f6975addf5815c97d0","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:01:16.949 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIKRS1U82N:00000003","TimeStamp":"2019-07-27T15:31:16.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-27 21:01:59.930 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:01:59.994 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:01:59.994 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:01:59.995 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:01:59.995 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:01:59.995 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:01:59.995 +05:30 [DBG] Start discovery request
2019-07-27 21:02:00.824 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:02:00.892 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:02:00.893 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:02:00.893 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:02:00.893 +05:30 [DBG] Start authorize request
2019-07-27 21:02:00.894 +05:30 [DBG] No user present in authorize request
2019-07-27 21:02:00.894 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:02:01.435 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:01.435 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:01.573 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:02.063 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:02.249 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:02.676 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:02.676 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:02:02.677 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ee9d9f88989240b1961f0bc20907116a","UiLocales":null,"Nonce":"67d5eace6d614e8cb70d052ded298b1c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"ee9d9f88989240b1961f0bc20907116a","nonce":"67d5eace6d614e8cb70d052ded298b1c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:02:02.677 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 21:02:02.906 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:02:03.789 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:03.789 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:04.001 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:04.632 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:04.845 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:05.402 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:05.402 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:02:06.217 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:06.217 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:26.317 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 21:02:26.737 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:02:27.415 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:27.415 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:27.608 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:28.182 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:28.411 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:28.890 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:28.896 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:02:29.343 +05:30 [DBG] Augmenting SignInContext
2019-07-27 21:02:29.346 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 21:02:29.346 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 21:02:29.346 +05:30 [DBG] Adding auth_time claim with value: 1564241549
2019-07-27 21:02:29.369 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 21:02:29.495 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIKRS1U82N:00000008","TimeStamp":"2019-07-27T15:32:29.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 21:02:30.117 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:30.117 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:30.202 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 21:02:30.204 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 21:02:30.204 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 21:02:30.215 +05:30 [DBG] Start authorize callback request
2019-07-27 21:02:30.231 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:02:30.231 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:02:30.710 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:30.710 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:30.837 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:31.189 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:31.364 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:31.790 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:31.790 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:02:31.791 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ee9d9f88989240b1961f0bc20907116a","UiLocales":null,"Nonce":"67d5eace6d614e8cb70d052ded298b1c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6c815d9fa223c45c2e84646e17302653","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"ee9d9f88989240b1961f0bc20907116a","nonce":"67d5eace6d614e8cb70d052ded298b1c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:02:31.835 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 21:02:31.835 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 21:02:31.835 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 21:02:31.835 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:02:31.984 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 21:02:31.984 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 21:02:31.989 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lXgA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****kwAw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82Q:00000002","TimeStamp":"2019-07-27T15:32:31.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 21:02:31.989 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"ee9d9f88989240b1961f0bc20907116a","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 21:02:32.005 +05:30 [DBG] Augmenting SignInContext
2019-07-27 21:02:32.006 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 21:02:33.783 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:02:33.812 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:33.812 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:33.812 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:02:33.813 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:02:33.813 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:02:33.813 +05:30 [DBG] Start discovery request
2019-07-27 21:02:34.202 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:02:34.231 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 21:02:34.256 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:34.256 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:34.257 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 21:02:34.258 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 21:02:34.258 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 21:02:34.258 +05:30 [DBG] Start key discovery request
2019-07-27 21:02:34.312 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:02:34.339 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:34.339 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:34.347 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:02:34.384 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:34.384 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:34.384 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 21:02:34.385 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 21:02:34.385 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 21:02:34.385 +05:30 [DBG] Start userinfo request
2019-07-27 21:02:34.385 +05:30 [DBG] Bearer token found in header
2019-07-27 21:02:35.026 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:35.027 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:35.511 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:35.511 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:35.553 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 21:02:35.553 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564241551,"exp":1564245151,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564241549,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 21:02:35.554 +05:30 [DBG] Creating userinfo response
2019-07-27 21:02:35.554 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:02:35.554 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:02:35.740 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:35.740 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 21:02:35.741 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:02:35.946 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:36.113 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 21:02:36.113 +05:30 [DBG] End userinfo request
2019-07-27 21:02:36.136 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:02:36.136 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:02:36.136 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:02:36.136 +05:30 [DBG] Rendering check session result
2019-07-27 21:02:36.248 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:02:36.302 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:36.303 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:36.303 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:02:36.304 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:02:36.304 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:02:36.304 +05:30 [DBG] Start discovery request
2019-07-27 21:02:36.852 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:02:36.891 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:02:36.892 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:02:36.892 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:02:36.892 +05:30 [DBG] Rendering check session result
2019-07-27 21:02:44.817 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:02:44.849 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:44.849 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:44.850 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:02:44.850 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:02:44.851 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:02:44.851 +05:30 [DBG] Start discovery request
2019-07-27 21:02:45.218 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:02:45.246 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:02:45.247 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:02:45.247 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:02:45.247 +05:30 [DBG] Start authorize request
2019-07-27 21:02:45.247 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:02:45.247 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:02:45.766 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:45.767 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:45.924 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:46.431 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:46.615 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:47.001 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:02:47.001 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:02:47.001 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"b27bcd875d0141c9a8870a143f2c2731","UiLocales":null,"Nonce":"91fa7911716d437a9803b00d4c1fbf56","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6c815d9fa223c45c2e84646e17302653","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"b27bcd875d0141c9a8870a143f2c2731","nonce":"91fa7911716d437a9803b00d4c1fbf56"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:02:47.061 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 21:02:47.062 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 21:02:47.062 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 21:02:47.062 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:02:47.201 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 21:02:47.202 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 21:02:47.207 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****1dwQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aFmQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82O:00000005","TimeStamp":"2019-07-27T15:32:47.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 21:02:47.207 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"b27bcd875d0141c9a8870a143f2c2731","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 21:02:48.545 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:02:48.577 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:48.577 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:48.577 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:02:48.578 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:02:48.578 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:02:48.578 +05:30 [DBG] Start discovery request
2019-07-27 21:02:48.992 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:02:49.011 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 21:02:49.039 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:49.039 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:49.039 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 21:02:49.040 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 21:02:49.040 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 21:02:49.040 +05:30 [DBG] Start key discovery request
2019-07-27 21:02:49.069 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:02:49.096 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:49.096 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:49.102 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:02:49.140 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:49.140 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:49.141 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 21:02:49.141 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 21:02:49.141 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 21:02:49.141 +05:30 [DBG] Start userinfo request
2019-07-27 21:02:49.141 +05:30 [DBG] Bearer token found in header
2019-07-27 21:02:49.672 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:49.672 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:50.274 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:02:50.274 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:02:50.351 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 21:02:50.351 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564241567,"exp":1564245167,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564241549,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 21:02:50.352 +05:30 [DBG] Creating userinfo response
2019-07-27 21:02:50.352 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:02:50.352 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:02:50.600 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:50.600 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 21:02:50.600 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:02:50.828 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:02:50.956 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 21:02:50.956 +05:30 [DBG] End userinfo request
2019-07-27 21:02:51.034 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:02:51.034 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:02:51.034 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:02:51.034 +05:30 [DBG] Rendering check session result
2019-07-27 21:02:51.165 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:02:51.238 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:02:51.239 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:02:51.239 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:02:51.240 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:02:51.240 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:02:51.240 +05:30 [DBG] Start discovery request
2019-07-27 21:02:51.729 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:02:51.778 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:02:51.779 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:02:51.779 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:02:51.779 +05:30 [DBG] Rendering check session result
2019-07-27 21:04:53.656 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:04:53.971 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:04:53.971 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:04:53.972 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:04:53.972 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:04:53.972 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:04:53.972 +05:30 [DBG] Start discovery request
2019-07-27 21:04:54.655 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:04:54.717 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:04:54.717 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:04:54.717 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:04:54.717 +05:30 [DBG] Rendering check session result
2019-07-27 21:05:13.328 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:05:13.411 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:05:13.411 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:05:13.412 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:05:13.412 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:05:13.412 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:05:13.412 +05:30 [DBG] Start discovery request
2019-07-27 21:05:13.968 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:05:14.022 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:05:14.022 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:05:14.022 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:05:14.022 +05:30 [DBG] Rendering check session result
2019-07-27 21:06:14.340 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:06:14.398 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:06:14.398 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:06:14.398 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:06:14.399 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:06:14.399 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:06:14.399 +05:30 [DBG] Start discovery request
2019-07-27 21:06:14.766 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:06:14.793 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:06:14.794 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:06:14.794 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:06:14.794 +05:30 [DBG] Start authorize request
2019-07-27 21:06:14.795 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:06:14.795 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:06:15.297 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:06:15.298 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:06:15.521 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:06:16.018 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:06:16.180 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:06:16.580 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:06:16.580 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:06:16.581 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"45c411933e024f6982edc0ec74773188","UiLocales":null,"Nonce":"a344564536d64feb8f5a57fa80e517d6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6c815d9fa223c45c2e84646e17302653","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"45c411933e024f6982edc0ec74773188","nonce":"a344564536d64feb8f5a57fa80e517d6"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:06:16.740 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 21:06:16.740 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 21:06:16.740 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 21:06:16.741 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:06:16.922 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 21:06:16.922 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 21:06:16.927 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****4euw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DOGA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82S:00000002","TimeStamp":"2019-07-27T15:36:16.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 21:06:16.927 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"45c411933e024f6982edc0ec74773188","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 21:06:18.659 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:06:18.694 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:06:18.694 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:06:18.695 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:06:18.695 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:06:18.696 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:06:18.696 +05:30 [DBG] Start discovery request
2019-07-27 21:06:19.391 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:06:19.403 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 21:06:19.430 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:06:19.431 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:06:19.431 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 21:06:19.432 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 21:06:19.432 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 21:06:19.432 +05:30 [DBG] Start key discovery request
2019-07-27 21:06:19.491 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:06:19.547 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:06:19.547 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:06:19.564 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:06:19.607 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:06:19.607 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:06:19.608 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 21:06:19.609 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 21:06:19.609 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 21:06:19.609 +05:30 [DBG] Start userinfo request
2019-07-27 21:06:19.609 +05:30 [DBG] Bearer token found in header
2019-07-27 21:06:20.524 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:06:20.524 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:06:21.134 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:06:21.135 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:06:21.189 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 21:06:21.189 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564241776,"exp":1564245376,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564241549,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 21:06:21.190 +05:30 [DBG] Creating userinfo response
2019-07-27 21:06:21.190 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:06:21.190 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:06:21.442 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:06:21.442 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 21:06:21.443 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:06:21.819 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:06:22.017 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 21:06:22.017 +05:30 [DBG] End userinfo request
2019-07-27 21:06:22.045 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:06:22.046 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:06:22.046 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:06:22.046 +05:30 [DBG] Rendering check session result
2019-07-27 21:06:22.188 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:06:22.294 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:06:22.295 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:06:22.295 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:06:22.296 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:06:22.296 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:06:22.297 +05:30 [DBG] Start discovery request
2019-07-27 21:06:23.127 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:06:23.189 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:06:23.189 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:06:23.189 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:06:23.189 +05:30 [DBG] Rendering check session result
2019-07-27 21:08:17.867 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:08:17.940 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:08:17.940 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:08:17.940 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:08:17.941 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:08:17.941 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:08:17.941 +05:30 [DBG] Start discovery request
2019-07-27 21:08:18.319 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:08:18.399 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:08:18.400 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:08:18.401 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:08:18.403 +05:30 [DBG] Start authorize request
2019-07-27 21:08:18.403 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:08:18.403 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:08:18.953 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:08:18.953 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:08:19.117 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:08:19.526 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:08:19.667 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:08:20.035 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:08:20.035 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:08:20.035 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1002635ab9724fcb832fc24172391b6c","UiLocales":null,"Nonce":"37d730ba88114c7e85a350b2b6a1fc86","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6c815d9fa223c45c2e84646e17302653","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"1002635ab9724fcb832fc24172391b6c","nonce":"37d730ba88114c7e85a350b2b6a1fc86"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:08:20.082 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 21:08:20.082 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 21:08:20.082 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 21:08:20.082 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:08:20.252 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 21:08:20.252 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 21:08:20.257 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****XC6A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****a-KQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U82T:00000002","TimeStamp":"2019-07-27T15:38:20.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 21:08:20.257 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"1002635ab9724fcb832fc24172391b6c","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 21:08:22.027 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:08:22.079 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:08:22.079 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:08:22.080 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:08:22.080 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:08:22.080 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:08:22.080 +05:30 [DBG] Start discovery request
2019-07-27 21:08:22.535 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:08:22.566 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 21:08:22.598 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:08:22.598 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:08:22.599 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 21:08:22.599 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 21:08:22.600 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 21:08:22.600 +05:30 [DBG] Start key discovery request
2019-07-27 21:08:22.711 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:08:22.775 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:08:22.775 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:08:22.804 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:08:22.842 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:08:22.842 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:08:22.842 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 21:08:22.843 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 21:08:22.843 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 21:08:22.843 +05:30 [DBG] Start userinfo request
2019-07-27 21:08:22.843 +05:30 [DBG] Bearer token found in header
2019-07-27 21:08:23.412 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:08:23.413 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:08:23.940 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:08:23.940 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:08:24.011 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 21:08:24.012 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564241900,"exp":1564245500,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564241549,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 21:08:24.012 +05:30 [DBG] Creating userinfo response
2019-07-27 21:08:24.012 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:08:24.012 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:08:24.334 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:08:24.335 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 21:08:24.335 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:08:24.575 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:08:24.735 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 21:08:24.735 +05:30 [DBG] End userinfo request
2019-07-27 21:08:24.821 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:08:24.822 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:08:24.822 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:08:24.822 +05:30 [DBG] Rendering check session result
2019-07-27 21:08:24.849 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:08:24.898 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:08:24.898 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:08:24.899 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:08:24.899 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:08:24.899 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:08:24.899 +05:30 [DBG] Start discovery request
2019-07-27 21:08:25.638 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:08:25.675 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:08:25.676 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:08:25.676 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:08:25.676 +05:30 [DBG] Rendering check session result
2019-07-27 21:12:16.553 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:12:16.587 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:12:16.587 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:12:16.587 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:12:16.588 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:12:16.588 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:12:16.588 +05:30 [DBG] Start discovery request
2019-07-27 21:12:16.951 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:12:17.011 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:12:17.013 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:12:17.014 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:12:17.014 +05:30 [DBG] Start authorize request
2019-07-27 21:12:17.014 +05:30 [DBG] No user present in authorize request
2019-07-27 21:12:17.014 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:12:17.551 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:17.551 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:17.690 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:18.110 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:18.258 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:18.728 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:18.728 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:12:18.729 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"dc48c3e7840e4fb0b9ae79e6078f6348","UiLocales":null,"Nonce":"4c4ea05e35c542b58fbd3b06a08a915e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"dc48c3e7840e4fb0b9ae79e6078f6348","nonce":"4c4ea05e35c542b58fbd3b06a08a915e"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:12:18.729 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 21:12:18.901 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:12:19.588 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:19.588 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:19.796 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:20.388 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:20.586 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:21.320 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:21.320 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:12:22.060 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:22.060 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:38.918 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 21:12:39.059 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:12:39.778 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:39.778 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:39.960 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:40.403 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:40.562 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:40.891 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:40.892 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:12:41.240 +05:30 [DBG] Augmenting SignInContext
2019-07-27 21:12:41.240 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 21:12:41.240 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 21:12:41.240 +05:30 [DBG] Adding auth_time claim with value: 1564242161
2019-07-27 21:12:41.241 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 21:12:41.306 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIKRS1U82U:00000005","TimeStamp":"2019-07-27T15:42:41.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 21:12:41.950 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:41.950 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:42.063 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 21:12:42.064 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 21:12:42.064 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 21:12:42.064 +05:30 [DBG] Start authorize callback request
2019-07-27 21:12:42.064 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:12:42.064 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:12:42.597 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:42.597 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:42.737 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:42.989 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:43.093 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:43.333 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:12:43.334 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:12:43.340 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"dc48c3e7840e4fb0b9ae79e6078f6348","UiLocales":null,"Nonce":"4c4ea05e35c542b58fbd3b06a08a915e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6b87afc7a2488dfd0f6d2e18f5bad536","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"dc48c3e7840e4fb0b9ae79e6078f6348","nonce":"4c4ea05e35c542b58fbd3b06a08a915e"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:12:43.402 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 21:12:43.404 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 21:12:43.407 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 21:12:43.407 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:12:43.547 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 21:12:43.547 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 21:12:43.553 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-qEQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****jTtA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U830:00000002","TimeStamp":"2019-07-27T15:42:43.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 21:12:43.553 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"dc48c3e7840e4fb0b9ae79e6078f6348","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 21:12:43.553 +05:30 [DBG] Augmenting SignInContext
2019-07-27 21:12:43.554 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 21:12:46.302 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:12:46.372 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:12:46.372 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:12:46.373 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:12:46.373 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:12:46.374 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:12:46.374 +05:30 [DBG] Start discovery request
2019-07-27 21:12:46.781 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:12:46.809 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 21:12:46.874 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:12:46.874 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:12:46.875 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 21:12:46.875 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 21:12:46.875 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 21:12:46.876 +05:30 [DBG] Start key discovery request
2019-07-27 21:12:46.957 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:12:46.989 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:12:46.989 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:12:47.017 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:12:47.072 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:12:47.072 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:12:47.073 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 21:12:47.085 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 21:12:47.086 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 21:12:47.086 +05:30 [DBG] Start userinfo request
2019-07-27 21:12:47.086 +05:30 [DBG] Bearer token found in header
2019-07-27 21:12:47.577 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:47.578 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:48.587 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:12:48.588 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:12:48.643 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 21:12:48.644 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564242163,"exp":1564245763,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564242161,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 21:12:48.644 +05:30 [DBG] Creating userinfo response
2019-07-27 21:12:48.644 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:12:48.644 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:12:48.894 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:48.894 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 21:12:48.894 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:12:49.181 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:12:49.340 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 21:12:49.340 +05:30 [DBG] End userinfo request
2019-07-27 21:12:49.361 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:12:49.361 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:12:49.362 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:12:49.362 +05:30 [DBG] Rendering check session result
2019-07-27 21:12:49.496 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:12:49.535 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:12:49.535 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:12:49.535 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:12:49.537 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:12:49.537 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:12:49.537 +05:30 [DBG] Start discovery request
2019-07-27 21:12:50.243 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:12:50.277 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:12:50.277 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:12:50.277 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:12:50.277 +05:30 [DBG] Rendering check session result
2019-07-27 21:16:28.081 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:16:28.116 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:16:28.117 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:16:28.117 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:16:28.117 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:16:28.117 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:16:28.117 +05:30 [DBG] Start discovery request
2019-07-27 21:16:28.451 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:16:28.520 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 21:16:28.520 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 21:16:28.520 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 21:16:28.520 +05:30 [DBG] Start authorize request
2019-07-27 21:16:28.521 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:16:28.521 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 21:16:29.088 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:16:29.088 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:16:29.244 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:16:29.693 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:16:29.842 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:16:30.287 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 21:16:30.287 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 21:16:30.288 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/auth-callback"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"f4ffe0db78af401ea0ca05eea1a30f7f","UiLocales":null,"Nonce":"a304d2687aa84561b23d7d821adf545f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6b87afc7a2488dfd0f6d2e18f5bad536","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile email API1","state":"f4ffe0db78af401ea0ca05eea1a30f7f","nonce":"a304d2687aa84561b23d7d821adf545f"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 21:16:30.345 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 21:16:30.345 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 21:16:30.345 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 21:16:30.345 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 21:16:30.479 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 21:16:30.479 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 21:16:30.484 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/auth-callback","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uqug","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cFXg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIKRS1U832:00000002","TimeStamp":"2019-07-27T15:46:30.0000000Z","ProcessId":9932,"LocalIpAddress":"127.0.0.1:18372","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 21:16:30.484 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/auth-callback","State":"f4ffe0db78af401ea0ca05eea1a30f7f","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 21:16:32.660 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:16:32.690 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:16:32.690 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:16:32.691 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:16:32.691 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:16:32.691 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:16:32.692 +05:30 [DBG] Start discovery request
2019-07-27 21:16:33.088 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:16:33.105 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 21:16:33.137 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:16:33.137 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:16:33.137 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 21:16:33.138 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 21:16:33.138 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 21:16:33.138 +05:30 [DBG] Start key discovery request
2019-07-27 21:16:33.170 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:16:33.202 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:16:33.202 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:16:33.230 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 21:16:33.260 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:16:33.260 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:16:33.261 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 21:16:33.262 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 21:16:33.262 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 21:16:33.262 +05:30 [DBG] Start userinfo request
2019-07-27 21:16:33.262 +05:30 [DBG] Bearer token found in header
2019-07-27 21:16:33.970 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:16:33.971 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:16:34.520 +05:30 [DBG] angular_spa found in database: true
2019-07-27 21:16:34.520 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 21:16:34.587 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 21:16:34.587 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564242390,"exp":1564245990,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564242161,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 21:16:34.587 +05:30 [DBG] Creating userinfo response
2019-07-27 21:16:34.588 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:16:34.588 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:16:34.823 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:16:34.823 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 21:16:34.824 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 21:16:35.077 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 21:16:35.295 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 21:16:35.295 +05:30 [DBG] End userinfo request
2019-07-27 21:16:35.355 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:16:35.356 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:16:35.356 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:16:35.356 +05:30 [DBG] Rendering check session result
2019-07-27 21:16:35.503 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 21:16:35.571 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 21:16:35.571 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 21:16:35.572 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 21:16:35.573 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 21:16:35.573 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 21:16:35.573 +05:30 [DBG] Start discovery request
2019-07-27 21:16:36.184 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 21:16:36.251 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 21:16:36.251 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 21:16:36.251 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 21:16:36.251 +05:30 [DBG] Rendering check session result
2019-07-27 22:16:22.710 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-27 22:16:22.909 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-27 22:16:22.909 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-27 22:16:22.909 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-27 22:16:22.909 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-27 22:16:22.910 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-27 22:16:22.910 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-27 22:16:23.756 +05:30 [DBG] Starting grant removal
2019-07-27 22:16:24.320 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:16:24.428 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:16:24.432 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:16:24.561 +05:30 [DBG] Login Url: /Account/Login
2019-07-27 22:16:24.561 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-27 22:16:24.561 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-27 22:16:24.561 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-27 22:16:24.561 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-27 22:16:24.561 +05:30 [DBG] Error Url: /home/error
2019-07-27 22:16:24.561 +05:30 [DBG] Error Id Parameter: errorId
2019-07-27 22:16:24.600 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:16:24.640 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:16:24.640 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:16:24.656 +05:30 [DBG] Start discovery request
2019-07-27 22:16:25.612 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:33:20.689 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-27 22:33:21.199 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-27 22:33:21.199 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-27 22:33:21.200 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-27 22:33:21.200 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-27 22:33:21.200 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-27 22:33:21.200 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-27 22:33:23.382 +05:30 [DBG] Starting grant removal
2019-07-27 22:33:25.123 +05:30 [DBG] Login Url: /Account/Login
2019-07-27 22:33:25.128 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-27 22:33:25.128 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-27 22:33:25.128 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-27 22:33:25.128 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-27 22:33:25.128 +05:30 [DBG] Error Url: /home/error
2019-07-27 22:33:25.128 +05:30 [DBG] Error Id Parameter: errorId
2019-07-27 22:33:40.585 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:33:41.847 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:33:41.853 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:33:41.856 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:33:42.210 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:33:42.210 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:33:42.219 +05:30 [DBG] Start discovery request
2019-07-27 22:33:45.136 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:33:48.325 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 22:33:48.325 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 22:33:48.326 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 22:33:48.330 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 22:33:48.330 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 22:33:48.330 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 22:33:48.330 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 22:33:48.330 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 22:33:48.330 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 22:33:48.336 +05:30 [DBG] Start authorize request
2019-07-27 22:33:48.336 +05:30 [DBG] Start authorize request
2019-07-27 22:33:48.336 +05:30 [DBG] Start authorize request
2019-07-27 22:33:48.501 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:33:48.501 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:33:48.501 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:33:48.746 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:33:48.746 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:33:48.746 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:33:52.462 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:33:52.462 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:33:52.462 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:33:52.536 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:33:52.536 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:33:52.536 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:33:53.389 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:33:53.389 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:33:53.427 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:33:54.858 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:33:54.858 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:33:55.611 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:33:55.618 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:33:56.665 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:33:57.389 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:33:57.398 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:33:57.405 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:33:57.405 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:33:57.508 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:33:57.640 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c3ebe8009f60423cad6191fe4916ca0f","UiLocales":null,"Nonce":"a2b1fcdad7b546c680b8feb8f68bbadc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6b87afc7a2488dfd0f6d2e18f5bad536","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c3ebe8009f60423cad6191fe4916ca0f","nonce":"a2b1fcdad7b546c680b8feb8f68bbadc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:33:57.640 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"4134af149b7f49b7b2a28cb44bbdb31a","UiLocales":null,"Nonce":"d37d920f265545a6bccec876444c5d8f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6b87afc7a2488dfd0f6d2e18f5bad536","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"4134af149b7f49b7b2a28cb44bbdb31a","nonce":"d37d920f265545a6bccec876444c5d8f"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:33:57.966 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 22:33:57.966 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 22:33:57.978 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 22:33:57.978 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 22:33:57.999 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 22:33:58.000 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 22:33:58.000 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:33:58.000 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:33:58.626 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:33:58.626 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:33:58.626 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"21b658942a164f2fa4cc737388553bee","UiLocales":null,"Nonce":"56ccf919870c41f39e67f19cc830929f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6b87afc7a2488dfd0f6d2e18f5bad536","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"21b658942a164f2fa4cc737388553bee","nonce":"56ccf919870c41f39e67f19cc830929f"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:33:58.627 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 22:33:58.627 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 22:33:58.627 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 22:33:58.627 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:33:59.381 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 22:33:59.381 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 22:33:59.381 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 22:33:59.381 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 22:33:59.381 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 22:33:59.381 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 22:33:59.456 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****It9Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****M8SA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIMHAQB94A:00000002","TimeStamp":"2019-07-27T17:03:59.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 22:33:59.456 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BUsQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****M8SA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIMHAQB949:00000002","TimeStamp":"2019-07-27T17:03:59.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 22:33:59.456 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BmRw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****M8SA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIMHAQB947:00000004","TimeStamp":"2019-07-27T17:03:59.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 22:33:59.459 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"21b658942a164f2fa4cc737388553bee","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 22:33:59.459 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"c3ebe8009f60423cad6191fe4916ca0f","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 22:33:59.459 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"4134af149b7f49b7b2a28cb44bbdb31a","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 22:34:01.657 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:34:01.698 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:34:01.698 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:34:01.699 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:34:01.700 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:34:01.700 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:34:01.701 +05:30 [DBG] Start discovery request
2019-07-27 22:34:02.139 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:34:02.201 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 22:34:02.231 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:34:02.232 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:34:02.232 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 22:34:02.233 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 22:34:02.233 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 22:34:02.238 +05:30 [DBG] Start key discovery request
2019-07-27 22:34:02.446 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:34:02.472 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:34:02.472 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:34:02.565 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:34:02.598 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:34:02.599 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:34:02.599 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:34:02.602 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:34:02.602 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:34:02.613 +05:30 [DBG] Start userinfo request
2019-07-27 22:34:02.618 +05:30 [DBG] Bearer token found in header
2019-07-27 22:34:03.305 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:03.305 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:03.944 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:03.944 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:04.080 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:34:04.088 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247038,"exp":1564250638,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564242161,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:34:04.107 +05:30 [DBG] Creating userinfo response
2019-07-27 22:34:04.114 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:34:04.119 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:34:04.277 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:04.279 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:34:04.279 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:34:04.389 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:04.511 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:34:04.511 +05:30 [DBG] End userinfo request
2019-07-27 22:34:05.181 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:34:05.182 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:34:05.182 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:34:05.183 +05:30 [DBG] Rendering check session result
2019-07-27 22:34:06.714 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:34:06.751 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:34:06.751 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:34:06.751 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:34:06.752 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:34:06.752 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:34:06.752 +05:30 [DBG] Start discovery request
2019-07-27 22:34:07.172 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:34:07.211 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:34:07.212 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:34:07.212 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:34:07.213 +05:30 [DBG] Rendering check session result
2019-07-27 22:34:16.463 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 22:34:16.464 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 22:34:16.464 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 22:34:16.509 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:34:16.518 +05:30 [DBG] Start end session request validation
2019-07-27 22:34:16.529 +05:30 [DBG] Start identity token validation
2019-07-27 22:34:17.080 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:17.080 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:17.080 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-27 22:34:17.177 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:34:17.178 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247039,"exp":1564247339,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"56ccf919870c41f39e67f19cc830929f","iat":1564247039,"at_hash":"Uqjzz5v2-Q-aRQSEJolwTQ","sid":"6b87afc7a2488dfd0f6d2e18f5bad536","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564242161,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:34:17.189 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 22:34:17.191 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-27 22:34:17.801 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-27 22:34:17.802 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-27 22:34:17.804 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-27 22:34:17.805 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIMHAQB948:00000007","TimeStamp":"2019-07-27T17:04:17.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-27 22:34:19.273 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-27 22:34:19.275 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-27 22:34:19.276 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-27 22:34:19.292 +05:30 [DBG] Processing signout callback request
2019-07-27 22:34:20.341 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:20.341 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:20.341 +05:30 [DBG] No client front-channel logout URLs
2019-07-27 22:34:20.341 +05:30 [DBG] No client back-channel logout URLs
2019-07-27 22:34:20.341 +05:30 [INF] Successful signout callback.
2019-07-27 22:34:20.341 +05:30 [DBG] No client front-channel iframe urls
2019-07-27 22:34:20.341 +05:30 [DBG] No client back-channel iframe urls
2019-07-27 22:34:28.842 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:34:28.884 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:34:28.884 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:34:28.884 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:34:28.884 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:34:28.884 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:34:28.884 +05:30 [DBG] Start discovery request
2019-07-27 22:34:29.257 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:34:29.485 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 22:34:29.486 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 22:34:29.486 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 22:34:29.486 +05:30 [DBG] Start authorize request
2019-07-27 22:34:29.487 +05:30 [DBG] No user present in authorize request
2019-07-27 22:34:29.487 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:34:29.989 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:29.989 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:30.138 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:30.507 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:30.617 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:30.863 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:30.864 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:34:30.864 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c09a38bbc63847138c036af8f48b4a75","UiLocales":null,"Nonce":"e1ccdde34e0e4ce9a2dbdf0e9bf92bf5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c09a38bbc63847138c036af8f48b4a75","nonce":"e1ccdde34e0e4ce9a2dbdf0e9bf92bf5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:34:30.864 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 22:34:31.705 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:34:32.640 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:32.640 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:32.790 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:33.127 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:33.306 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:33.736 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:33.736 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:34:34.264 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:34.264 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:55.220 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 22:34:55.412 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:34:56.060 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:56.060 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:56.222 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:56.678 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:56.852 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:57.218 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:57.218 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:34:57.671 +05:30 [DBG] Augmenting SignInContext
2019-07-27 22:34:57.674 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 22:34:57.674 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 22:34:57.674 +05:30 [DBG] Adding auth_time claim with value: 1564247097
2019-07-27 22:34:57.684 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 22:34:57.840 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIMHAQB947:00000009","TimeStamp":"2019-07-27T17:04:57.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 22:34:58.532 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:58.532 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:58.613 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 22:34:58.615 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 22:34:58.615 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 22:34:58.627 +05:30 [DBG] Start authorize callback request
2019-07-27 22:34:58.635 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:34:58.635 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:34:59.031 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:34:59.031 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:34:59.129 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:59.349 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:59.489 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:34:59.743 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:34:59.743 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:34:59.743 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c09a38bbc63847138c036af8f48b4a75","UiLocales":null,"Nonce":"e1ccdde34e0e4ce9a2dbdf0e9bf92bf5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d1ccdec895a5cbd758806409e6c3b5f7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c09a38bbc63847138c036af8f48b4a75","nonce":"e1ccdde34e0e4ce9a2dbdf0e9bf92bf5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:34:59.826 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 22:34:59.826 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 22:34:59.826 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 22:34:59.826 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:34:59.961 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 22:34:59.961 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 22:34:59.965 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****s7QQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qQSg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIMHAQB94A:00000007","TimeStamp":"2019-07-27T17:04:59.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 22:34:59.966 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"c09a38bbc63847138c036af8f48b4a75","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 22:34:59.976 +05:30 [DBG] Augmenting SignInContext
2019-07-27 22:34:59.976 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 22:35:00.149 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:35:00.176 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:00.176 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:00.177 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:35:00.177 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:35:00.177 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:35:00.178 +05:30 [DBG] Start discovery request
2019-07-27 22:35:00.502 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:35:00.629 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 22:35:00.666 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:00.667 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:00.667 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 22:35:00.667 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 22:35:00.667 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 22:35:00.667 +05:30 [DBG] Start key discovery request
2019-07-27 22:35:00.720 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:00.764 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:00.764 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:00.772 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:00.796 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:00.796 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:00.796 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:00.796 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:00.796 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:00.797 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:00.797 +05:30 [DBG] Bearer token found in header
2019-07-27 22:35:01.271 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:01.271 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:01.743 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:01.743 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:01.797 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:35:01.797 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247099,"exp":1564250699,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564247097,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:35:01.798 +05:30 [DBG] Creating userinfo response
2019-07-27 22:35:01.798 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:35:01.798 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:35:02.030 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:02.031 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:35:02.031 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:35:02.247 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:02.406 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:35:02.406 +05:30 [DBG] End userinfo request
2019-07-27 22:35:02.431 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:35:02.431 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:35:02.431 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:35:02.431 +05:30 [DBG] Rendering check session result
2019-07-27 22:35:03.234 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:35:03.279 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:03.279 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:03.280 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:35:03.280 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:35:03.280 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:35:03.280 +05:30 [DBG] Start discovery request
2019-07-27 22:35:03.650 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:35:03.722 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:35:03.722 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:35:03.722 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:35:03.722 +05:30 [DBG] Rendering check session result
2019-07-27 22:35:10.574 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:10.608 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:10.608 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:10.614 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:10.646 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:10.646 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:10.646 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:10.646 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:10.646 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:10.646 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:10.646 +05:30 [DBG] Bearer token found in header
2019-07-27 22:35:11.143 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:11.144 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:11.616 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:11.616 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:11.662 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:35:11.662 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247099,"exp":1564250699,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564247097,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:35:11.662 +05:30 [DBG] Creating userinfo response
2019-07-27 22:35:11.662 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:35:11.662 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:35:11.876 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:11.876 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:35:11.876 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:35:12.064 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:12.228 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:35:12.228 +05:30 [DBG] End userinfo request
2019-07-27 22:35:20.709 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 22:35:20.711 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 22:35:20.711 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 22:35:20.712 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:35:20.715 +05:30 [DBG] Start end session request validation
2019-07-27 22:35:20.715 +05:30 [DBG] Start identity token validation
2019-07-27 22:35:21.149 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:21.149 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:21.149 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-27 22:35:21.196 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:35:21.196 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247099,"exp":1564247399,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"e1ccdde34e0e4ce9a2dbdf0e9bf92bf5","iat":1564247099,"at_hash":"j3FxrFVzy1TjZFUhmQ6d3w","sid":"d1ccdec895a5cbd758806409e6c3b5f7","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564247097,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:35:21.196 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 22:35:21.196 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-27 22:35:21.830 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-27 22:35:21.831 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-27 22:35:21.831 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-27 22:35:21.831 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIMHAQB947:0000000C","TimeStamp":"2019-07-27T17:05:21.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-27 22:35:22.926 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-27 22:35:22.927 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-27 22:35:22.928 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-27 22:35:22.928 +05:30 [DBG] Processing signout callback request
2019-07-27 22:35:23.387 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:23.387 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:23.387 +05:30 [DBG] No client front-channel logout URLs
2019-07-27 22:35:23.387 +05:30 [DBG] No client back-channel logout URLs
2019-07-27 22:35:23.387 +05:30 [INF] Successful signout callback.
2019-07-27 22:35:23.387 +05:30 [DBG] No client front-channel iframe urls
2019-07-27 22:35:23.387 +05:30 [DBG] No client back-channel iframe urls
2019-07-27 22:35:30.901 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:30.931 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:30.931 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:30.931 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:30.932 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:30.932 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:30.932 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:30.932 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:30.932 +05:30 [ERR] No access token found.
2019-07-27 22:35:34.663 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:34.687 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:34.687 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:34.688 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:34.689 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:34.689 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:34.689 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:34.689 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:34.689 +05:30 [ERR] No access token found.
2019-07-27 22:35:35.002 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:35.028 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:35.029 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:35.029 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:35.029 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:35.029 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:35.029 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:35.029 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:35.029 +05:30 [ERR] No access token found.
2019-07-27 22:35:35.328 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:35.353 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:35.353 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:35.353 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:35.353 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:35.353 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:35.353 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:35.353 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:35.353 +05:30 [ERR] No access token found.
2019-07-27 22:35:35.633 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:35.658 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:35.658 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:35.658 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:35.659 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:35.659 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:35.659 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:35.659 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:35.659 +05:30 [ERR] No access token found.
2019-07-27 22:35:36.286 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:36.317 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:36.317 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:36.317 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:36.317 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:36.318 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:36.318 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:36.318 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:36.318 +05:30 [ERR] No access token found.
2019-07-27 22:35:36.552 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:36.576 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:36.576 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:36.576 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:36.577 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:36.577 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:36.577 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:36.577 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:36.577 +05:30 [ERR] No access token found.
2019-07-27 22:35:36.885 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:35:36.912 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:36.912 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:36.913 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:35:36.913 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:35:36.913 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:35:36.913 +05:30 [DBG] Start userinfo request
2019-07-27 22:35:36.913 +05:30 [DBG] Bearer token not found
2019-07-27 22:35:36.913 +05:30 [ERR] No access token found.
2019-07-27 22:35:42.537 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:35:42.565 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:42.565 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:42.565 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:35:42.566 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:35:42.566 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:35:42.566 +05:30 [DBG] Start discovery request
2019-07-27 22:35:42.904 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:35:42.932 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 22:35:42.933 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 22:35:42.933 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 22:35:42.934 +05:30 [DBG] Processing signout request for anonymous
2019-07-27 22:35:42.934 +05:30 [DBG] Start end session request validation
2019-07-27 22:35:42.934 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 22:35:42.934 +05:30 [DBG] Success validating end session request from null
2019-07-27 22:35:53.406 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:35:53.431 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:35:53.431 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:35:53.431 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:35:53.431 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:35:53.431 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:35:53.431 +05:30 [DBG] Start discovery request
2019-07-27 22:35:53.741 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:35:53.785 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 22:35:53.786 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 22:35:53.786 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 22:35:53.786 +05:30 [DBG] Start authorize request
2019-07-27 22:35:53.786 +05:30 [DBG] No user present in authorize request
2019-07-27 22:35:53.786 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:35:54.195 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:54.195 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:54.302 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:54.727 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:35:54.876 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:55.113 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:35:55.113 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:35:55.113 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"8faac8cc05f941e798b522aa9bd76ef0","UiLocales":null,"Nonce":"b14ee0f00095407badcc196454fba4bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"8faac8cc05f941e798b522aa9bd76ef0","nonce":"b14ee0f00095407badcc196454fba4bc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:35:55.113 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 22:35:55.157 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:35:55.780 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:55.780 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:35:55.946 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:56.312 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:35:56.548 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:35:56.876 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:35:56.877 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:35:57.402 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:35:57.402 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:12.691 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 22:36:12.747 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:36:13.446 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:13.447 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:13.656 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:14.180 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:36:14.382 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:14.884 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:36:14.884 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:36:15.122 +05:30 [DBG] Augmenting SignInContext
2019-07-27 22:36:15.122 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 22:36:15.122 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 22:36:15.122 +05:30 [DBG] Adding auth_time claim with value: 1564247175
2019-07-27 22:36:15.123 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 22:36:15.220 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIMHAQB947:00000010","TimeStamp":"2019-07-27T17:06:15.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 22:36:15.839 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:15.839 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:15.853 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 22:36:15.854 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 22:36:15.855 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 22:36:15.855 +05:30 [DBG] Start authorize callback request
2019-07-27 22:36:15.855 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 22:36:15.855 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:36:16.290 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:16.290 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:16.416 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:16.744 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:36:16.870 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:17.199 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:36:17.199 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:36:17.199 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"8faac8cc05f941e798b522aa9bd76ef0","UiLocales":null,"Nonce":"b14ee0f00095407badcc196454fba4bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f7c081d6bcde94f15cb0eaebe1015185","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"8faac8cc05f941e798b522aa9bd76ef0","nonce":"b14ee0f00095407badcc196454fba4bc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:36:17.254 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 22:36:17.254 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 22:36:17.254 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 22:36:17.254 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 22:36:17.389 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-27 22:36:17.389 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 22:36:17.393 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Uarg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****orPg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIMHAQB94A:0000000E","TimeStamp":"2019-07-27T17:06:17.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 22:36:17.393 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"8faac8cc05f941e798b522aa9bd76ef0","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 22:36:17.393 +05:30 [DBG] Augmenting SignInContext
2019-07-27 22:36:17.393 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 22:36:17.838 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:36:17.875 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:17.875 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:17.875 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:36:17.875 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:36:17.875 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:36:17.875 +05:30 [DBG] Start discovery request
2019-07-27 22:36:18.174 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:36:18.247 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 22:36:18.310 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:18.310 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:18.310 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 22:36:18.310 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 22:36:18.310 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 22:36:18.310 +05:30 [DBG] Start key discovery request
2019-07-27 22:36:18.379 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:36:18.413 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:18.413 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:18.419 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:36:18.445 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:18.445 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:18.445 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:36:18.446 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:36:18.446 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:36:18.446 +05:30 [DBG] Start userinfo request
2019-07-27 22:36:18.446 +05:30 [DBG] Bearer token found in header
2019-07-27 22:36:18.939 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:18.939 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:19.331 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:19.331 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:19.381 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:36:19.381 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247177,"exp":1564250777,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564247175,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:36:19.382 +05:30 [DBG] Creating userinfo response
2019-07-27 22:36:19.382 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:19.382 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:19.585 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:19.585 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:36:19.585 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:19.782 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:19.902 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:36:19.902 +05:30 [DBG] End userinfo request
2019-07-27 22:36:19.938 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:36:19.939 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:36:19.939 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:36:19.939 +05:30 [DBG] Rendering check session result
2019-07-27 22:36:20.611 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:36:20.642 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:20.642 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:20.642 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:36:20.642 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:36:20.642 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:36:20.642 +05:30 [DBG] Start discovery request
2019-07-27 22:36:20.949 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:36:20.993 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:36:20.993 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:36:20.993 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:36:20.993 +05:30 [DBG] Rendering check session result
2019-07-27 22:36:25.335 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:36:25.360 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:25.361 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:25.368 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:36:25.404 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:25.404 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:25.404 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:36:25.404 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:36:25.404 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:36:25.404 +05:30 [DBG] Start userinfo request
2019-07-27 22:36:25.405 +05:30 [DBG] Bearer token found in header
2019-07-27 22:36:25.824 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:25.824 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:26.328 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:26.328 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:26.370 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:36:26.370 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247177,"exp":1564250777,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564247175,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:36:26.370 +05:30 [DBG] Creating userinfo response
2019-07-27 22:36:26.371 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:26.371 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:26.555 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:26.556 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:36:26.556 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:26.707 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:26.804 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:36:26.805 +05:30 [DBG] End userinfo request
2019-07-27 22:36:44.303 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:36:44.341 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:44.342 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:44.364 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:36:44.395 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:36:44.395 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:36:44.395 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:36:44.395 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:36:44.395 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:36:44.396 +05:30 [DBG] Start userinfo request
2019-07-27 22:36:44.396 +05:30 [DBG] Bearer token found in header
2019-07-27 22:36:44.491 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 22:36:44.492 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 22:36:44.492 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 22:36:44.492 +05:30 [DBG] Processing signout request for 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-27 22:36:44.492 +05:30 [DBG] Start end session request validation
2019-07-27 22:36:44.492 +05:30 [DBG] Start identity token validation
2019-07-27 22:36:45.220 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:45.221 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:45.221 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:45.221 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:45.221 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-27 22:36:45.410 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:36:45.464 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247177,"exp":1564247477,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"b14ee0f00095407badcc196454fba4bc","iat":1564247177,"at_hash":"1l2lIknCwjpUIYSNCN1H6Q","sid":"f7c081d6bcde94f15cb0eaebe1015185","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564247175,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:36:45.465 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 22:36:45.465 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-27 22:36:45.641 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-27 22:36:45.693 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-27 22:36:45.693 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-27 22:36:45.693 +05:30 [INF] {"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIMHAQB948:00000014","TimeStamp":"2019-07-27T17:06:45.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-27 22:36:45.811 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:45.811 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:45.866 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:36:45.866 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247177,"exp":1564250777,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564247175,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:36:45.866 +05:30 [DBG] Creating userinfo response
2019-07-27 22:36:45.866 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:45.867 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:46.076 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:46.076 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:36:46.076 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:36:46.245 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:36:46.367 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:36:46.367 +05:30 [DBG] End userinfo request
2019-07-27 22:36:46.633 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-27 22:36:46.637 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-27 22:36:46.637 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-27 22:36:46.638 +05:30 [DBG] Processing signout callback request
2019-07-27 22:36:47.049 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:36:47.050 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:36:47.050 +05:30 [DBG] No client front-channel logout URLs
2019-07-27 22:36:47.050 +05:30 [DBG] No client back-channel logout URLs
2019-07-27 22:36:47.050 +05:30 [INF] Successful signout callback.
2019-07-27 22:36:47.051 +05:30 [DBG] No client front-channel iframe urls
2019-07-27 22:36:47.051 +05:30 [DBG] No client back-channel iframe urls
2019-07-27 22:41:07.015 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:41:07.067 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:07.067 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:07.067 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:41:07.067 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:41:07.068 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:41:07.068 +05:30 [DBG] Start userinfo request
2019-07-27 22:41:07.068 +05:30 [DBG] Bearer token not found
2019-07-27 22:41:07.068 +05:30 [ERR] No access token found.
2019-07-27 22:41:11.344 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:41:11.378 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:11.378 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:11.378 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:41:11.378 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:41:11.378 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:41:11.378 +05:30 [DBG] Start discovery request
2019-07-27 22:41:11.755 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:41:11.801 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 22:41:11.802 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 22:41:11.802 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 22:41:11.802 +05:30 [DBG] Processing signout request for anonymous
2019-07-27 22:41:11.802 +05:30 [DBG] Start end session request validation
2019-07-27 22:41:11.802 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 22:41:11.802 +05:30 [DBG] Success validating end session request from null
2019-07-27 22:41:15.214 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:41:15.253 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:15.253 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:15.254 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:41:15.254 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:41:15.254 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:41:15.254 +05:30 [DBG] Start discovery request
2019-07-27 22:41:15.599 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:41:15.662 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-27 22:41:15.674 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-27 22:41:15.675 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-27 22:41:15.675 +05:30 [DBG] Start authorize request
2019-07-27 22:41:15.675 +05:30 [DBG] No user present in authorize request
2019-07-27 22:41:15.675 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:41:16.157 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:16.157 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:16.295 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:16.840 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:16.974 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:17.349 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:17.349 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:41:17.349 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"dea3a32cbfd742c9899f9d4cd86e058e","UiLocales":null,"Nonce":"36f0a9f2617e45f69f067aa187b9ee98","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"dea3a32cbfd742c9899f9d4cd86e058e","nonce":"36f0a9f2617e45f69f067aa187b9ee98"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:41:17.349 +05:30 [INF] Showing login: User is not authenticated
2019-07-27 22:41:17.442 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:41:18.199 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:18.200 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:18.447 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:18.965 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:19.218 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:19.736 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:19.737 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:41:20.484 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:20.484 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:46.314 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-27 22:41:46.365 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:41:47.032 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:47.032 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:47.239 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:47.754 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:47.941 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:48.465 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:48.465 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:41:48.739 +05:30 [DBG] Augmenting SignInContext
2019-07-27 22:41:48.739 +05:30 [DBG] Adding idp claim with value: local
2019-07-27 22:41:48.739 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-27 22:41:48.740 +05:30 [DBG] Adding auth_time claim with value: 1564247508
2019-07-27 22:41:48.740 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 22:41:48.826 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIMHAQB94B:00000008","TimeStamp":"2019-07-27T17:11:48.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-27 22:41:49.553 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:49.553 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:49.562 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-27 22:41:49.563 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-27 22:41:49.563 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-27 22:41:49.563 +05:30 [DBG] Start authorize callback request
2019-07-27 22:41:49.563 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:41:49.563 +05:30 [DBG] Start authorize request protocol validation
2019-07-27 22:41:50.037 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:50.037 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:50.165 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:50.581 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:50.768 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:51.218 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-27 22:41:51.218 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-27 22:41:51.218 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"dea3a32cbfd742c9899f9d4cd86e058e","UiLocales":null,"Nonce":"36f0a9f2617e45f69f067aa187b9ee98","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c769911fa51102b94cc4c3db2434b399","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"dea3a32cbfd742c9899f9d4cd86e058e","nonce":"36f0a9f2617e45f69f067aa187b9ee98"},"$type":"AuthorizeRequestValidationLog"}
2019-07-27 22:41:51.286 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-27 22:41:51.286 +05:30 [DBG] Creating Implicit Flow response.
2019-07-27 22:41:51.286 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-27 22:41:51.287 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:41:51.412 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-27 22:41:51.412 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-27 22:41:51.417 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****aTfQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pugQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIMHAQB94B:00000009","TimeStamp":"2019-07-27T17:11:51.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-27 22:41:51.417 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"dea3a32cbfd742c9899f9d4cd86e058e","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-27 22:41:51.418 +05:30 [DBG] Augmenting SignInContext
2019-07-27 22:41:51.418 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-27 22:41:51.955 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:41:51.987 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:51.987 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:51.988 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:41:51.988 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:41:51.988 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:41:51.988 +05:30 [DBG] Start discovery request
2019-07-27 22:41:52.455 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:41:52.466 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-27 22:41:52.512 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:52.513 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:52.513 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-27 22:41:52.514 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-27 22:41:52.514 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-27 22:41:52.514 +05:30 [DBG] Start key discovery request
2019-07-27 22:41:52.558 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:41:52.587 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:52.587 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:52.593 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:41:52.633 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:52.633 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:52.634 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:41:52.634 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:41:52.634 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:41:52.634 +05:30 [DBG] Start userinfo request
2019-07-27 22:41:52.634 +05:30 [DBG] Bearer token found in header
2019-07-27 22:41:53.120 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:53.120 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:53.596 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:41:53.597 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:41:53.657 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:41:53.657 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247511,"exp":1564251111,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564247508,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:41:53.657 +05:30 [DBG] Creating userinfo response
2019-07-27 22:41:53.659 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:41:53.659 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:41:53.877 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:53.877 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:41:53.877 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:41:54.102 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:41:54.249 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:41:54.249 +05:30 [DBG] End userinfo request
2019-07-27 22:41:54.293 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:41:54.293 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:41:54.293 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:41:54.293 +05:30 [DBG] Rendering check session result
2019-07-27 22:41:55.047 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 22:41:55.082 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:41:55.082 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:41:55.082 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 22:41:55.082 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 22:41:55.083 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 22:41:55.083 +05:30 [DBG] Start discovery request
2019-07-27 22:41:55.514 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 22:41:55.531 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-27 22:41:55.531 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-27 22:41:55.531 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-27 22:41:55.531 +05:30 [DBG] Rendering check session result
2019-07-27 22:42:12.674 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:42:12.701 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:42:12.702 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:42:12.720 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-27 22:42:12.751 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 22:42:12.751 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 22:42:12.751 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-27 22:42:12.751 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-27 22:42:12.751 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-27 22:42:12.752 +05:30 [DBG] Start userinfo request
2019-07-27 22:42:12.752 +05:30 [DBG] Bearer token found in header
2019-07-27 22:42:13.207 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:42:13.207 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:42:13.654 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:42:13.654 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:42:13.724 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:42:13.724 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247511,"exp":1564251111,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564247508,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:42:13.725 +05:30 [DBG] Creating userinfo response
2019-07-27 22:42:13.725 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:42:13.725 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:42:13.882 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:42:13.882 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-27 22:42:13.882 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-27 22:42:14.069 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-27 22:42:14.194 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-27 22:42:14.195 +05:30 [DBG] End userinfo request
2019-07-27 22:42:24.719 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 22:42:24.720 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 22:42:24.720 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 22:42:24.722 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-27 22:42:24.722 +05:30 [DBG] Start end session request validation
2019-07-27 22:42:24.722 +05:30 [DBG] Start identity token validation
2019-07-27 22:42:25.165 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:42:25.165 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:42:25.165 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-27 22:42:25.228 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-27 22:42:25.228 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564247511,"exp":1564247811,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"36f0a9f2617e45f69f067aa187b9ee98","iat":1564247511,"at_hash":"7-9c49S0NwiGznDyRuX83g","sid":"c769911fa51102b94cc4c3db2434b399","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564247508,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-27 22:42:25.230 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 22:42:25.230 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-27 22:42:25.327 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-27 22:42:25.328 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-27 22:42:25.328 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-27 22:42:25.328 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIMHAQB94B:00000014","TimeStamp":"2019-07-27T17:12:25.0000000Z","ProcessId":8856,"LocalIpAddress":"127.0.0.1:8685","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-27 22:42:25.430 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-27 22:42:25.432 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-27 22:42:25.432 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-27 22:42:25.432 +05:30 [DBG] Processing signout callback request
2019-07-27 22:42:25.979 +05:30 [DBG] angular_spa found in database: true
2019-07-27 22:42:25.979 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-27 22:42:25.979 +05:30 [DBG] No client front-channel logout URLs
2019-07-27 22:42:25.979 +05:30 [DBG] No client back-channel logout URLs
2019-07-27 22:42:25.979 +05:30 [INF] Successful signout callback.
2019-07-27 22:42:25.979 +05:30 [DBG] No client front-channel iframe urls
2019-07-27 22:42:25.980 +05:30 [DBG] No client back-channel iframe urls
2019-07-27 23:02:55.400 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-27 23:02:55.435 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-27 23:02:55.435 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-27 23:02:55.436 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-27 23:02:55.436 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-27 23:02:55.436 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-27 23:02:55.436 +05:30 [DBG] Start discovery request
2019-07-27 23:02:55.822 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-27 23:02:55.863 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-27 23:02:55.878 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-27 23:02:55.878 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-27 23:02:55.878 +05:30 [DBG] Processing signout request for anonymous
2019-07-27 23:02:55.878 +05:30 [DBG] Start end session request validation
2019-07-27 23:02:55.878 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-27 23:02:55.878 +05:30 [DBG] Success validating end session request from null
2019-07-28 00:50:35.462 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-28 00:50:35.957 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-28 00:50:35.957 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-28 00:50:35.957 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-28 00:50:35.957 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-28 00:50:35.958 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-28 00:50:35.958 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-28 00:50:37.298 +05:30 [DBG] Starting grant removal
2019-07-28 00:50:38.963 +05:30 [DBG] Login Url: /Account/Login
2019-07-28 00:50:38.965 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-28 00:50:38.965 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-28 00:50:38.965 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-28 00:50:38.965 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-28 00:50:38.965 +05:30 [DBG] Error Url: /home/error
2019-07-28 00:50:38.965 +05:30 [DBG] Error Id Parameter: errorId
2019-07-28 00:51:28.472 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 00:51:29.753 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:51:29.760 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:51:29.764 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 00:51:29.982 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 00:51:29.983 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 00:51:30.006 +05:30 [DBG] Start discovery request
2019-07-28 00:51:32.918 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 00:51:33.169 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 00:51:33.176 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 00:51:33.177 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 00:51:33.267 +05:30 [DBG] Processing signout request for anonymous
2019-07-28 00:51:33.276 +05:30 [DBG] Start end session request validation
2019-07-28 00:51:33.793 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 00:51:33.802 +05:30 [DBG] Success validating end session request from null
2019-07-28 00:51:45.170 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 00:51:45.211 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:51:45.211 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:51:45.212 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 00:51:45.213 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 00:51:45.213 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 00:51:45.214 +05:30 [DBG] Start discovery request
2019-07-28 00:51:45.598 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 00:51:45.632 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 00:51:45.633 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 00:51:45.633 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 00:51:45.633 +05:30 [DBG] Processing signout request for anonymous
2019-07-28 00:51:45.634 +05:30 [DBG] Start end session request validation
2019-07-28 00:51:45.634 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 00:51:45.634 +05:30 [DBG] Success validating end session request from null
2019-07-28 00:52:05.737 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 00:52:05.772 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:52:05.772 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:52:05.773 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 00:52:05.773 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 00:52:05.774 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 00:52:05.774 +05:30 [DBG] Start discovery request
2019-07-28 00:52:06.110 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 00:52:06.137 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 00:52:06.141 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 00:52:06.141 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 00:52:06.150 +05:30 [DBG] Start authorize request
2019-07-28 00:52:06.163 +05:30 [DBG] No user present in authorize request
2019-07-28 00:52:06.216 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 00:52:08.420 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:08.486 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:08.971 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:09.666 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:09.854 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:10.379 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:10.390 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 00:52:10.395 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"55a08503761d41f1b1de541df22593f0","UiLocales":null,"Nonce":"7cd25d102a1b428e9922db00ec4a12ed","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"55a08503761d41f1b1de541df22593f0","nonce":"7cd25d102a1b428e9922db00ec4a12ed"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 00:52:10.403 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 00:52:11.033 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 00:52:11.978 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:11.979 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:12.195 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:12.890 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:13.115 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:13.735 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:13.735 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 00:52:14.481 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:14.481 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:40.003 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 00:52:40.801 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:40.802 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:41.017 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:41.717 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:41.993 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:42.613 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:42.613 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 00:52:44.160 +05:30 [DBG] Augmenting SignInContext
2019-07-28 00:52:44.165 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 00:52:44.165 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 00:52:44.165 +05:30 [DBG] Adding auth_time claim with value: 1564255364
2019-07-28 00:52:44.197 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 00:52:44.403 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUEB:0000000B","TimeStamp":"2019-07-27T19:22:44.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2019-07-28 00:52:44.849 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:44.849 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:44.915 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 00:52:44.917 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 00:52:44.918 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 00:52:44.930 +05:30 [DBG] Start authorize callback request
2019-07-28 00:52:44.956 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 00:52:44.956 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 00:52:45.586 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:45.586 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:45.763 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:46.187 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:46.392 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:46.833 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 00:52:46.833 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 00:52:46.834 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"55a08503761d41f1b1de541df22593f0","UiLocales":null,"Nonce":"7cd25d102a1b428e9922db00ec4a12ed","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1a7f0e12004a0354f27288fee3742cc0","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"55a08503761d41f1b1de541df22593f0","nonce":"7cd25d102a1b428e9922db00ec4a12ed"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 00:52:46.961 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 00:52:46.976 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 00:52:46.997 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 00:52:46.999 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 00:52:47.531 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 00:52:47.532 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 00:52:47.562 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pr7g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JQtg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUEC:0000000C","TimeStamp":"2019-07-27T19:22:47.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 00:52:47.565 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"55a08503761d41f1b1de541df22593f0","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 00:52:47.593 +05:30 [DBG] Augmenting SignInContext
2019-07-28 00:52:47.594 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 00:52:48.842 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 00:52:48.902 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:52:48.902 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:52:48.903 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 00:52:48.903 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 00:52:48.903 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 00:52:48.903 +05:30 [DBG] Start discovery request
2019-07-28 00:52:49.374 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 00:52:49.385 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 00:52:49.412 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:52:49.412 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:52:49.412 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 00:52:49.413 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 00:52:49.413 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 00:52:49.418 +05:30 [DBG] Start key discovery request
2019-07-28 00:52:49.536 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 00:52:49.575 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:52:49.575 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:52:49.596 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 00:52:49.621 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:52:49.621 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:52:49.622 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 00:52:49.625 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 00:52:49.625 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 00:52:49.637 +05:30 [DBG] Start userinfo request
2019-07-28 00:52:49.642 +05:30 [DBG] Bearer token found in header
2019-07-28 00:52:50.305 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:50.305 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:50.802 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:52:50.802 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:52:50.863 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 00:52:50.865 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564255367,"exp":1564258967,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564255364,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 00:52:50.880 +05:30 [DBG] Creating userinfo response
2019-07-28 00:52:50.884 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 00:52:50.887 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 00:52:50.987 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:50.988 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 00:52:50.988 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 00:52:51.129 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 00:52:51.237 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 00:52:51.237 +05:30 [DBG] End userinfo request
2019-07-28 00:52:52.437 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 00:52:52.480 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 00:52:52.480 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 00:52:52.481 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 00:52:52.481 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 00:52:52.481 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 00:52:52.481 +05:30 [DBG] Start discovery request
2019-07-28 00:52:53.023 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 00:52:53.045 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 00:52:53.045 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 00:52:53.045 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 00:52:53.047 +05:30 [DBG] Rendering check session result
2019-07-28 00:53:33.469 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 00:53:33.472 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 00:53:33.474 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 00:53:33.475 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 00:53:33.475 +05:30 [DBG] Start end session request validation
2019-07-28 00:53:33.491 +05:30 [DBG] Start identity token validation
2019-07-28 00:53:34.021 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:53:34.021 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:53:34.021 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 00:53:34.113 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 00:53:34.122 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564255367,"exp":1564255667,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"7cd25d102a1b428e9922db00ec4a12ed","iat":1564255367,"at_hash":"aSjxtMS2NUS1mPN-YcT2Nw","sid":"1a7f0e12004a0354f27288fee3742cc0","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564255364,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 00:53:34.127 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 00:53:34.129 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 00:53:34.228 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 00:53:34.229 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 00:53:34.230 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 00:53:34.231 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUEC:00000010","TimeStamp":"2019-07-27T19:23:34.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2019-07-28 00:53:34.324 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 00:53:34.328 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 00:53:34.328 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 00:53:34.343 +05:30 [DBG] Processing signout callback request
2019-07-28 00:53:34.942 +05:30 [DBG] angular_spa found in database: true
2019-07-28 00:53:34.943 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 00:53:34.943 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 00:53:34.943 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 00:53:34.943 +05:30 [INF] Successful signout callback.
2019-07-28 00:53:34.944 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 00:53:34.944 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 01:19:04.110 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 01:19:04.110 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 01:19:04.110 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 01:19:06.575 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:07.355 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:07.355 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:07.355 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:07.355 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:07.578 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:07.579 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 01:19:07.581 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:07.581 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:07.581 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:07.581 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:07.582 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 01:19:07.871 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 01:19:08.216 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:08.216 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:08.216 +05:30 [DBG] Start discovery request
2019-07-28 01:19:08.234 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 01:19:08.234 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 01:19:08.235 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 01:19:08.235 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 01:19:08.235 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 01:19:08.235 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 01:19:08.235 +05:30 [DBG] Start userinfo request
2019-07-28 01:19:08.235 +05:30 [DBG] Start userinfo request
2019-07-28 01:19:08.235 +05:30 [DBG] Start userinfo request
2019-07-28 01:19:08.704 +05:30 [DBG] Bearer token not found
2019-07-28 01:19:08.704 +05:30 [ERR] No access token found.
2019-07-28 01:19:08.704 +05:30 [DBG] Bearer token not found
2019-07-28 01:19:08.706 +05:30 [ERR] No access token found.
2019-07-28 01:19:08.704 +05:30 [DBG] Bearer token not found
2019-07-28 01:19:08.706 +05:30 [ERR] No access token found.
2019-07-28 01:19:09.623 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:12.140 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:12.172 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:12.172 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:12.173 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:12.173 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:12.173 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:12.173 +05:30 [DBG] Start discovery request
2019-07-28 01:19:12.808 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:14.968 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:15.097 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:15.097 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:15.097 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:15.097 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:15.097 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:15.097 +05:30 [DBG] Start discovery request
2019-07-28 01:19:15.687 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:17.116 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:17.233 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:17.233 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:17.233 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:17.233 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:17.233 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:17.233 +05:30 [DBG] Start discovery request
2019-07-28 01:19:17.776 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:28.044 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:28.110 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:28.111 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:28.112 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:28.112 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:28.112 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:28.113 +05:30 [DBG] Start discovery request
2019-07-28 01:19:28.877 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:30.784 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:30.842 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:30.843 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:30.843 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:30.844 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:30.844 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:30.844 +05:30 [DBG] Start discovery request
2019-07-28 01:19:31.520 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:36.993 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:37.116 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:37.116 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:37.117 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:37.117 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:37.117 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:37.117 +05:30 [DBG] Start discovery request
2019-07-28 01:19:37.659 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:19:39.872 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:19:39.925 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:19:39.925 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:19:39.925 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:19:39.926 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:19:39.926 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:19:39.926 +05:30 [DBG] Start discovery request
2019-07-28 01:19:40.380 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:20:58.684 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:21:01.472 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:21:01.472 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:21:01.582 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:21:01.598 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:21:01.598 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:21:01.598 +05:30 [DBG] Start discovery request
2019-07-28 01:21:02.452 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:23:08.066 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:23:08.294 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:23:08.294 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:23:08.337 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:23:08.337 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:23:08.368 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:23:08.368 +05:30 [DBG] Start discovery request
2019-07-28 01:23:08.837 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:23:13.772 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:23:13.903 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:23:13.903 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:23:13.903 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:23:13.903 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:23:13.903 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:23:13.903 +05:30 [DBG] Start discovery request
2019-07-28 01:23:14.692 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:23:19.388 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:23:19.455 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:23:19.456 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:23:19.456 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:23:19.456 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:23:19.456 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:23:19.456 +05:30 [DBG] Start discovery request
2019-07-28 01:23:20.138 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:23:25.487 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:23:25.588 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:23:25.588 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:23:25.588 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:23:25.588 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:23:25.588 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:23:25.589 +05:30 [DBG] Start discovery request
2019-07-28 01:23:26.351 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:32:23.631 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:32:24.978 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:32:24.978 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:32:25.004 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:32:25.005 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:32:25.005 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:32:25.005 +05:30 [DBG] Start discovery request
2019-07-28 01:32:25.624 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:40:48.497 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:40:51.060 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:40:51.061 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:40:51.105 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:40:51.164 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:40:51.164 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:40:51.164 +05:30 [DBG] Start discovery request
2019-07-28 01:40:52.013 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:40:52.685 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 01:40:53.557 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 01:40:53.557 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 01:40:53.568 +05:30 [DBG] Start authorize request
2019-07-28 01:40:53.843 +05:30 [DBG] No user present in authorize request
2019-07-28 01:40:53.843 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:40:56.748 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:40:56.784 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:40:57.556 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:40:58.214 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:40:58.395 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:40:58.826 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:40:58.826 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:40:58.942 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"6f4e4194188d43039b2cfeff8f417084","UiLocales":null,"Nonce":"7909ed1a92c64a56be6fa591d9d8834c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"6f4e4194188d43039b2cfeff8f417084","nonce":"7909ed1a92c64a56be6fa591d9d8834c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:40:58.977 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 01:41:00.820 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:41:02.852 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:41:02.852 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:41:03.115 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:41:03.661 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:41:03.841 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:41:04.230 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:41:04.230 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:41:04.835 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:41:04.835 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:41:27.151 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 01:41:27.616 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:41:28.316 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:41:28.317 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:41:28.494 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:41:28.889 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:41:29.110 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:41:29.515 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:41:29.516 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:41:31.258 +05:30 [DBG] Augmenting SignInContext
2019-07-28 01:41:31.258 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 01:41:31.258 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 01:41:31.258 +05:30 [DBG] Adding auth_time claim with value: 1564258291
2019-07-28 01:41:31.345 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 01:41:31.735 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUET:00000005","TimeStamp":"2019-07-27T20:11:31.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 01:41:32.382 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:41:32.382 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:41:32.515 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 01:41:32.527 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 01:41:32.527 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 01:41:32.527 +05:30 [DBG] Start authorize callback request
2019-07-28 01:41:32.589 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:41:32.589 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:41:33.002 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:41:33.002 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:41:33.106 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:41:33.397 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:41:33.500 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:41:33.797 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:41:33.798 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:41:33.799 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"6f4e4194188d43039b2cfeff8f417084","UiLocales":null,"Nonce":"7909ed1a92c64a56be6fa591d9d8834c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"de55ff457caa7fc9ef872d7a5ce5a64b","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"6f4e4194188d43039b2cfeff8f417084","nonce":"7909ed1a92c64a56be6fa591d9d8834c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:41:34.132 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 01:41:34.133 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 01:41:34.133 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 01:41:34.133 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:41:34.461 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 01:41:34.462 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 01:41:34.502 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****rONA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pDsA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUEV:00000002","TimeStamp":"2019-07-27T20:11:34.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 01:41:34.503 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"6f4e4194188d43039b2cfeff8f417084","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 01:41:34.503 +05:30 [DBG] Augmenting SignInContext
2019-07-28 01:41:34.504 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 01:42:15.937 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:42:16.875 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:42:16.875 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:42:17.195 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:42:17.923 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:42:18.379 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:42:19.014 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:42:19.014 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:42:19.774 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:42:19.775 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:23.731 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:43:23.762 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:43:23.763 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:43:23.763 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:43:23.800 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:43:23.800 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:43:23.800 +05:30 [DBG] Start discovery request
2019-07-28 01:43:24.161 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:43:24.278 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 01:43:24.281 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 01:43:24.281 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 01:43:24.282 +05:30 [DBG] Start authorize request
2019-07-28 01:43:24.282 +05:30 [DBG] No user present in authorize request
2019-07-28 01:43:24.282 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:43:24.848 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:43:24.848 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:25.009 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:25.488 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:25.621 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:26.086 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:26.086 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:43:26.086 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1cf07a2e22de4845b46ab05ad83c46e1","UiLocales":null,"Nonce":"2d692e7c77d7454e815a6e632a24b705","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"1cf07a2e22de4845b46ab05ad83c46e1","nonce":"2d692e7c77d7454e815a6e632a24b705"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:43:26.086 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 01:43:26.449 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:43:27.310 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:43:27.310 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:27.591 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:28.160 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:28.414 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:29.011 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:29.013 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:43:29.750 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:43:29.750 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:48.667 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:43:49.415 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:43:49.415 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:49.722 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:50.253 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:50.478 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:51.014 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:51.015 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:43:51.382 +05:30 [DBG] Augmenting SignInContext
2019-07-28 01:43:51.382 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 01:43:51.382 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 01:43:51.382 +05:30 [DBG] Adding auth_time claim with value: 1564258431
2019-07-28 01:43:51.383 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 01:43:51.496 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUF2:00000002","TimeStamp":"2019-07-27T20:13:51.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2019-07-28 01:43:52.267 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:43:52.268 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:52.277 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 01:43:52.278 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 01:43:52.278 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 01:43:52.278 +05:30 [DBG] Start authorize callback request
2019-07-28 01:43:52.278 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:43:52.278 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:43:52.794 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:43:52.794 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:43:52.984 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:53.419 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:53.619 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:43:54.129 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:43:54.129 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:43:54.130 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1cf07a2e22de4845b46ab05ad83c46e1","UiLocales":null,"Nonce":"2d692e7c77d7454e815a6e632a24b705","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6382fb0532adbf6d953b648459840871","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"1cf07a2e22de4845b46ab05ad83c46e1","nonce":"2d692e7c77d7454e815a6e632a24b705"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:43:54.197 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 01:43:54.197 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 01:43:54.197 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 01:43:54.197 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:43:54.354 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 01:43:54.354 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 01:43:54.359 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9L-A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****e7AQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUF3:00000002","TimeStamp":"2019-07-27T20:13:54.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 01:43:54.360 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"1cf07a2e22de4845b46ab05ad83c46e1","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 01:43:54.360 +05:30 [DBG] Augmenting SignInContext
2019-07-28 01:43:54.360 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 01:44:03.014 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:44:03.769 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:44:03.769 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:44:03.981 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:44:04.506 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:44:04.737 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:44:05.311 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:44:05.311 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:44:06.029 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:44:06.030 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:44:21.794 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 01:44:21.823 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:44:21.823 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:44:21.823 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 01:44:21.850 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 01:44:21.850 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 01:44:21.907 +05:30 [DBG] Start userinfo request
2019-07-28 01:44:21.907 +05:30 [DBG] Bearer token not found
2019-07-28 01:44:21.907 +05:30 [ERR] No access token found.
2019-07-28 01:44:46.948 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:44:47.124 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:44:47.124 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:44:47.125 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:44:47.125 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:44:47.126 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:44:47.126 +05:30 [DBG] Start discovery request
2019-07-28 01:44:47.671 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:44:54.314 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:44:54.353 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:44:54.353 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:44:54.353 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:44:54.354 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:44:54.354 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:44:54.354 +05:30 [DBG] Start discovery request
2019-07-28 01:44:54.689 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:44:54.728 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 01:44:54.728 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 01:44:54.728 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 01:44:54.728 +05:30 [DBG] Start authorize request
2019-07-28 01:44:54.729 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:44:54.729 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:44:55.302 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:44:55.303 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:44:55.439 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:44:55.860 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:44:56.024 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:44:56.599 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:44:56.599 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:44:56.599 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1b15ed5406a64a5abb31334362fc0915","UiLocales":null,"Nonce":"a4514839cd6c461ca1df428dea02b9b2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6382fb0532adbf6d953b648459840871","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"1b15ed5406a64a5abb31334362fc0915","nonce":"a4514839cd6c461ca1df428dea02b9b2"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:44:56.670 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 01:44:56.670 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 01:44:56.671 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 01:44:56.671 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:44:56.956 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 01:44:56.956 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 01:44:56.961 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****hjfQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****SWnw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUF1:00000007","TimeStamp":"2019-07-27T20:14:56.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 01:44:56.999 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"1b15ed5406a64a5abb31334362fc0915","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 01:46:25.720 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:46:25.767 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:46:25.767 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:46:25.768 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:46:25.768 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:46:25.769 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:46:25.769 +05:30 [DBG] Start discovery request
2019-07-28 01:46:26.122 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:46:26.152 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 01:46:26.244 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 01:46:26.244 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 01:46:26.244 +05:30 [DBG] Start authorize request
2019-07-28 01:46:26.245 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:46:26.245 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:46:26.880 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:46:26.881 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:46:27.012 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:46:27.495 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:46:27.659 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:46:28.078 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:46:28.078 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:46:28.078 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"9db3e40dad014bdeaa9bbb7e420dcec7","UiLocales":null,"Nonce":"391960c0eef0469f9746f657a7fe892f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6382fb0532adbf6d953b648459840871","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"9db3e40dad014bdeaa9bbb7e420dcec7","nonce":"391960c0eef0469f9746f657a7fe892f"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:46:28.140 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 01:46:28.141 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 01:46:28.142 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 01:46:28.142 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 01:46:28.347 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 01:46:28.347 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 01:46:28.370 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iJGg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DDQQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUF5:00000002","TimeStamp":"2019-07-27T20:16:28.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 01:46:28.370 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"9db3e40dad014bdeaa9bbb7e420dcec7","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 01:50:50.306 +05:30 [INF] Removing 0 grants
2019-07-28 01:50:50.587 +05:30 [WRN] Query: '(from DeviceFlowCodes x in DbSet<DeviceFlowCodes> where [x].Expiration < (Nullable<DateTime>)DateTim...' uses a row limiting operation (Skip/Take) without OrderBy which may lead to unpredictable results.
2019-07-28 01:50:50.631 +05:30 [INF] Removing 0 device flow codes
2019-07-28 01:54:36.896 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:54:36.977 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:54:36.977 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:54:36.978 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:54:36.978 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:54:36.978 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:54:36.978 +05:30 [DBG] Start discovery request
2019-07-28 01:54:37.310 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:54:37.375 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 01:54:37.377 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 01:54:37.377 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 01:54:37.377 +05:30 [DBG] Start authorize request
2019-07-28 01:54:37.377 +05:30 [DBG] No user present in authorize request
2019-07-28 01:54:37.378 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:54:37.959 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:54:37.959 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:54:38.090 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:54:38.540 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:54:38.669 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:54:39.115 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:54:39.116 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:54:39.116 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"041c776a64f04193860675b9958241e9","UiLocales":null,"Nonce":"ba15b3b7cdc341c38a089c27e15c7755","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"041c776a64f04193860675b9958241e9","nonce":"ba15b3b7cdc341c38a089c27e15c7755"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:54:39.117 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 01:54:39.201 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:54:40.291 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:54:40.291 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:54:40.510 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:54:41.061 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:54:41.324 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:54:41.847 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:54:41.848 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:54:42.505 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:54:42.505 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:54:57.158 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 01:54:57.222 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:54:57.909 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:54:57.909 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:54:58.151 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:54:58.685 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:54:58.922 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:54:59.460 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:54:59.461 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:54:59.690 +05:30 [DBG] Augmenting SignInContext
2019-07-28 01:54:59.690 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 01:54:59.690 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 01:54:59.690 +05:30 [DBG] Adding auth_time claim with value: 1564259099
2019-07-28 01:54:59.690 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 01:54:59.767 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUF9:00000002","TimeStamp":"2019-07-27T20:24:59.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 01:55:00.626 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:55:00.626 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:55:00.642 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 01:55:00.642 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 01:55:00.642 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 01:55:00.642 +05:30 [DBG] Start authorize callback request
2019-07-28 01:55:00.642 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 01:55:00.642 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:55:01.966 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:55:01.966 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:55:02.119 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:55:02.508 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:55:02.661 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:55:03.023 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:55:03.023 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:55:03.024 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"041c776a64f04193860675b9958241e9","UiLocales":null,"Nonce":"ba15b3b7cdc341c38a089c27e15c7755","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ce3cbff6993441fc899abc6317226683","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"041c776a64f04193860675b9958241e9","nonce":"ba15b3b7cdc341c38a089c27e15c7755"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:55:03.083 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 01:55:03.083 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 01:55:03.083 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 01:55:03.083 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 01:55:03.225 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 01:55:03.225 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 01:55:03.230 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****sJyA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ojcg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUF7:00000002","TimeStamp":"2019-07-27T20:25:03.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 01:55:03.231 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"041c776a64f04193860675b9958241e9","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 01:55:03.232 +05:30 [DBG] Augmenting SignInContext
2019-07-28 01:55:03.232 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 01:59:57.891 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 01:59:57.938 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 01:59:57.938 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 01:59:57.938 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 01:59:57.939 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 01:59:57.939 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 01:59:57.939 +05:30 [DBG] Start discovery request
2019-07-28 01:59:58.254 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 01:59:58.328 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 01:59:58.328 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 01:59:58.328 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 01:59:58.328 +05:30 [DBG] Start authorize request
2019-07-28 01:59:58.329 +05:30 [DBG] No user present in authorize request
2019-07-28 01:59:58.329 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 01:59:58.820 +05:30 [DBG] angular_spa found in database: true
2019-07-28 01:59:58.820 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 01:59:58.979 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:59:59.427 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:59:59.563 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 01:59:59.942 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 01:59:59.943 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 01:59:59.943 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"22f535f0bfcd4b7895db8d2cc1a27b75","UiLocales":null,"Nonce":"9ce4fbe84dd64cea900c974f305e4d04","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"22f535f0bfcd4b7895db8d2cc1a27b75","nonce":"9ce4fbe84dd64cea900c974f305e4d04"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 01:59:59.943 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:00:00.028 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:00:00.738 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:00.738 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:00.916 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:00:01.704 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:00:01.960 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:00:02.641 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:00:02.642 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:00:03.298 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:03.299 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:15.301 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:00:15.354 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:00:16.159 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:16.160 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:16.431 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:00:16.934 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:00:17.169 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:00:17.849 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:00:17.850 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:00:18.100 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:00:18.101 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:00:18.102 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:00:18.102 +05:30 [DBG] Adding auth_time claim with value: 1564259418
2019-07-28 02:00:18.102 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:00:18.234 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUFE:00000002","TimeStamp":"2019-07-27T20:30:18.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:00:18.935 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:18.935 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:18.959 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:00:18.959 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:00:18.960 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:00:18.960 +05:30 [DBG] Start authorize callback request
2019-07-28 02:00:18.960 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:00:18.961 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:00:19.530 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:19.530 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:19.678 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:00:20.043 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:00:20.173 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:00:20.577 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:00:20.577 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:00:20.577 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"22f535f0bfcd4b7895db8d2cc1a27b75","UiLocales":null,"Nonce":"9ce4fbe84dd64cea900c974f305e4d04","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a79e419a94b4c5b214769741cc39a5ae","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"22f535f0bfcd4b7895db8d2cc1a27b75","nonce":"9ce4fbe84dd64cea900c974f305e4d04"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:00:20.631 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:00:20.631 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:00:20.631 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:00:20.631 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:00:20.785 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:00:20.785 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:00:20.789 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gEPg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uUrA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFC:00000002","TimeStamp":"2019-07-27T20:30:20.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:00:20.789 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"22f535f0bfcd4b7895db8d2cc1a27b75","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:00:20.790 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:00:20.790 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:00:29.546 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 02:00:29.589 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:00:29.589 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:00:29.589 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 02:00:29.590 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 02:00:29.590 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 02:00:29.591 +05:30 [DBG] Start userinfo request
2019-07-28 02:00:29.591 +05:30 [DBG] Bearer token not found
2019-07-28 02:00:29.591 +05:30 [ERR] No access token found.
2019-07-28 02:00:44.194 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:00:44.220 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:00:44.220 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:00:44.220 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:00:44.220 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:00:44.221 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:00:44.221 +05:30 [DBG] Start discovery request
2019-07-28 02:00:44.545 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:00:44.687 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:00:44.705 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:00:44.705 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:00:44.705 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:00:44.705 +05:30 [DBG] Start end session request validation
2019-07-28 02:00:44.706 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:00:44.706 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:00:49.116 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:00:49.713 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:00:49.713 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:00:49.714 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:00:49.714 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUFD:00000003","TimeStamp":"2019-07-27T20:30:49.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:00:49.799 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:00:49.801 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:00:49.801 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:00:49.801 +05:30 [DBG] Processing signout callback request
2019-07-28 02:00:50.363 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:50.363 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:50.363 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:00:50.363 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:00:50.364 +05:30 [INF] Successful signout callback.
2019-07-28 02:00:50.364 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:00:50.364 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:00:56.081 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:00:56.082 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:00:56.082 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:00:56.082 +05:30 [DBG] Processing signout callback request
2019-07-28 02:00:56.661 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:00:56.661 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:00:56.661 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:00:56.662 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:00:56.662 +05:30 [INF] Successful signout callback.
2019-07-28 02:00:56.662 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:00:56.662 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:01:07.598 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:01:07.648 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:01:07.648 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:01:07.648 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:01:07.648 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:01:07.648 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:01:07.648 +05:30 [DBG] Start discovery request
2019-07-28 02:01:07.974 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:01:08.041 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:01:08.044 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:01:08.044 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:01:08.044 +05:30 [DBG] Start authorize request
2019-07-28 02:01:08.044 +05:30 [DBG] No user present in authorize request
2019-07-28 02:01:08.044 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:01:08.530 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:01:08.530 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:01:08.669 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:09.081 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:09.245 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:09.616 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:09.617 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:01:09.617 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c8b9bee2478b461aa3312453f356538f","UiLocales":null,"Nonce":"6ccfba9d3ca44c8d9d8595a69e177fd5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c8b9bee2478b461aa3312453f356538f","nonce":"6ccfba9d3ca44c8d9d8595a69e177fd5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:01:09.617 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:01:09.709 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:01:10.453 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:01:10.453 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:01:10.645 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:11.185 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:11.389 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:11.893 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:11.893 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:01:12.525 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:01:12.525 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:01:29.035 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:01:29.083 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:01:29.655 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:01:29.655 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:01:29.818 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:30.279 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:30.435 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:30.776 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:30.776 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:01:30.999 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:01:30.999 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:01:30.999 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:01:31.000 +05:30 [DBG] Adding auth_time claim with value: 1564259490
2019-07-28 02:01:31.000 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:01:31.060 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUFB:00000008","TimeStamp":"2019-07-27T20:31:31.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:01:31.658 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:01:31.658 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:01:31.668 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:01:31.668 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:01:31.668 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:01:31.668 +05:30 [DBG] Start authorize callback request
2019-07-28 02:01:31.669 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:01:31.669 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:01:32.025 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:01:32.026 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:01:32.151 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:32.384 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:32.482 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:01:32.720 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:01:32.721 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:01:32.721 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c8b9bee2478b461aa3312453f356538f","UiLocales":null,"Nonce":"6ccfba9d3ca44c8d9d8595a69e177fd5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a6c8102e9c6469cf2b624e8a24c67f3c","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c8b9bee2478b461aa3312453f356538f","nonce":"6ccfba9d3ca44c8d9d8595a69e177fd5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:01:32.796 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:01:32.796 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:01:32.797 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:01:32.797 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:01:32.969 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:01:32.969 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:01:32.986 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****hAkQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****evEA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFE:00000005","TimeStamp":"2019-07-27T20:31:32.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:01:32.986 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"c8b9bee2478b461aa3312453f356538f","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:01:32.986 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:01:32.986 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:02:11.368 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:11.403 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:11.403 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:11.403 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:11.403 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:11.403 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:11.404 +05:30 [DBG] Start discovery request
2019-07-28 02:02:11.791 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:02:21.198 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:21.260 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:21.260 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:21.260 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:21.260 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:21.260 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:21.260 +05:30 [DBG] Start discovery request
2019-07-28 02:02:21.565 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:02:21.606 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:02:21.607 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:02:21.607 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:02:21.607 +05:30 [DBG] Start authorize request
2019-07-28 02:02:21.607 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:02:21.607 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:02:22.036 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:02:22.036 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:02:22.151 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:02:22.472 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:02:22.598 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:02:22.898 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:02:22.899 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:02:22.899 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"3a2e929104d34be78a9dcac4d1836bde","UiLocales":null,"Nonce":"bb3673c8abd7495b88d404c1a5fc8345","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a6c8102e9c6469cf2b624e8a24c67f3c","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"3a2e929104d34be78a9dcac4d1836bde","nonce":"bb3673c8abd7495b88d404c1a5fc8345"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:02:22.975 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:02:22.976 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:02:22.976 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:02:22.976 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:02:23.121 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:02:23.122 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:02:23.126 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****I6nw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****upfA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFE:00000006","TimeStamp":"2019-07-27T20:32:23.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:02:23.126 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"3a2e929104d34be78a9dcac4d1836bde","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:02:38.687 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:38.718 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:38.718 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:38.719 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:38.719 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:38.719 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:38.719 +05:30 [DBG] Start discovery request
2019-07-28 02:02:39.056 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:02:46.973 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:47.020 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:47.020 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:47.020 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:47.021 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:47.021 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:47.021 +05:30 [DBG] Start discovery request
2019-07-28 02:02:47.410 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:02:47.440 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:02:47.441 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:02:47.442 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:02:47.442 +05:30 [DBG] Start authorize request
2019-07-28 02:02:47.442 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:02:47.442 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:02:47.856 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:02:47.856 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:02:47.957 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:02:48.496 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:02:48.641 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:02:48.909 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:02:48.910 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:02:48.910 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"a14f84acabc74b529c1e9880c0883bac","UiLocales":null,"Nonce":"28f3e2af4c60488ea39b771e0f069d07","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a6c8102e9c6469cf2b624e8a24c67f3c","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"a14f84acabc74b529c1e9880c0883bac","nonce":"28f3e2af4c60488ea39b771e0f069d07"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:02:48.963 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:02:48.964 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:02:48.964 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:02:48.964 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:02:49.086 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:02:49.086 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:02:49.090 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****j6YA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****55YQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFE:00000008","TimeStamp":"2019-07-27T20:32:49.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:02:49.090 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"a14f84acabc74b529c1e9880c0883bac","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:02:55.059 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:55.130 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:55.130 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:55.131 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:55.131 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:55.131 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:55.131 +05:30 [DBG] Start discovery request
2019-07-28 02:02:55.646 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:02:57.646 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:57.728 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:57.729 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:57.731 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:57.732 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:57.732 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:57.732 +05:30 [DBG] Start discovery request
2019-07-28 02:02:58.137 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:02:59.119 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:02:59.183 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:02:59.183 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:02:59.183 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:02:59.183 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:02:59.183 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:02:59.183 +05:30 [DBG] Start discovery request
2019-07-28 02:02:59.637 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:03:00.525 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:03:00.598 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:03:00.598 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:03:00.598 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:03:00.599 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:03:00.599 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:03:00.599 +05:30 [DBG] Start discovery request
2019-07-28 02:03:01.040 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:04:04.698 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:04:04.748 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:04:04.748 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:04:04.749 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:04:04.749 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:04:04.749 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:04:04.749 +05:30 [DBG] Start discovery request
2019-07-28 02:04:05.085 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:04:05.121 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:04:05.124 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:04:05.124 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:04:05.124 +05:30 [DBG] Start authorize request
2019-07-28 02:04:05.125 +05:30 [DBG] No user present in authorize request
2019-07-28 02:04:05.125 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:04:05.536 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:04:05.536 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:04:05.657 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:05.979 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:06.108 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:06.416 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:06.417 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:04:06.417 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"50d3b60ab655468ebee7ff8ecca79665","UiLocales":null,"Nonce":"70d97706168542e7a4d16ba7bf50a377","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"50d3b60ab655468ebee7ff8ecca79665","nonce":"70d97706168542e7a4d16ba7bf50a377"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:04:06.417 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:04:06.489 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:04:07.092 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:04:07.092 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:04:07.273 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:07.581 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:07.752 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:08.133 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:08.134 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:04:08.678 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:04:08.678 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:04:18.854 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:04:18.898 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:04:19.485 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:04:19.485 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:04:19.649 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:20.008 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:20.224 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:20.682 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:20.682 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:04:20.924 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:04:20.924 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:04:20.924 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:04:20.924 +05:30 [DBG] Adding auth_time claim with value: 1564259660
2019-07-28 02:04:20.925 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:04:21.025 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUFM:00000002","TimeStamp":"2019-07-27T20:34:21.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:04:21.722 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:04:21.722 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:04:21.729 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:04:21.729 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:04:21.730 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:04:21.730 +05:30 [DBG] Start authorize callback request
2019-07-28 02:04:21.730 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:04:21.730 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:04:22.109 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:04:22.109 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:04:22.228 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:22.447 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:22.549 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:04:22.787 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:04:22.787 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:04:22.787 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"50d3b60ab655468ebee7ff8ecca79665","UiLocales":null,"Nonce":"70d97706168542e7a4d16ba7bf50a377","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a8ae5b5e229d2daeb635b978ea66cc23","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"50d3b60ab655468ebee7ff8ecca79665","nonce":"70d97706168542e7a4d16ba7bf50a377"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:04:22.854 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:04:22.854 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:04:22.855 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:04:22.855 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:04:22.966 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:04:22.966 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:04:22.970 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Vcng","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UAfA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFJ:00000005","TimeStamp":"2019-07-27T20:34:22.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:04:22.970 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"50d3b60ab655468ebee7ff8ecca79665","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:04:22.970 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:04:22.970 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:04:42.466 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:04:42.506 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:04:42.506 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:04:42.506 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:04:42.506 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:04:42.506 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:04:42.506 +05:30 [DBG] Start discovery request
2019-07-28 02:04:42.927 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:06:30.378 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:06:30.436 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:06:30.436 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:06:30.437 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:06:30.437 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:06:30.437 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:06:30.437 +05:30 [DBG] Start discovery request
2019-07-28 02:06:30.909 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:06:35.898 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:06:35.982 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:06:35.982 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:06:35.982 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:06:35.983 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:06:35.983 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:06:35.983 +05:30 [DBG] Start discovery request
2019-07-28 02:06:36.437 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:06:39.939 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:06:40.059 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:06:40.059 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:06:40.060 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:06:40.061 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:06:40.061 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:06:40.061 +05:30 [DBG] Start discovery request
2019-07-28 02:06:40.512 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:06:43.923 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:06:43.974 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:06:43.974 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:06:43.975 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:06:43.975 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:06:43.975 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:06:43.975 +05:30 [DBG] Start discovery request
2019-07-28 02:06:44.491 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:07:46.549 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:07:46.603 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:07:46.603 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:07:46.603 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:07:46.604 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:07:46.604 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:07:46.604 +05:30 [DBG] Start discovery request
2019-07-28 02:07:46.991 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:07:47.060 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:07:47.061 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:07:47.061 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:07:47.061 +05:30 [DBG] Start authorize request
2019-07-28 02:07:47.061 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:07:47.062 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:07:47.508 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:07:47.508 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:07:47.633 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:07:48.039 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:07:48.191 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:07:48.454 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:07:48.454 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:07:48.454 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"95cc7e1acff3480db785e29fefa46a90","UiLocales":null,"Nonce":"e9ff0744f31c427db580f3c640fcdefa","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a8ae5b5e229d2daeb635b978ea66cc23","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"95cc7e1acff3480db785e29fefa46a90","nonce":"e9ff0744f31c427db580f3c640fcdefa"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:07:48.508 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:07:48.508 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:07:48.508 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:07:48.508 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:07:48.703 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:07:48.704 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:07:48.708 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ppdg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aO1g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFS:00000002","TimeStamp":"2019-07-27T20:37:48.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:07:48.708 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"95cc7e1acff3480db785e29fefa46a90","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:07:55.548 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:07:55.594 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:07:55.595 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:07:55.596 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:07:55.597 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:07:55.597 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:07:55.598 +05:30 [DBG] Start discovery request
2019-07-28 02:07:56.174 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:13:11.516 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:13:11.607 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:13:11.607 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:13:11.608 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:13:11.608 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:13:11.608 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:13:11.608 +05:30 [DBG] Start discovery request
2019-07-28 02:13:12.249 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:13:12.306 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:13:12.342 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:13:12.342 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:13:12.343 +05:30 [DBG] Start authorize request
2019-07-28 02:13:12.344 +05:30 [DBG] No user present in authorize request
2019-07-28 02:13:12.345 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:13:12.843 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:12.844 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:13.003 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:13.361 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:13.482 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:13.872 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:13.872 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:13:13.873 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c55b571d0e0f41da9baad6d8cd7533bd","UiLocales":null,"Nonce":"151d770dcdf3483da0b7fd7d0ebb4f25","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c55b571d0e0f41da9baad6d8cd7533bd","nonce":"151d770dcdf3483da0b7fd7d0ebb4f25"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:13:13.873 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:13:13.920 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:13:14.908 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:14.908 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:15.143 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:15.732 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:15.931 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:16.464 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:16.464 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:13:17.127 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:17.127 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:25.834 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:13:25.882 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:13:26.646 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:26.646 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:26.820 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:27.394 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:27.662 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:28.297 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:28.298 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:13:28.602 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:13:28.602 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:13:28.602 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:13:28.602 +05:30 [DBG] Adding auth_time claim with value: 1564260208
2019-07-28 02:13:28.603 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:13:28.676 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUFT:00000005","TimeStamp":"2019-07-27T20:43:28.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:13:29.336 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:29.337 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:29.345 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:13:29.346 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:13:29.346 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:13:29.346 +05:30 [DBG] Start authorize callback request
2019-07-28 02:13:29.346 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:13:29.346 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:13:29.834 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:29.834 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:29.979 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:30.367 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:30.623 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:13:31.125 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:13:31.125 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:13:31.125 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c55b571d0e0f41da9baad6d8cd7533bd","UiLocales":null,"Nonce":"151d770dcdf3483da0b7fd7d0ebb4f25","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"9677ca4653a3d51fe18954b6ecb8e78f","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c55b571d0e0f41da9baad6d8cd7533bd","nonce":"151d770dcdf3483da0b7fd7d0ebb4f25"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:13:31.185 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:13:31.186 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:13:31.186 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:13:31.186 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:13:31.334 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:13:31.335 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:13:31.339 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qgeQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****VN2w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUFV:00000002","TimeStamp":"2019-07-27T20:43:31.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:13:31.339 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"c55b571d0e0f41da9baad6d8cd7533bd","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:13:31.339 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:13:31.340 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:13:36.422 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:13:36.483 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:13:36.483 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:13:36.484 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:13:36.484 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:13:36.485 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:13:36.485 +05:30 [DBG] Start discovery request
2019-07-28 02:13:37.060 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:13:37.115 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:13:37.116 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:13:37.116 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:13:37.116 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:13:37.116 +05:30 [DBG] Start end session request validation
2019-07-28 02:13:37.116 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:13:37.117 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:13:40.299 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:13:40.377 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:13:40.377 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:13:40.377 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:13:40.377 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUFT:00000006","TimeStamp":"2019-07-27T20:43:40.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:13:40.448 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:13:40.449 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:13:40.450 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:13:40.450 +05:30 [DBG] Processing signout callback request
2019-07-28 02:13:40.993 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:40.994 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:40.994 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:13:40.994 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:13:40.994 +05:30 [INF] Successful signout callback.
2019-07-28 02:13:40.994 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:13:40.994 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:13:44.146 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:13:44.147 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:13:44.147 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:13:44.147 +05:30 [DBG] Processing signout callback request
2019-07-28 02:13:44.769 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:13:44.769 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:13:44.769 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:13:44.769 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:13:44.769 +05:30 [INF] Successful signout callback.
2019-07-28 02:13:44.769 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:13:44.770 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:14:10.772 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:14:10.810 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:14:10.810 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:14:10.810 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:14:10.810 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:14:10.811 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:14:10.811 +05:30 [DBG] Start discovery request
2019-07-28 02:14:11.355 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:14:11.429 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:14:11.430 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:14:11.430 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:14:11.430 +05:30 [DBG] Start authorize request
2019-07-28 02:14:11.430 +05:30 [DBG] No user present in authorize request
2019-07-28 02:14:11.430 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:14:11.958 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:11.958 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:12.088 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:12.487 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:12.659 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:13.138 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:13.139 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:14:13.139 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"689c088b0f3c4b7b8204400095149b1e","UiLocales":null,"Nonce":"7ce31ff632bb4fbfa87f54ada3e2595c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"689c088b0f3c4b7b8204400095149b1e","nonce":"7ce31ff632bb4fbfa87f54ada3e2595c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:14:13.140 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:14:13.234 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:14:13.863 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:13.863 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:14.190 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:14.977 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:15.199 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:15.690 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:15.691 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:14:16.344 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:16.345 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:27.800 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:14:27.850 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:14:28.503 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:28.503 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:28.685 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:29.210 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:29.406 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:29.927 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:29.928 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:14:30.189 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:14:30.189 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:14:30.189 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:14:30.189 +05:30 [DBG] Adding auth_time claim with value: 1564260270
2019-07-28 02:14:30.190 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:14:30.274 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUG1:00000004","TimeStamp":"2019-07-27T20:44:30.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:14:30.964 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:30.965 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:30.976 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:14:30.977 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:14:30.977 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:14:30.977 +05:30 [DBG] Start authorize callback request
2019-07-28 02:14:30.977 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:14:30.977 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:14:31.485 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:31.485 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:31.615 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:31.989 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:32.160 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:32.612 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:32.612 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:14:32.612 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"689c088b0f3c4b7b8204400095149b1e","UiLocales":null,"Nonce":"7ce31ff632bb4fbfa87f54ada3e2595c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"476d5f9a196186668b7887f572a8578e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"689c088b0f3c4b7b8204400095149b1e","nonce":"7ce31ff632bb4fbfa87f54ada3e2595c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:14:32.689 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:14:32.689 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:14:32.689 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:14:32.689 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:14:32.894 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:14:32.894 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:14:32.899 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****YYoQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****SRfw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG0:00000004","TimeStamp":"2019-07-27T20:44:32.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:14:32.899 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"689c088b0f3c4b7b8204400095149b1e","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:14:32.899 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:14:32.900 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:14:41.319 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:14:41.347 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:14:41.347 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:14:41.348 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:14:41.348 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:14:41.348 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:14:41.348 +05:30 [DBG] Start discovery request
2019-07-28 02:14:41.709 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:14:41.798 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:14:41.798 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:14:41.798 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:14:41.799 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:14:41.799 +05:30 [DBG] Start end session request validation
2019-07-28 02:14:41.800 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:14:41.800 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:14:45.137 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:14:45.193 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:14:45.193 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:14:45.194 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:14:45.194 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUG1:00000005","TimeStamp":"2019-07-27T20:44:45.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:14:45.233 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:14:45.236 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:14:45.236 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:14:45.236 +05:30 [DBG] Processing signout callback request
2019-07-28 02:14:45.652 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:45.652 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:45.652 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:14:45.652 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:14:45.653 +05:30 [INF] Successful signout callback.
2019-07-28 02:14:45.653 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:14:45.653 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:14:50.623 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:14:50.623 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:14:50.624 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:14:50.624 +05:30 [DBG] Processing signout callback request
2019-07-28 02:14:51.423 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:51.424 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:51.424 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:14:51.424 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:14:51.424 +05:30 [INF] Successful signout callback.
2019-07-28 02:14:51.424 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:14:51.424 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:14:51.505 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:14:52.575 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:52.575 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:14:52.792 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:53.388 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:53.575 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:14:54.261 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:14:54.262 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:14:54.976 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:14:54.977 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:15:04.054 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:15:04.745 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:15:04.746 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:15:04.943 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:15:05.469 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:15:05.653 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:15:06.326 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:15:06.326 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:15:07.071 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:15:07.072 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:15:32.896 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 02:15:32.929 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:15:32.929 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:15:32.929 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 02:15:32.930 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 02:15:32.930 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 02:15:32.930 +05:30 [DBG] Start userinfo request
2019-07-28 02:15:32.930 +05:30 [DBG] Bearer token not found
2019-07-28 02:15:32.930 +05:30 [ERR] No access token found.
2019-07-28 02:17:40.858 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:17:40.960 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:17:40.960 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:17:40.960 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:17:40.960 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:17:40.961 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:17:40.961 +05:30 [DBG] Start discovery request
2019-07-28 02:17:41.559 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:17:41.583 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:17:41.585 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:17:41.585 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:17:41.585 +05:30 [DBG] Start authorize request
2019-07-28 02:17:41.585 +05:30 [DBG] No user present in authorize request
2019-07-28 02:17:41.585 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:17:42.082 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:17:42.082 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:17:42.223 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:17:42.592 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:17:42.737 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:17:43.224 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:17:43.225 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:17:43.225 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"2c54e42a8b7d45eea3fc1ca14575f97c","UiLocales":null,"Nonce":"b917fcbfb09c47c9bc7ae0c564fc2095","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"2c54e42a8b7d45eea3fc1ca14575f97c","nonce":"b917fcbfb09c47c9bc7ae0c564fc2095"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:17:43.225 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:17:43.292 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:17:43.986 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:17:43.986 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:17:44.169 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:17:45.047 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:17:45.306 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:17:45.846 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:17:45.846 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:17:46.473 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:17:46.474 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:01.400 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:18:01.462 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:18:02.135 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:02.136 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:02.321 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:18:02.821 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:18:03.030 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:18:03.505 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:18:03.506 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:18:03.791 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:18:03.792 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:18:03.792 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:18:03.792 +05:30 [DBG] Adding auth_time claim with value: 1564260483
2019-07-28 02:18:03.793 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:18:03.876 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUG2:00000004","TimeStamp":"2019-07-27T20:48:03.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:18:04.521 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:04.521 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:04.532 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:18:04.532 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:18:04.532 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:18:04.532 +05:30 [DBG] Start authorize callback request
2019-07-28 02:18:04.532 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:18:04.533 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:18:05.030 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:05.030 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:05.160 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:18:05.548 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:18:05.721 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:18:06.138 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:18:06.138 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:18:06.138 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"2c54e42a8b7d45eea3fc1ca14575f97c","UiLocales":null,"Nonce":"b917fcbfb09c47c9bc7ae0c564fc2095","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"8728baa903b6fb6603937d09ecd8c1ed","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"2c54e42a8b7d45eea3fc1ca14575f97c","nonce":"b917fcbfb09c47c9bc7ae0c564fc2095"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:18:06.220 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:18:06.220 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:18:06.220 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:18:06.220 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:18:06.370 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:18:06.370 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:18:06.375 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****d10w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DRfA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG2:00000005","TimeStamp":"2019-07-27T20:48:06.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:18:06.375 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"2c54e42a8b7d45eea3fc1ca14575f97c","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:18:06.375 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:18:06.375 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:18:12.108 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:18:12.203 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:18:12.203 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:18:12.204 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:18:12.204 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:18:12.204 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:18:12.204 +05:30 [DBG] Start discovery request
2019-07-28 02:18:12.573 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:18:12.598 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:18:12.599 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:18:12.599 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:18:12.599 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:18:12.600 +05:30 [DBG] Start end session request validation
2019-07-28 02:18:12.600 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:18:12.600 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:18:17.572 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:18:17.635 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:18:17.635 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:18:17.636 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:18:17.636 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUG2:00000009","TimeStamp":"2019-07-27T20:48:17.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:18:17.700 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:18:17.700 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:18:17.701 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:18:17.701 +05:30 [DBG] Processing signout callback request
2019-07-28 02:18:18.132 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:18.132 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:18.132 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:18:18.132 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:18:18.132 +05:30 [INF] Successful signout callback.
2019-07-28 02:18:18.132 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:18:18.133 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:18:30.013 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:18:30.014 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:18:30.014 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:18:30.015 +05:30 [DBG] Processing signout callback request
2019-07-28 02:18:30.521 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:30.521 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:30.521 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:18:30.521 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:18:30.521 +05:30 [INF] Successful signout callback.
2019-07-28 02:18:30.521 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:18:30.522 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:18:31.267 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:18:32.265 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:32.265 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:32.563 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:18:33.226 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:18:33.407 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:18:34.030 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:18:34.030 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:18:34.653 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:18:34.654 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:18:43.062 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:18:43.088 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:18:43.088 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:18:43.089 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:18:43.089 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:18:43.089 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:18:43.089 +05:30 [DBG] Start discovery request
2019-07-28 02:18:43.421 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:18:43.475 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:18:43.476 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:18:43.476 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:18:43.476 +05:30 [DBG] Processing signout request for anonymous
2019-07-28 02:18:43.476 +05:30 [DBG] Start end session request validation
2019-07-28 02:18:43.476 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:18:43.477 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:19:07.461 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:19:07.512 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:19:07.512 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:19:07.513 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:19:07.513 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:19:07.513 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:19:07.514 +05:30 [DBG] Start discovery request
2019-07-28 02:19:07.890 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:19:07.931 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:19:07.933 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:19:07.933 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:19:07.933 +05:30 [DBG] Processing signout request for anonymous
2019-07-28 02:19:07.933 +05:30 [DBG] Start end session request validation
2019-07-28 02:19:07.933 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:19:07.933 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:19:15.172 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:19:15.232 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:19:15.232 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:19:15.232 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:19:15.233 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:19:15.233 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:19:15.233 +05:30 [DBG] Start discovery request
2019-07-28 02:19:15.645 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:19:15.677 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:19:15.678 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:19:15.678 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:19:15.678 +05:30 [DBG] Start authorize request
2019-07-28 02:19:15.678 +05:30 [DBG] No user present in authorize request
2019-07-28 02:19:15.678 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:19:16.605 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:19:16.605 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:19:16.761 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:17.148 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:17.280 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:17.679 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:17.679 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:19:17.680 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"5e4f43ac64ab4d329391124556883cd5","UiLocales":null,"Nonce":"66cc57831a474728b3a28f4c0b6eedbd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"5e4f43ac64ab4d329391124556883cd5","nonce":"66cc57831a474728b3a28f4c0b6eedbd"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:19:17.680 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:19:17.767 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:19:18.512 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:19:18.513 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:19:18.727 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:19.257 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:19.491 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:20.315 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:20.315 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:19:21.040 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:19:21.040 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:19:37.012 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:19:37.342 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:19:38.056 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:19:38.056 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:19:38.260 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:38.754 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:38.946 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:39.509 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:39.509 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:19:39.734 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:19:39.735 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:19:39.736 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:19:39.736 +05:30 [DBG] Adding auth_time claim with value: 1564260579
2019-07-28 02:19:39.736 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:19:39.855 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUG3:0000000A","TimeStamp":"2019-07-27T20:49:39.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:19:40.525 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:19:40.526 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:19:40.535 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:19:40.536 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:19:40.536 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:19:40.536 +05:30 [DBG] Start authorize callback request
2019-07-28 02:19:40.536 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:19:40.536 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:19:41.009 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:19:41.009 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:19:41.141 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:41.551 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:41.731 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:19:42.167 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:19:42.167 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:19:42.167 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"5e4f43ac64ab4d329391124556883cd5","UiLocales":null,"Nonce":"66cc57831a474728b3a28f4c0b6eedbd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a98736534c3abb13dc8e8de6e92805ac","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"5e4f43ac64ab4d329391124556883cd5","nonce":"66cc57831a474728b3a28f4c0b6eedbd"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:19:42.226 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:19:42.226 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:19:42.226 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:19:42.227 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:19:42.409 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:19:42.409 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:19:42.414 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****WvAQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ThPQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG3:0000000B","TimeStamp":"2019-07-27T20:49:42.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:19:42.414 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"5e4f43ac64ab4d329391124556883cd5","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:19:42.414 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:19:42.415 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:20:37.033 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:20:37.134 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:20:37.134 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:20:37.135 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:20:37.135 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:20:37.136 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:20:37.136 +05:30 [DBG] Start discovery request
2019-07-28 02:20:37.767 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:20:37.870 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:20:37.871 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:20:37.871 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:20:37.871 +05:30 [DBG] Start authorize request
2019-07-28 02:20:37.871 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:20:37.871 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:20:39.031 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:20:39.033 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:20:39.033 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:20:39.033 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:20:39.033 +05:30 [DBG] Start end session request validation
2019-07-28 02:20:39.033 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:20:39.033 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:20:39.299 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:20:39.299 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:20:40.392 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:20:40.778 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:20:40.900 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:20:41.257 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:20:41.257 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:20:41.258 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"3c6f8f58825e4ad78a7ab35ffa4cf580","UiLocales":null,"Nonce":"5533790652004e2ba5702175c9a4ddce","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a98736534c3abb13dc8e8de6e92805ac","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"3c6f8f58825e4ad78a7ab35ffa4cf580","nonce":"5533790652004e2ba5702175c9a4ddce"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:20:41.324 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:20:41.324 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:20:41.324 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:20:41.324 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:20:41.444 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:20:41.444 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:20:41.448 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****inSg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6YOQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG3:0000000D","TimeStamp":"2019-07-27T20:50:41.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:20:41.448 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"3c6f8f58825e4ad78a7ab35ffa4cf580","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:20:47.389 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:20:47.431 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:20:47.431 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:20:47.432 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:20:47.432 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUG4:00000003","TimeStamp":"2019-07-27T20:50:47.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:20:47.499 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:20:47.500 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:20:47.500 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:20:47.500 +05:30 [DBG] Processing signout callback request
2019-07-28 02:20:48.013 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:20:48.014 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:20:48.014 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:20:48.014 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:20:48.014 +05:30 [INF] Successful signout callback.
2019-07-28 02:20:48.014 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:20:48.014 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:21:14.796 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:21:14.865 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:21:14.865 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:21:14.866 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:21:14.866 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:21:14.867 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:21:14.867 +05:30 [DBG] Start discovery request
2019-07-28 02:21:15.517 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:21:15.593 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:21:15.594 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:21:15.594 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:21:15.595 +05:30 [DBG] Start authorize request
2019-07-28 02:21:15.595 +05:30 [DBG] No user present in authorize request
2019-07-28 02:21:15.596 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:21:16.138 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:21:16.138 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:21:16.309 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:16.718 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:16.869 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:17.350 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:17.350 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:21:17.350 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"6097b00a8a4c4c7fb823b0e92f95ed39","UiLocales":null,"Nonce":"4cca2332d2af46ab89c4349798fd7dc8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"6097b00a8a4c4c7fb823b0e92f95ed39","nonce":"4cca2332d2af46ab89c4349798fd7dc8"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:21:17.351 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:21:17.467 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:21:18.201 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:21:18.201 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:21:18.389 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:19.265 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:19.536 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:20.084 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:20.084 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:21:20.701 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:21:20.701 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:21:28.334 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:21:28.398 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:21:29.059 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:21:29.060 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:21:29.253 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:29.740 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:29.945 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:30.560 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:30.560 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:21:30.779 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:21:30.780 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:21:30.780 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:21:30.780 +05:30 [DBG] Adding auth_time claim with value: 1564260690
2019-07-28 02:21:30.780 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:21:30.878 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUG3:00000010","TimeStamp":"2019-07-27T20:51:30.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:21:31.583 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:21:31.583 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:21:31.599 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:21:31.599 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:21:31.600 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:21:31.600 +05:30 [DBG] Start authorize callback request
2019-07-28 02:21:31.600 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:21:31.600 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:21:32.132 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:21:32.132 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:21:32.268 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:32.663 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:32.829 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:21:33.264 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:21:33.264 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:21:33.265 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"6097b00a8a4c4c7fb823b0e92f95ed39","UiLocales":null,"Nonce":"4cca2332d2af46ab89c4349798fd7dc8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"194a7bd9e6c05f24177eb7ee6688471f","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"6097b00a8a4c4c7fb823b0e92f95ed39","nonce":"4cca2332d2af46ab89c4349798fd7dc8"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:21:33.317 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:21:33.317 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:21:33.318 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:21:33.318 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:21:33.502 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:21:33.502 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:21:33.506 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****PD2A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****z0eA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG4:00000006","TimeStamp":"2019-07-27T20:51:33.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:21:33.507 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"6097b00a8a4c4c7fb823b0e92f95ed39","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:21:33.507 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:21:33.507 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:23:07.066 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 02:23:07.112 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:23:07.112 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:23:07.112 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 02:23:07.112 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 02:23:07.112 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 02:23:07.112 +05:30 [DBG] Start userinfo request
2019-07-28 02:23:07.112 +05:30 [DBG] Bearer token not found
2019-07-28 02:23:07.112 +05:30 [ERR] No access token found.
2019-07-28 02:24:12.654 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 02:24:12.754 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:24:12.755 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:24:12.755 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 02:24:12.755 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 02:24:12.756 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 02:24:12.756 +05:30 [DBG] Start userinfo request
2019-07-28 02:24:12.756 +05:30 [DBG] Bearer token not found
2019-07-28 02:24:12.756 +05:30 [ERR] No access token found.
2019-07-28 02:25:20.817 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:25:20.882 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:25:20.882 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:25:20.883 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:25:20.883 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:25:20.883 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:25:20.883 +05:30 [DBG] Start discovery request
2019-07-28 02:25:21.423 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:25:21.509 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:25:21.509 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:25:21.510 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:25:21.510 +05:30 [DBG] Start authorize request
2019-07-28 02:25:21.510 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:25:21.510 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:25:22.068 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:25:22.068 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:25:22.225 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:25:22.611 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:25:22.747 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:25:23.175 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:25:23.176 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:25:23.176 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"a32565d082b742a39e7ad0df4a6abda9","UiLocales":null,"Nonce":"5e82bfa39fa54de8927daaa7fb7fb81b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"194a7bd9e6c05f24177eb7ee6688471f","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"a32565d082b742a39e7ad0df4a6abda9","nonce":"5e82bfa39fa54de8927daaa7fb7fb81b"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:25:23.226 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:25:23.226 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:25:23.226 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:25:23.241 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:25:23.468 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:25:23.468 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:25:23.472 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****1f6Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****VLAQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG7:00000002","TimeStamp":"2019-07-27T20:55:23.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:25:23.472 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"a32565d082b742a39e7ad0df4a6abda9","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:25:26.624 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:25:26.673 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:25:26.673 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:25:26.673 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:25:26.673 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:25:26.673 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:25:26.673 +05:30 [DBG] Start discovery request
2019-07-28 02:25:27.036 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:25:27.090 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:25:27.091 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:25:27.091 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:25:27.091 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:25:27.091 +05:30 [DBG] Start end session request validation
2019-07-28 02:25:27.091 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:25:27.091 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:25:29.134 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:25:29.204 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:25:29.204 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:25:29.204 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:25:29.205 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUG7:00000006","TimeStamp":"2019-07-27T20:55:29.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:25:29.301 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:25:29.302 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:25:29.302 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:25:29.302 +05:30 [DBG] Processing signout callback request
2019-07-28 02:25:29.742 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:25:29.742 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:25:29.742 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:25:29.742 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:25:29.742 +05:30 [INF] Successful signout callback.
2019-07-28 02:25:29.742 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:25:29.742 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 02:25:42.554 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:25:42.595 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:25:42.596 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:25:42.596 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:25:42.596 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:25:42.596 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:25:42.596 +05:30 [DBG] Start discovery request
2019-07-28 02:25:43.151 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:25:43.174 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 02:25:43.176 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 02:25:43.176 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 02:25:43.176 +05:30 [DBG] Start authorize request
2019-07-28 02:25:43.176 +05:30 [DBG] No user present in authorize request
2019-07-28 02:25:43.176 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:25:43.699 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:25:43.699 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:25:43.931 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:25:44.603 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:25:44.765 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:25:45.059 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:25:45.059 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:25:45.059 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e046c808ef064ac4a8a6b826a6f8aaca","UiLocales":null,"Nonce":"b1c5b6cc12b740f6bae61cf3f9d199bf","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"e046c808ef064ac4a8a6b826a6f8aaca","nonce":"b1c5b6cc12b740f6bae61cf3f9d199bf"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:25:45.059 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 02:25:45.488 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:25:46.580 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:25:46.580 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:25:46.782 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:25:47.204 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:25:47.441 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:25:48.137 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:25:48.138 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:25:48.922 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:25:48.922 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:26:00.054 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:26:00.120 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:26:00.698 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:26:00.699 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:26:00.853 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:26:01.168 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:26:01.332 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:26:01.663 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:26:01.664 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:26:01.905 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:26:01.905 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 02:26:01.905 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 02:26:01.905 +05:30 [DBG] Adding auth_time claim with value: 1564260961
2019-07-28 02:26:01.906 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:26:01.971 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUG7:0000000B","TimeStamp":"2019-07-27T20:56:01.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 02:26:02.568 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:26:02.569 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:26:02.599 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 02:26:02.600 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 02:26:02.600 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 02:26:02.600 +05:30 [DBG] Start authorize callback request
2019-07-28 02:26:02.600 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:26:02.600 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 02:26:02.997 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:26:02.997 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:26:03.118 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:26:03.353 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:26:03.462 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 02:26:03.755 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 02:26:03.756 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 02:26:03.756 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e046c808ef064ac4a8a6b826a6f8aaca","UiLocales":null,"Nonce":"b1c5b6cc12b740f6bae61cf3f9d199bf","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a8ab8e9ce741c4ca6e65451104069c92","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"e046c808ef064ac4a8a6b826a6f8aaca","nonce":"b1c5b6cc12b740f6bae61cf3f9d199bf"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 02:26:03.829 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 02:26:03.830 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 02:26:03.830 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 02:26:03.830 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:26:03.991 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 02:26:03.991 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 02:26:03.995 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Pj3A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****45mQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUG7:0000000C","TimeStamp":"2019-07-27T20:56:03.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 02:26:03.995 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"e046c808ef064ac4a8a6b826a6f8aaca","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 02:26:03.995 +05:30 [DBG] Augmenting SignInContext
2019-07-28 02:26:03.995 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 02:26:28.267 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 02:26:28.293 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 02:26:28.293 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 02:26:28.293 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 02:26:28.294 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 02:26:28.294 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 02:26:28.294 +05:30 [DBG] Start discovery request
2019-07-28 02:26:28.656 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 02:26:28.756 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 02:26:28.757 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 02:26:28.757 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 02:26:28.757 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 02:26:28.757 +05:30 [DBG] Start end session request validation
2019-07-28 02:26:28.757 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 02:26:28.757 +05:30 [DBG] Success validating end session request from null
2019-07-28 02:26:31.312 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 02:26:31.358 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 02:26:31.358 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 02:26:31.359 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 02:26:31.359 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUG7:00000011","TimeStamp":"2019-07-27T20:56:31.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 02:26:31.433 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 02:26:31.433 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 02:26:31.434 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 02:26:31.434 +05:30 [DBG] Processing signout callback request
2019-07-28 02:26:31.939 +05:30 [DBG] angular_spa found in database: true
2019-07-28 02:26:31.940 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 02:26:31.940 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 02:26:31.940 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 02:26:31.940 +05:30 [INF] Successful signout callback.
2019-07-28 02:26:31.940 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 02:26:31.940 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 09:57:59.012 +05:30 [INF] Removing 0 grants
2019-07-28 09:57:59.399 +05:30 [INF] Removing 0 device flow codes
2019-07-28 10:57:51.051 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 10:57:56.998 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 10:57:56.998 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 10:57:58.023 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 10:57:58.518 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 10:57:58.518 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 10:57:58.518 +05:30 [DBG] Start discovery request
2019-07-28 10:58:01.177 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 10:58:04.358 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 10:58:04.708 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 10:58:04.708 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 10:58:04.766 +05:30 [DBG] Start authorize request
2019-07-28 10:58:04.983 +05:30 [DBG] No user present in authorize request
2019-07-28 10:58:04.984 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:58:05.874 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 10:58:05.874 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 10:58:05.874 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 10:58:05.874 +05:30 [DBG] Start authorize request
2019-07-28 10:58:05.875 +05:30 [DBG] No user present in authorize request
2019-07-28 10:58:05.875 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:58:10.081 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:58:10.082 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:58:10.748 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:58:10.750 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:58:21.606 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:21.606 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:24.739 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:24.739 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:25.066 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:25.066 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:25.596 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:25.683 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 10:58:25.684 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:25.684 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 10:58:25.999 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0f8c7478bd194a0bb3455c9eccf05f75","UiLocales":null,"Nonce":"fbc7aab2792c4317abca59904c7d1e3c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0f8c7478bd194a0bb3455c9eccf05f75","nonce":"fbc7aab2792c4317abca59904c7d1e3c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 10:58:25.999 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ce64aacab7a8447abf722e8285e57e9e","UiLocales":null,"Nonce":"4d85fe21215446a6b6147780129e9df3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"ce64aacab7a8447abf722e8285e57e9e","nonce":"4d85fe21215446a6b6147780129e9df3"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 10:58:25.999 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 10:58:26.000 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 10:58:30.139 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:58:31.543 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:58:31.543 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:58:31.720 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:32.119 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:32.398 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:32.790 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:32.790 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 10:58:33.523 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:58:33.523 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:58:54.880 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 10:58:55.114 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:58:55.799 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:58:55.799 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:58:55.977 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:56.328 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:56.514 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:58:56.890 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:58:56.890 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 10:58:59.594 +05:30 [DBG] Augmenting SignInContext
2019-07-28 10:58:59.594 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 10:58:59.599 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 10:58:59.599 +05:30 [DBG] Adding auth_time claim with value: 1564291739
2019-07-28 10:58:59.822 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 10:59:00.033 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGB:00000002","TimeStamp":"2019-07-28T05:28:59.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 10:59:00.644 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:59:00.644 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:59:01.084 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 10:59:01.085 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 10:59:01.085 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 10:59:01.085 +05:30 [DBG] Start authorize callback request
2019-07-28 10:59:01.145 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 10:59:01.145 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:59:01.594 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:59:01.594 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:59:01.716 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:59:02.157 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:59:02.300 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:59:02.566 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:59:02.566 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 10:59:02.592 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0f8c7478bd194a0bb3455c9eccf05f75","UiLocales":null,"Nonce":"fbc7aab2792c4317abca59904c7d1e3c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e85993aa0a6edcf25e4be8039ba4d4d3","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0f8c7478bd194a0bb3455c9eccf05f75","nonce":"fbc7aab2792c4317abca59904c7d1e3c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 10:59:03.277 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 10:59:03.295 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 10:59:03.296 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 10:59:03.296 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 10:59:03.918 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 10:59:03.918 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 10:59:03.947 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Nnfg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****XIDQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGA:00000002","TimeStamp":"2019-07-28T05:29:03.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 10:59:03.976 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"0f8c7478bd194a0bb3455c9eccf05f75","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 10:59:03.977 +05:30 [DBG] Augmenting SignInContext
2019-07-28 10:59:03.986 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 10:59:18.499 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 10:59:18.529 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 10:59:18.529 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 10:59:18.529 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 10:59:18.529 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 10:59:18.529 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 10:59:18.529 +05:30 [DBG] Start discovery request
2019-07-28 10:59:19.046 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 10:59:19.162 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 10:59:19.198 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 10:59:19.198 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 10:59:19.199 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 10:59:19.199 +05:30 [DBG] Start end session request validation
2019-07-28 10:59:19.323 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 10:59:19.324 +05:30 [DBG] Success validating end session request from null
2019-07-28 10:59:22.969 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 10:59:23.042 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 10:59:23.042 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 10:59:23.054 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 10:59:23.054 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGA:00000003","TimeStamp":"2019-07-28T05:29:23.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 10:59:23.695 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 10:59:23.696 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 10:59:23.696 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 10:59:23.696 +05:30 [DBG] Processing signout callback request
2019-07-28 10:59:24.163 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:59:24.163 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:59:24.163 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 10:59:24.164 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 10:59:24.164 +05:30 [INF] Successful signout callback.
2019-07-28 10:59:24.164 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 10:59:24.164 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 10:59:55.886 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 10:59:56.011 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 10:59:56.011 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 10:59:56.011 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 10:59:56.011 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 10:59:56.012 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 10:59:56.012 +05:30 [DBG] Start discovery request
2019-07-28 10:59:56.402 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 10:59:56.584 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 10:59:56.585 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 10:59:56.585 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 10:59:56.585 +05:30 [DBG] Start authorize request
2019-07-28 10:59:56.585 +05:30 [DBG] No user present in authorize request
2019-07-28 10:59:56.585 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:59:57.227 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:59:57.228 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 10:59:57.376 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:59:57.808 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:59:58.067 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 10:59:58.852 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 10:59:58.853 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 10:59:58.853 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"654a77068e124effa9ad3a5cd7cb7ecb","UiLocales":null,"Nonce":"58b3a58f9b5c444787e9a801164edcd5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"654a77068e124effa9ad3a5cd7cb7ecb","nonce":"58b3a58f9b5c444787e9a801164edcd5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 10:59:58.854 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 10:59:59.011 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 10:59:59.763 +05:30 [DBG] angular_spa found in database: true
2019-07-28 10:59:59.764 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:00:00.049 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:00:00.577 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:00:00.792 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:00:01.172 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:00:01.172 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:00:01.928 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:00:01.928 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:04:04.425 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 11:04:04.488 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:04:05.108 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:04:05.108 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:04:05.272 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:04:05.732 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:04:05.904 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:04:06.286 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:04:06.287 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:04:06.824 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:04:06.899 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 11:04:06.899 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 11:04:06.899 +05:30 [DBG] Adding auth_time claim with value: 1564292046
2019-07-28 11:04:06.900 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:04:07.013 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGC:00000001","TimeStamp":"2019-07-28T05:34:07.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 11:04:07.640 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:04:07.640 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:04:07.853 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 11:04:07.853 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 11:04:07.853 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 11:04:07.853 +05:30 [DBG] Start authorize callback request
2019-07-28 11:04:07.853 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:04:07.854 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:04:13.913 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:04:13.914 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:04:14.031 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:04:14.272 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:04:14.409 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:04:14.656 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:04:14.656 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:04:14.656 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"654a77068e124effa9ad3a5cd7cb7ecb","UiLocales":null,"Nonce":"58b3a58f9b5c444787e9a801164edcd5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"57bfcdee500b3c4a399683ae877c351e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"654a77068e124effa9ad3a5cd7cb7ecb","nonce":"58b3a58f9b5c444787e9a801164edcd5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:04:14.756 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 11:04:14.756 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 11:04:14.756 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 11:04:14.756 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:04:14.964 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 11:04:14.965 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 11:04:14.968 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****2Gkw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fgfA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGC:00000002","TimeStamp":"2019-07-28T05:34:14.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 11:04:14.969 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"654a77068e124effa9ad3a5cd7cb7ecb","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 11:04:14.970 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:04:14.970 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:12:22.807 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:12:22.948 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:12:22.948 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:12:22.949 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:12:22.949 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:12:22.950 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:12:22.950 +05:30 [DBG] Start discovery request
2019-07-28 11:12:23.345 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:12:23.409 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 11:12:23.409 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 11:12:23.409 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 11:12:23.409 +05:30 [DBG] Processing signout request for 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:12:23.409 +05:30 [DBG] Start end session request validation
2019-07-28 11:12:23.409 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 11:12:23.410 +05:30 [DBG] Success validating end session request from null
2019-07-28 11:12:25.921 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 11:12:26.057 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 11:12:26.075 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 11:12:26.075 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 11:12:26.075 +05:30 [INF] {"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGD:00000004","TimeStamp":"2019-07-28T05:42:26.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 11:12:26.148 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 11:12:26.150 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 11:12:26.150 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 11:12:26.150 +05:30 [DBG] Processing signout callback request
2019-07-28 11:12:26.666 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:26.666 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:26.666 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 11:12:26.666 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 11:12:26.666 +05:30 [INF] Successful signout callback.
2019-07-28 11:12:26.666 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 11:12:26.666 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 11:12:28.457 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 11:12:28.458 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 11:12:28.458 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 11:12:28.458 +05:30 [DBG] Processing signout callback request
2019-07-28 11:12:29.408 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:12:29.540 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:29.541 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:29.541 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 11:12:29.542 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 11:12:29.542 +05:30 [INF] Successful signout callback.
2019-07-28 11:12:29.542 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 11:12:29.542 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 11:12:30.545 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:30.545 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:30.810 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:31.398 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:31.579 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:32.094 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:32.094 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:12:32.818 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:32.818 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:36.147 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:12:36.178 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:12:36.178 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:12:36.179 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:12:36.179 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:12:36.180 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:12:36.180 +05:30 [DBG] Start discovery request
2019-07-28 11:12:36.871 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:12:36.908 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 11:12:36.909 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 11:12:36.910 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 11:12:36.910 +05:30 [DBG] Start authorize request
2019-07-28 11:12:36.910 +05:30 [DBG] No user present in authorize request
2019-07-28 11:12:36.910 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:12:37.354 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:37.355 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:37.497 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:37.762 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:37.879 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:38.184 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:38.184 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:12:38.185 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"93621e35afde4e34b9ec82cbd814a1e0","UiLocales":null,"Nonce":"50a11e5c6e314c5ebc18e7f458038d8a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"93621e35afde4e34b9ec82cbd814a1e0","nonce":"50a11e5c6e314c5ebc18e7f458038d8a"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:12:38.186 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 11:12:38.252 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:12:38.921 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:38.921 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:39.089 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:39.495 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:39.711 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:40.049 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:40.049 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:12:40.618 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:40.618 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:52.054 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 11:12:52.099 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:12:52.705 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:52.705 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:52.872 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:53.265 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:53.442 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:53.805 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:53.806 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:12:54.047 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:12:54.047 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 11:12:54.047 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 11:12:54.047 +05:30 [DBG] Adding auth_time claim with value: 1564292574
2019-07-28 11:12:54.048 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:12:54.159 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGF:00000004","TimeStamp":"2019-07-28T05:42:54.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 11:12:54.912 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:54.912 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:55.007 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 11:12:55.008 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 11:12:55.008 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 11:12:55.008 +05:30 [DBG] Start authorize callback request
2019-07-28 11:12:55.008 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 11:12:55.008 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:12:55.485 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:12:55.485 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:12:55.654 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:56.016 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:56.500 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:12:56.940 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:12:56.940 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:12:56.940 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"93621e35afde4e34b9ec82cbd814a1e0","UiLocales":null,"Nonce":"50a11e5c6e314c5ebc18e7f458038d8a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4082163b455b5f39c96c5862fa0b07af","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"93621e35afde4e34b9ec82cbd814a1e0","nonce":"50a11e5c6e314c5ebc18e7f458038d8a"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:12:57.044 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 11:12:57.044 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 11:12:57.044 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 11:12:57.044 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 11:12:57.176 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 11:12:57.176 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 11:12:57.199 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****YC0A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_xyA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGF:00000005","TimeStamp":"2019-07-28T05:42:57.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 11:12:57.199 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"93621e35afde4e34b9ec82cbd814a1e0","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 11:12:57.199 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:12:57.200 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:39:30.918 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:39:33.415 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:39:33.415 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:39:33.567 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:39:33.836 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:39:33.836 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:39:33.836 +05:30 [DBG] Start discovery request
2019-07-28 11:39:35.538 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:39:36.951 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 11:39:37.187 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 11:39:37.187 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 11:39:37.199 +05:30 [DBG] Start authorize request
2019-07-28 11:39:37.342 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 11:39:37.342 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:39:38.340 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:39:38.390 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:39:39.182 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:39:39.751 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:39:39.968 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:39:40.300 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:39:40.314 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:39:40.386 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"01aee72203cc431790623035a5882c8a","UiLocales":null,"Nonce":"39480e4381b34426af3fd64cc5fd23cf","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4082163b455b5f39c96c5862fa0b07af","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"01aee72203cc431790623035a5882c8a","nonce":"39480e4381b34426af3fd64cc5fd23cf"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:39:41.447 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 11:39:41.448 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 11:39:41.448 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 11:39:41.449 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 11:39:42.150 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 11:39:42.150 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 11:39:42.199 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****xI9w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****sw2Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGG:00000002","TimeStamp":"2019-07-28T06:09:42.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 11:39:42.199 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"01aee72203cc431790623035a5882c8a","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 11:39:44.759 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:39:44.824 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:39:44.825 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:39:44.825 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:39:44.825 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:39:44.826 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:39:44.826 +05:30 [DBG] Start discovery request
2019-07-28 11:39:45.177 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:39:45.382 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 11:39:45.406 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:39:45.406 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:39:45.406 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 11:39:46.028 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 11:39:46.075 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 11:39:46.170 +05:30 [DBG] Start key discovery request
2019-07-28 11:39:46.693 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:39:46.718 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:39:46.718 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:39:47.414 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:39:47.486 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:39:47.486 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:39:47.486 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:39:47.597 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:39:47.597 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:39:47.597 +05:30 [DBG] Start userinfo request
2019-07-28 11:39:47.597 +05:30 [DBG] Bearer token found in header
2019-07-28 11:39:49.020 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:39:49.021 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:39:49.670 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:39:49.671 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:39:49.823 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:39:49.868 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564294181,"exp":1564297781,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564292574,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:39:49.877 +05:30 [DBG] Creating userinfo response
2019-07-28 11:39:49.877 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:39:49.877 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:39:49.984 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:39:49.984 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 11:39:49.985 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:39:50.089 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:39:50.191 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 11:39:50.191 +05:30 [DBG] End userinfo request
2019-07-28 11:39:51.207 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 11:39:51.208 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 11:39:51.208 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 11:39:51.208 +05:30 [DBG] Rendering check session result
2019-07-28 11:39:52.571 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:39:52.596 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:39:52.597 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:39:52.597 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:39:52.597 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:39:52.597 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:39:52.597 +05:30 [DBG] Start discovery request
2019-07-28 11:39:52.982 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:39:53.173 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 11:39:53.173 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 11:39:53.173 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 11:39:53.173 +05:30 [DBG] Rendering check session result
2019-07-28 11:40:22.194 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 11:40:22.218 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 11:40:22.218 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 11:40:22.218 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 11:40:22.219 +05:30 [DBG] Start end session request validation
2019-07-28 11:40:22.219 +05:30 [DBG] Start identity token validation
2019-07-28 11:40:22.712 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:22.712 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:22.727 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 11:40:22.784 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:40:22.804 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564294182,"exp":1564294482,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"39480e4381b34426af3fd64cc5fd23cf","iat":1564294182,"at_hash":"0Q33vJIorcb3-8T9RZRb4A","sid":"4082163b455b5f39c96c5862fa0b07af","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564292574,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:40:22.805 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 11:40:22.817 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 11:40:24.182 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 11:40:24.184 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 11:40:24.196 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 11:40:24.201 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGG:0000000B","TimeStamp":"2019-07-28T06:10:24.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 11:40:26.234 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 11:40:26.237 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 11:40:26.238 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 11:40:26.238 +05:30 [DBG] Processing signout callback request
2019-07-28 11:40:26.822 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:26.822 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:26.822 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 11:40:26.822 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 11:40:26.822 +05:30 [INF] Successful signout callback.
2019-07-28 11:40:26.822 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 11:40:26.822 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 11:40:36.583 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:40:36.609 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:40:36.610 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:40:36.610 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:40:36.611 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:40:36.611 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:40:36.611 +05:30 [DBG] Start discovery request
2019-07-28 11:40:36.912 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:40:37.072 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 11:40:37.072 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 11:40:37.073 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 11:40:37.073 +05:30 [DBG] Start authorize request
2019-07-28 11:40:37.075 +05:30 [DBG] No user present in authorize request
2019-07-28 11:40:37.075 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:40:37.469 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:37.470 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:37.614 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:38.022 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:38.139 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:38.381 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:38.382 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:40:38.382 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"63b706d1b1504a708e0c83e4814767b2","UiLocales":null,"Nonce":"4a51413b083e42e9bc529ca2b4809b41","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"63b706d1b1504a708e0c83e4814767b2","nonce":"4a51413b083e42e9bc529ca2b4809b41"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:40:38.382 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 11:40:38.596 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:40:39.329 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:39.330 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:39.540 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:40.008 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:40.282 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:40.630 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:40.630 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:40:41.243 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:41.243 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:49.969 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:40:50.033 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:40:50.033 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:40:50.034 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:40:50.063 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:40:50.063 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:40:50.063 +05:30 [DBG] Start userinfo request
2019-07-28 11:40:50.063 +05:30 [DBG] Bearer token not found
2019-07-28 11:40:50.063 +05:30 [ERR] No access token found.
2019-07-28 11:40:50.232 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:40:50.266 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:40:50.266 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:40:50.266 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:40:50.267 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:40:50.267 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:40:50.267 +05:30 [DBG] Start userinfo request
2019-07-28 11:40:50.267 +05:30 [DBG] Bearer token not found
2019-07-28 11:40:50.267 +05:30 [ERR] No access token found.
2019-07-28 11:40:50.457 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:40:50.487 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:40:50.487 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:40:50.487 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:40:50.487 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:40:50.487 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:40:50.488 +05:30 [DBG] Start userinfo request
2019-07-28 11:40:50.488 +05:30 [DBG] Bearer token not found
2019-07-28 11:40:50.488 +05:30 [ERR] No access token found.
2019-07-28 11:40:54.256 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:40:54.330 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:40:54.330 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:40:54.330 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:40:54.331 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:40:54.331 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:40:54.331 +05:30 [DBG] Start discovery request
2019-07-28 11:40:54.690 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:40:54.766 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 11:40:54.802 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 11:40:54.803 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 11:40:54.803 +05:30 [DBG] Start authorize request
2019-07-28 11:40:54.804 +05:30 [DBG] No user present in authorize request
2019-07-28 11:40:54.804 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:40:55.215 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:55.216 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:55.354 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:55.602 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:55.720 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:55.966 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:55.967 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:40:55.967 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c61510ba39a8405fb2b9ce83aebb1498","UiLocales":null,"Nonce":"9f007b23402249b3a8ec69f27eb3136c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c61510ba39a8405fb2b9ce83aebb1498","nonce":"9f007b23402249b3a8ec69f27eb3136c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:40:55.968 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 11:40:56.065 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:40:56.798 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:56.799 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:40:57.005 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:57.376 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:57.569 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:40:57.967 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:40:57.968 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:40:58.576 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:40:58.576 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:13.639 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 11:41:13.776 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:41:14.412 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:14.412 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:14.582 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:15.043 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:41:15.244 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:15.568 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:41:15.568 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:41:15.972 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:41:15.972 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 11:41:15.972 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 11:41:15.972 +05:30 [DBG] Adding auth_time claim with value: 1564294275
2019-07-28 11:41:15.973 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:41:16.141 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGG:00000016","TimeStamp":"2019-07-28T06:11:16.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 11:41:16.774 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:16.775 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:16.924 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 11:41:16.933 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 11:41:16.933 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 11:41:16.933 +05:30 [DBG] Start authorize callback request
2019-07-28 11:41:16.933 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:41:16.933 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:41:17.357 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:17.357 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:17.492 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:17.730 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:41:17.837 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:18.160 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:41:18.160 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:41:18.161 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"c61510ba39a8405fb2b9ce83aebb1498","UiLocales":null,"Nonce":"9f007b23402249b3a8ec69f27eb3136c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"13bbd9243acc898dcf4e1665d2673af6","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"c61510ba39a8405fb2b9ce83aebb1498","nonce":"9f007b23402249b3a8ec69f27eb3136c"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:41:18.256 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 11:41:18.256 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 11:41:18.256 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 11:41:18.257 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:41:18.390 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 11:41:18.390 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 11:41:18.395 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****hIkw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****hXRw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGG:00000017","TimeStamp":"2019-07-28T06:11:18.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 11:41:18.396 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"c61510ba39a8405fb2b9ce83aebb1498","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 11:41:18.396 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:41:18.397 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:41:18.839 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:41:18.929 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:18.929 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:18.929 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:41:18.930 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:41:18.930 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:41:18.930 +05:30 [DBG] Start discovery request
2019-07-28 11:41:19.414 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:41:19.474 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 11:41:19.498 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:19.498 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:19.498 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 11:41:19.499 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 11:41:19.499 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 11:41:19.499 +05:30 [DBG] Start key discovery request
2019-07-28 11:41:19.548 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:41:19.579 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:19.580 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:19.587 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:41:19.621 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:19.621 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:19.621 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:41:19.622 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:41:19.622 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:41:19.622 +05:30 [DBG] Start userinfo request
2019-07-28 11:41:19.622 +05:30 [DBG] Bearer token found in header
2019-07-28 11:41:20.180 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:20.181 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:20.813 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:20.813 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:20.894 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:41:20.894 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564294278,"exp":1564297878,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564294275,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:41:20.920 +05:30 [DBG] Creating userinfo response
2019-07-28 11:41:20.921 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:20.921 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:21.120 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:21.148 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 11:41:21.148 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:21.362 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:21.471 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 11:41:21.471 +05:30 [DBG] End userinfo request
2019-07-28 11:41:21.544 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 11:41:21.544 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 11:41:21.544 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 11:41:21.544 +05:30 [DBG] Rendering check session result
2019-07-28 11:41:22.171 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:41:22.203 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:22.204 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:22.205 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:41:22.205 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:41:22.206 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:41:22.206 +05:30 [DBG] Start discovery request
2019-07-28 11:41:22.604 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:41:22.639 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 11:41:22.639 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 11:41:22.640 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 11:41:22.640 +05:30 [DBG] Rendering check session result
2019-07-28 11:41:33.684 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:41:33.722 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:33.722 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:34.371 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:41:34.394 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:34.395 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:34.395 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:41:34.395 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:41:34.395 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:41:34.395 +05:30 [DBG] Start userinfo request
2019-07-28 11:41:34.395 +05:30 [DBG] Bearer token found in header
2019-07-28 11:41:35.278 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:35.278 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:36.783 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:36.821 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:36.908 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:41:36.908 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564294278,"exp":1564297878,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564294275,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:41:36.908 +05:30 [DBG] Creating userinfo response
2019-07-28 11:41:36.908 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:36.908 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:37.218 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:37.218 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 11:41:37.218 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:37.458 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:37.700 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 11:41:37.700 +05:30 [DBG] End userinfo request
2019-07-28 11:41:40.393 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:41:40.504 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:40.505 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:40.549 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:41:40.577 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:41:40.577 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:41:40.577 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:41:40.578 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:41:40.578 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:41:40.578 +05:30 [DBG] Start userinfo request
2019-07-28 11:41:40.578 +05:30 [DBG] Bearer token found in header
2019-07-28 11:41:41.258 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:41.259 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:41.707 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:41.707 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:41.749 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:41:41.750 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564294278,"exp":1564297878,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564294275,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:41:41.751 +05:30 [DBG] Creating userinfo response
2019-07-28 11:41:41.751 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:41.751 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:41.854 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:41.854 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 11:41:41.854 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:41:41.927 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:41:42.039 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 11:41:42.039 +05:30 [DBG] End userinfo request
2019-07-28 11:41:49.928 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 11:41:49.928 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 11:41:49.928 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 11:41:49.929 +05:30 [DBG] Processing signout request for 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:41:49.929 +05:30 [DBG] Start end session request validation
2019-07-28 11:41:49.929 +05:30 [DBG] Start identity token validation
2019-07-28 11:41:50.333 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:50.333 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:50.333 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 11:41:50.378 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:41:50.378 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564294278,"exp":1564294578,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"9f007b23402249b3a8ec69f27eb3136c","iat":1564294278,"at_hash":"3P68hxPjkIPWQ91r1mZ8ig","sid":"13bbd9243acc898dcf4e1665d2673af6","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564294275,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:41:50.379 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 11:41:50.379 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 11:41:50.569 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 11:41:50.570 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 11:41:50.570 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 11:41:50.570 +05:30 [INF] {"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGG:00000024","TimeStamp":"2019-07-28T06:11:50.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 11:41:50.958 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 11:41:50.958 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 11:41:50.958 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 11:41:50.959 +05:30 [DBG] Processing signout callback request
2019-07-28 11:41:51.338 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:41:51.338 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:41:51.338 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 11:41:51.338 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 11:41:51.339 +05:30 [INF] Successful signout callback.
2019-07-28 11:41:51.339 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 11:41:51.339 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 11:51:28.321 +05:30 [INF] Removing 0 grants
2019-07-28 11:51:28.359 +05:30 [INF] Removing 0 device flow codes
2019-07-28 11:57:11.250 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:57:12.273 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:57:12.273 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:57:12.318 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:57:12.391 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:57:12.391 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:57:12.391 +05:30 [DBG] Start discovery request
2019-07-28 11:57:13.069 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:57:13.526 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 11:57:13.527 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 11:57:13.527 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 11:57:13.527 +05:30 [DBG] Start authorize request
2019-07-28 11:57:13.701 +05:30 [DBG] No user present in authorize request
2019-07-28 11:57:13.701 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:57:14.652 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:14.678 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:14.892 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:15.551 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:15.719 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:16.404 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:16.405 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:57:16.436 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0687cdb1714a4798b6aff5d8fdbddc07","UiLocales":null,"Nonce":"a743e1b6ed764939b4b15b2619400156","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0687cdb1714a4798b6aff5d8fdbddc07","nonce":"a743e1b6ed764939b4b15b2619400156"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:57:16.437 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 11:57:16.894 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:57:17.699 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:17.699 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:17.935 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:18.698 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:18.981 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:19.620 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:19.620 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:57:20.364 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:20.364 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:40.346 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 11:57:40.462 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:57:41.331 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:41.332 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:41.522 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:42.108 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:42.308 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:42.838 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:42.839 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:57:44.099 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:57:44.099 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 11:57:44.099 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 11:57:44.099 +05:30 [DBG] Adding auth_time claim with value: 1564295264
2019-07-28 11:57:44.115 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:57:44.231 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGH:00000005","TimeStamp":"2019-07-28T06:27:44.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 11:57:45.006 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:45.006 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:45.113 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 11:57:45.113 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 11:57:45.113 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 11:57:45.113 +05:30 [DBG] Start authorize callback request
2019-07-28 11:57:45.113 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:57:45.114 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 11:57:45.669 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:45.669 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:45.817 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:46.242 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:46.413 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:46.881 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 11:57:46.881 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 11:57:46.882 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0687cdb1714a4798b6aff5d8fdbddc07","UiLocales":null,"Nonce":"a743e1b6ed764939b4b15b2619400156","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d6cf5b326b11a3d2ad60d48cb9a7bdb7","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0687cdb1714a4798b6aff5d8fdbddc07","nonce":"a743e1b6ed764939b4b15b2619400156"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 11:57:47.310 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 11:57:47.310 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 11:57:47.310 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 11:57:47.310 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 11:57:47.519 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 11:57:47.519 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 11:57:47.524 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****goaQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Jpbw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGH:00000006","TimeStamp":"2019-07-28T06:27:47.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 11:57:47.524 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"0687cdb1714a4798b6aff5d8fdbddc07","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 11:57:47.524 +05:30 [DBG] Augmenting SignInContext
2019-07-28 11:57:47.524 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 11:57:48.692 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:57:48.755 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:57:48.755 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:57:48.755 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:57:48.756 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:57:48.756 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:57:48.756 +05:30 [DBG] Start discovery request
2019-07-28 11:57:49.169 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:57:49.201 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 11:57:49.237 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:57:49.237 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:57:49.237 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 11:57:49.237 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 11:57:49.237 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 11:57:49.238 +05:30 [DBG] Start key discovery request
2019-07-28 11:57:49.330 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:57:49.379 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:57:49.379 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:57:49.523 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:57:49.561 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:57:49.561 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:57:49.561 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:57:49.562 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:57:49.562 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:57:49.562 +05:30 [DBG] Start userinfo request
2019-07-28 11:57:49.562 +05:30 [DBG] Bearer token found in header
2019-07-28 11:57:50.240 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:50.240 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:50.754 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:57:50.754 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:57:50.811 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:57:50.811 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564295267,"exp":1564298867,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564295264,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:57:50.811 +05:30 [DBG] Creating userinfo response
2019-07-28 11:57:50.811 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:57:50.812 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:57:51.069 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:51.070 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 11:57:51.070 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:57:51.309 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:57:51.533 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 11:57:51.533 +05:30 [DBG] End userinfo request
2019-07-28 11:57:51.767 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 11:57:51.767 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 11:57:51.767 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 11:57:51.767 +05:30 [DBG] Rendering check session result
2019-07-28 11:57:53.248 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 11:57:54.777 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:57:54.778 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:57:54.779 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 11:57:54.780 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 11:57:54.780 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 11:57:54.780 +05:30 [DBG] Start discovery request
2019-07-28 11:57:55.380 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 11:57:55.688 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 11:57:55.688 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 11:57:55.689 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 11:57:55.689 +05:30 [DBG] Rendering check session result
2019-07-28 11:59:19.244 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:59:19.293 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:59:19.293 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:59:19.317 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 11:59:19.358 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 11:59:19.358 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 11:59:19.358 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 11:59:19.358 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 11:59:19.358 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 11:59:19.358 +05:30 [DBG] Start userinfo request
2019-07-28 11:59:19.358 +05:30 [DBG] Bearer token found in header
2019-07-28 11:59:19.847 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:59:19.848 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:59:20.300 +05:30 [DBG] angular_spa found in database: true
2019-07-28 11:59:20.300 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 11:59:20.387 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 11:59:20.387 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564295267,"exp":1564298867,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564295264,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 11:59:20.388 +05:30 [DBG] Creating userinfo response
2019-07-28 11:59:20.388 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:59:20.388 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:59:20.705 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:59:20.705 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 11:59:20.705 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 11:59:20.943 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 11:59:21.083 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 11:59:21.084 +05:30 [DBG] End userinfo request
2019-07-28 12:10:24.828 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:10:27.115 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:10:27.115 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:10:27.244 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:10:27.352 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:10:27.352 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:10:27.352 +05:30 [DBG] Start discovery request
2019-07-28 12:10:28.041 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:10:29.154 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:10:29.154 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:10:29.155 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:10:29.155 +05:30 [DBG] Rendering check session result
2019-07-28 12:10:51.519 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:10:51.520 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:10:51.520 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:10:51.520 +05:30 [DBG] Start authorize request
2019-07-28 12:10:51.521 +05:30 [DBG] No user present in authorize request
2019-07-28 12:10:51.521 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:10:52.315 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:10:52.316 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:10:53.406 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/renew-callback.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/renew-callback.html","response_type":"id_token","scope":"openid","state":"b5d4d0d75f2c40b486433a8c2827f7ca","nonce":"c9529256258d4f2ca42f948a926a2ab0","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:10:56.564 +05:30 [ERR] Request validation failed
2019-07-28 12:10:56.564 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/renew-callback.html","response_type":"id_token","scope":"openid","state":"b5d4d0d75f2c40b486433a8c2827f7ca","nonce":"c9529256258d4f2ca42f948a926a2ab0","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:10:56.934 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIOU0OMUGJ:00000003","TimeStamp":"2019-07-28T06:40:56.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-28 12:11:05.394 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:11:05.510 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:11:05.511 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:11:05.514 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:11:05.515 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:11:05.515 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:11:05.515 +05:30 [DBG] Start discovery request
2019-07-28 12:11:06.064 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:11:06.324 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:11:06.324 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:11:06.324 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:11:06.324 +05:30 [DBG] Start authorize request
2019-07-28 12:11:06.324 +05:30 [DBG] No user present in authorize request
2019-07-28 12:11:06.324 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:11:07.035 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:07.035 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:07.237 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:07.675 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:07.859 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:08.467 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:08.468 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:11:08.469 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0153761b34c8409aa7dce3f64763d4f5","UiLocales":null,"Nonce":"521953fa1fae4b7cbe5c3640c53bc1da","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0153761b34c8409aa7dce3f64763d4f5","nonce":"521953fa1fae4b7cbe5c3640c53bc1da"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:11:08.469 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 12:11:08.733 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:11:09.452 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:09.452 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:09.761 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:10.310 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:10.519 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:11.065 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:11.066 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:11:11.700 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:11.701 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:25.772 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 12:11:26.040 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:11:26.743 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:26.743 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:26.934 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:27.526 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:27.789 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:28.379 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:28.380 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:11:28.677 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:11:28.677 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 12:11:28.677 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 12:11:28.677 +05:30 [DBG] Adding auth_time claim with value: 1564296088
2019-07-28 12:11:28.690 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:11:28.788 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGL:00000002","TimeStamp":"2019-07-28T06:41:28.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 12:11:29.499 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:29.499 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:29.558 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 12:11:29.558 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 12:11:29.558 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 12:11:29.558 +05:30 [DBG] Start authorize callback request
2019-07-28 12:11:29.559 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:11:29.559 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:11:30.065 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:30.065 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:30.216 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:30.633 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:30.783 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:31.143 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:11:31.144 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:11:31.144 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0153761b34c8409aa7dce3f64763d4f5","UiLocales":null,"Nonce":"521953fa1fae4b7cbe5c3640c53bc1da","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f272f77417e4b327f9fef6c6de5d604d","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0153761b34c8409aa7dce3f64763d4f5","nonce":"521953fa1fae4b7cbe5c3640c53bc1da"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:11:31.216 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:11:31.216 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:11:31.216 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:11:31.216 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:11:31.406 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:11:31.406 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:11:31.412 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lNTg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****M2Vg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGJ:00000009","TimeStamp":"2019-07-28T06:41:31.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:11:31.412 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"0153761b34c8409aa7dce3f64763d4f5","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:11:31.412 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:11:31.413 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:11:31.845 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:11:31.878 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:11:31.878 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:11:31.878 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:11:31.878 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:11:31.879 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:11:31.879 +05:30 [DBG] Start discovery request
2019-07-28 12:11:32.319 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:11:32.346 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:11:32.389 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:11:32.389 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:11:32.390 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:11:32.391 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:11:32.391 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:11:32.391 +05:30 [DBG] Start key discovery request
2019-07-28 12:11:32.423 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:11:32.447 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:11:32.448 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:11:32.467 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:11:32.507 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:11:32.507 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:11:32.508 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:11:32.508 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:11:32.508 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:11:32.508 +05:30 [DBG] Start userinfo request
2019-07-28 12:11:32.508 +05:30 [DBG] Bearer token found in header
2019-07-28 12:11:33.066 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:33.066 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:33.607 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:11:33.607 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:11:33.658 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:11:33.659 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296091,"exp":1564299691,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296088,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:11:33.659 +05:30 [DBG] Creating userinfo response
2019-07-28 12:11:33.659 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:11:33.660 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:11:33.868 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:33.869 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:11:33.869 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:11:34.061 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:11:34.218 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:11:34.301 +05:30 [DBG] End userinfo request
2019-07-28 12:11:34.420 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:11:34.420 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:11:34.431 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:11:34.431 +05:30 [DBG] Rendering check session result
2019-07-28 12:11:35.142 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:11:35.175 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:11:35.175 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:11:35.176 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:11:35.176 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:11:35.177 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:11:35.177 +05:30 [DBG] Start discovery request
2019-07-28 12:11:35.740 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:11:35.942 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:11:35.942 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:11:35.942 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:11:35.942 +05:30 [DBG] Rendering check session result
2019-07-28 12:12:08.148 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:12:08.149 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:12:08.149 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:12:08.149 +05:30 [DBG] Start authorize request
2019-07-28 12:12:08.149 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:12:08.150 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:12:08.812 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:08.813 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:08.952 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:09.360 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:12:09.501 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:09.938 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:12:09.939 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:12:09.939 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"58c33bf7934c4253a632a17caa401250","UiLocales":null,"Nonce":"393a1b5f40a641698696a26d665db12e","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f272f77417e4b327f9fef6c6de5d604d","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"58c33bf7934c4253a632a17caa401250","nonce":"393a1b5f40a641698696a26d665db12e"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:12:10.023 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:12:10.083 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:12:10.084 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:12:10.084 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:12:10.215 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:12:10.216 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:12:10.221 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****sSMQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****woig","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGJ:0000000B","TimeStamp":"2019-07-28T06:42:10.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:12:10.222 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"58c33bf7934c4253a632a17caa401250","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:12:10.700 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:12:10.765 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:12:10.765 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:12:10.766 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:12:10.766 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:12:10.766 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:12:10.766 +05:30 [DBG] Start discovery request
2019-07-28 12:12:11.174 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:12:11.209 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:12:11.268 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:12:11.268 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:12:11.269 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:12:11.269 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:12:11.269 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:12:11.269 +05:30 [DBG] Start key discovery request
2019-07-28 12:12:11.314 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:12:11.353 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:12:11.354 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:12:11.385 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:12:11.459 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:12:11.460 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:12:11.460 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:12:11.461 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:12:11.461 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:12:11.462 +05:30 [DBG] Start userinfo request
2019-07-28 12:12:11.462 +05:30 [DBG] Bearer token found in header
2019-07-28 12:12:12.043 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:12.061 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:12.560 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:12.561 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:12.628 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:12:12.636 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296130,"exp":1564299730,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296088,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:12:12.637 +05:30 [DBG] Creating userinfo response
2019-07-28 12:12:12.637 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:12:12.637 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:12:12.844 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:12.845 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:12:12.845 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:12:13.037 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:13.227 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:12:13.227 +05:30 [DBG] End userinfo request
2019-07-28 12:12:13.279 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:12:13.279 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:12:13.279 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:12:13.279 +05:30 [DBG] Rendering check session result
2019-07-28 12:12:14.228 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:12:14.271 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:12:14.271 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:12:14.335 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:12:14.336 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:12:14.336 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:12:14.336 +05:30 [DBG] Start discovery request
2019-07-28 12:12:15.244 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:12:15.785 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:12:15.785 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:12:15.785 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:12:15.786 +05:30 [DBG] Rendering check session result
2019-07-28 12:12:21.387 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 12:12:21.398 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 12:12:21.398 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 12:12:21.399 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:12:21.399 +05:30 [DBG] Start end session request validation
2019-07-28 12:12:21.399 +05:30 [DBG] Start identity token validation
2019-07-28 12:12:21.897 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:21.897 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:21.949 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 12:12:22.034 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:12:22.034 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296130,"exp":1564296430,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"393a1b5f40a641698696a26d665db12e","iat":1564296130,"at_hash":"1XemvQ2TIukhXTULcPbvdw","sid":"f272f77417e4b327f9fef6c6de5d604d","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296088,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:12:22.034 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 12:12:22.035 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 12:12:22.197 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 12:12:22.197 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 12:12:22.198 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 12:12:22.198 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGK:00000006","TimeStamp":"2019-07-28T06:42:22.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 12:12:23.193 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 12:12:23.194 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 12:12:23.195 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 12:12:23.195 +05:30 [DBG] Processing signout callback request
2019-07-28 12:12:23.779 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:23.779 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:23.779 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 12:12:23.780 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 12:12:23.780 +05:30 [INF] Successful signout callback.
2019-07-28 12:12:23.780 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 12:12:23.780 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 12:12:51.421 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:12:51.498 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:12:51.498 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:12:51.498 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:12:51.499 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:12:51.499 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:12:51.499 +05:30 [DBG] Start discovery request
2019-07-28 12:12:52.123 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:12:52.342 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:12:52.439 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:12:52.439 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:12:52.439 +05:30 [DBG] Start authorize request
2019-07-28 12:12:52.439 +05:30 [DBG] No user present in authorize request
2019-07-28 12:12:52.439 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:12:52.972 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:52.972 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:53.102 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:53.546 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:12:53.687 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:54.093 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:12:54.093 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:12:54.094 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7510bb56914f486ebdfe4645394e16a6","UiLocales":null,"Nonce":"1699510527fa4204a90080191a634927","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"7510bb56914f486ebdfe4645394e16a6","nonce":"1699510527fa4204a90080191a634927"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:12:54.094 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 12:12:54.263 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:12:54.958 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:54.958 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:12:55.179 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:55.781 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:12:56.202 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:12:56.751 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:12:56.782 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:12:57.444 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:12:57.444 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:09.028 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 12:13:09.175 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:13:10.250 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:10.250 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:10.522 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:11.112 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:11.350 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:11.904 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:11.904 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:13:12.215 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:13:12.216 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 12:13:12.216 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 12:13:12.216 +05:30 [DBG] Adding auth_time claim with value: 1564296192
2019-07-28 12:13:12.216 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:13:12.344 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGM:00000008","TimeStamp":"2019-07-28T06:43:12.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 12:13:13.328 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:13.328 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:13.396 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 12:13:13.397 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 12:13:13.397 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 12:13:13.397 +05:30 [DBG] Start authorize callback request
2019-07-28 12:13:13.397 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:13:13.397 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:13:13.981 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:13.981 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:14.130 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:14.553 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:14.682 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:15.083 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:15.083 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:13:15.084 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7510bb56914f486ebdfe4645394e16a6","UiLocales":null,"Nonce":"1699510527fa4204a90080191a634927","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bc3b2acbade628f01c5af4cbdcbfcfb3","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"7510bb56914f486ebdfe4645394e16a6","nonce":"1699510527fa4204a90080191a634927"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:13:15.143 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:13:15.144 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:13:15.144 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:13:15.144 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:13:15.315 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:13:15.316 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:13:15.324 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****6MRg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6uVw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGJ:0000000F","TimeStamp":"2019-07-28T06:43:15.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:13:15.325 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"7510bb56914f486ebdfe4645394e16a6","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:13:15.325 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:13:15.325 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:13:15.799 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:13:15.832 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:15.832 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:15.833 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:13:15.833 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:13:15.833 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:13:15.834 +05:30 [DBG] Start discovery request
2019-07-28 12:13:16.264 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:13:16.274 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:13:16.307 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:16.307 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:16.307 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:13:16.307 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:13:16.307 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:13:16.307 +05:30 [DBG] Start key discovery request
2019-07-28 12:13:16.400 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:13:16.453 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:16.454 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:16.470 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:13:16.505 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:16.505 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:16.505 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:13:16.506 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:13:16.506 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:13:16.506 +05:30 [DBG] Start userinfo request
2019-07-28 12:13:16.506 +05:30 [DBG] Bearer token found in header
2019-07-28 12:13:17.013 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:17.014 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:17.605 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:17.605 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:17.677 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:13:17.678 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296195,"exp":1564299795,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296192,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:13:17.678 +05:30 [DBG] Creating userinfo response
2019-07-28 12:13:17.678 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:17.678 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:17.921 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:17.921 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:13:17.922 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:18.146 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:18.319 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:13:18.319 +05:30 [DBG] End userinfo request
2019-07-28 12:13:18.385 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:13:18.385 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:13:18.386 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:13:18.386 +05:30 [DBG] Rendering check session result
2019-07-28 12:13:19.049 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:13:19.116 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:19.116 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:19.116 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:13:19.117 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:13:19.117 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:13:19.118 +05:30 [DBG] Start discovery request
2019-07-28 12:13:19.798 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:13:20.463 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:13:20.463 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:13:20.463 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:13:20.463 +05:30 [DBG] Rendering check session result
2019-07-28 12:13:40.978 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:13:40.979 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:13:40.980 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:13:40.980 +05:30 [DBG] Start authorize request
2019-07-28 12:13:40.980 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:13:40.980 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:13:41.680 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:41.680 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:41.842 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:42.235 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:42.371 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:42.772 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:42.772 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:13:42.773 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"53bee27071a04d09a4f98d3da5cf2e37","UiLocales":null,"Nonce":"b5cc3cf236e14a6689fe1e2a1cb68385","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bc3b2acbade628f01c5af4cbdcbfcfb3","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"53bee27071a04d09a4f98d3da5cf2e37","nonce":"b5cc3cf236e14a6689fe1e2a1cb68385"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:13:42.821 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:13:42.821 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:13:42.821 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:13:42.821 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:13:43.011 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:13:43.011 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:13:43.016 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gWDw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2iUw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGJ:00000011","TimeStamp":"2019-07-28T06:43:43.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:13:43.016 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"53bee27071a04d09a4f98d3da5cf2e37","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:13:43.419 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:13:43.447 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:43.447 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:43.448 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:13:43.448 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:13:43.448 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:13:43.448 +05:30 [DBG] Start discovery request
2019-07-28 12:13:43.868 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:13:43.878 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:13:43.923 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:43.924 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:43.924 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:13:43.925 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:13:43.925 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:13:43.925 +05:30 [DBG] Start key discovery request
2019-07-28 12:13:43.975 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:13:44.001 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:44.001 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:44.014 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:13:44.057 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:44.057 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:44.057 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:13:44.058 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:13:44.058 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:13:44.058 +05:30 [DBG] Start userinfo request
2019-07-28 12:13:44.058 +05:30 [DBG] Bearer token found in header
2019-07-28 12:13:44.613 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:44.613 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:45.102 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:45.102 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:45.167 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:13:45.168 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296222,"exp":1564299822,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296192,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:13:45.168 +05:30 [DBG] Creating userinfo response
2019-07-28 12:13:45.168 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:45.168 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:45.425 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:45.425 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:13:45.425 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:45.633 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:45.793 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:13:45.793 +05:30 [DBG] End userinfo request
2019-07-28 12:13:45.827 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:13:45.828 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:13:45.828 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:13:45.828 +05:30 [DBG] Rendering check session result
2019-07-28 12:13:46.298 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:13:46.333 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:46.333 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:46.333 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:13:46.334 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:13:46.334 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:13:46.334 +05:30 [DBG] Start discovery request
2019-07-28 12:13:46.815 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:13:47.082 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:13:47.082 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:13:47.082 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:13:47.082 +05:30 [DBG] Rendering check session result
2019-07-28 12:13:54.150 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:13:54.152 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:13:54.152 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:13:54.152 +05:30 [DBG] Start authorize request
2019-07-28 12:13:54.153 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:13:54.153 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:13:54.664 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:54.665 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:54.797 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:55.333 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:55.586 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:56.117 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:13:56.118 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:13:56.118 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"79c56d7f56174bfcb985a80eee21e133","UiLocales":null,"Nonce":"e06216f411d84f4cb3891f55b2cfd343","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bc3b2acbade628f01c5af4cbdcbfcfb3","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"79c56d7f56174bfcb985a80eee21e133","nonce":"e06216f411d84f4cb3891f55b2cfd343"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:13:56.174 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:13:56.174 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:13:56.175 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:13:56.175 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:13:56.405 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:13:56.405 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:13:56.409 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****W_rw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****q3Ag","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGM:0000000D","TimeStamp":"2019-07-28T06:43:56.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:13:56.410 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"79c56d7f56174bfcb985a80eee21e133","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:13:56.805 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:13:56.835 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:56.835 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:56.835 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:13:56.835 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:13:56.835 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:13:56.835 +05:30 [DBG] Start discovery request
2019-07-28 12:13:57.215 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:13:57.268 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:13:57.304 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:57.305 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:57.305 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:13:57.305 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:13:57.305 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:13:57.305 +05:30 [DBG] Start key discovery request
2019-07-28 12:13:57.341 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:13:57.378 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:57.378 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:57.384 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:13:57.419 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:57.419 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:57.419 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:13:57.419 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:13:57.420 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:13:57.420 +05:30 [DBG] Start userinfo request
2019-07-28 12:13:57.420 +05:30 [DBG] Bearer token found in header
2019-07-28 12:13:57.947 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:57.948 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:58.400 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:13:58.401 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:13:58.461 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:13:58.462 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296236,"exp":1564299836,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296192,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:13:58.462 +05:30 [DBG] Creating userinfo response
2019-07-28 12:13:58.503 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:58.504 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:58.706 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:58.706 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:13:58.706 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:13:58.911 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:13:59.097 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:13:59.097 +05:30 [DBG] End userinfo request
2019-07-28 12:13:59.125 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:13:59.126 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:13:59.127 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:13:59.127 +05:30 [DBG] Rendering check session result
2019-07-28 12:13:59.404 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:13:59.456 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:13:59.456 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:13:59.456 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:13:59.456 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:13:59.456 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:13:59.456 +05:30 [DBG] Start discovery request
2019-07-28 12:13:59.912 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:14:00.191 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:14:00.191 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:14:00.191 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:14:00.192 +05:30 [DBG] Rendering check session result
2019-07-28 12:14:04.713 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 12:14:04.715 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 12:14:04.715 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 12:14:04.715 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:14:04.715 +05:30 [DBG] Start end session request validation
2019-07-28 12:14:04.715 +05:30 [DBG] Start identity token validation
2019-07-28 12:14:05.219 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:14:05.219 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:14:05.219 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 12:14:05.326 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:14:05.327 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564296236,"exp":1564296536,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"e06216f411d84f4cb3891f55b2cfd343","iat":1564296236,"at_hash":"JpQeIknw9Ult6rkAhJMecA","sid":"bc3b2acbade628f01c5af4cbdcbfcfb3","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564296192,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:14:05.328 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 12:14:05.329 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 12:14:05.420 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 12:14:05.421 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 12:14:05.421 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 12:14:05.431 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGM:00000010","TimeStamp":"2019-07-28T06:44:05.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 12:14:05.606 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 12:14:05.633 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 12:14:05.634 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 12:14:05.634 +05:30 [DBG] Processing signout callback request
2019-07-28 12:14:06.151 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:14:06.151 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:14:06.151 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 12:14:06.151 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 12:14:06.152 +05:30 [INF] Successful signout callback.
2019-07-28 12:14:06.152 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 12:14:06.152 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 12:39:42.702 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:39:54.284 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:39:54.285 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:39:54.614 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:39:54.998 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:39:54.999 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:39:54.999 +05:30 [DBG] Start discovery request
2019-07-28 12:39:57.657 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:39:58.657 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:39:58.917 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:39:58.917 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:39:58.924 +05:30 [DBG] Start authorize request
2019-07-28 12:39:59.086 +05:30 [DBG] No user present in authorize request
2019-07-28 12:39:59.087 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:40:00.854 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:40:00.907 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:40:01.462 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:40:01.917 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:40:02.307 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:40:02.802 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:40:02.803 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:40:02.923 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1133ef51d0df4387b324e5560980f95c","UiLocales":null,"Nonce":"798679437f0b4b17a03e6ac8a82ec067","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"1133ef51d0df4387b324e5560980f95c","nonce":"798679437f0b4b17a03e6ac8a82ec067"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:40:02.943 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 12:40:05.029 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:40:05.837 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:40:05.838 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:40:06.069 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:40:06.776 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:40:07.265 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:40:07.815 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:40:07.829 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:40:08.828 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:40:08.828 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:03.998 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 12:41:04.239 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:41:04.962 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:04.962 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:05.183 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:05.660 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:41:05.900 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:06.369 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:41:06.369 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:41:07.550 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:41:07.551 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 12:41:07.551 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 12:41:07.551 +05:30 [DBG] Adding auth_time claim with value: 1564297867
2019-07-28 12:41:07.565 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:41:07.646 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGP:00000002","TimeStamp":"2019-07-28T07:11:07.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 12:41:08.238 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:08.239 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:08.294 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 12:41:08.295 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 12:41:08.295 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 12:41:08.295 +05:30 [DBG] Start authorize callback request
2019-07-28 12:41:08.328 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:41:08.328 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:41:08.736 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:08.736 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:08.875 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:09.284 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:41:09.443 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:09.696 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:41:09.696 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:41:09.696 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"1133ef51d0df4387b324e5560980f95c","UiLocales":null,"Nonce":"798679437f0b4b17a03e6ac8a82ec067","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d93b6e67ca1786dd96120ea709c1cf0c","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"1133ef51d0df4387b324e5560980f95c","nonce":"798679437f0b4b17a03e6ac8a82ec067"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:41:09.909 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:41:09.921 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:41:09.921 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:41:09.921 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:41:10.195 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:41:10.195 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:41:10.233 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****2hLQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****QdPg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGO:00000003","TimeStamp":"2019-07-28T07:11:10.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:41:10.234 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"1133ef51d0df4387b324e5560980f95c","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:41:10.234 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:41:10.235 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:41:10.777 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:41:10.805 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:10.805 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:10.805 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:41:10.805 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:41:10.805 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:41:10.806 +05:30 [DBG] Start discovery request
2019-07-28 12:41:11.251 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:41:11.262 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:41:11.291 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:11.291 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:11.291 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:41:11.291 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:41:11.291 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:41:11.291 +05:30 [DBG] Start key discovery request
2019-07-28 12:41:11.369 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:41:11.401 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:11.401 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:11.446 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:41:11.472 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:11.472 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:11.473 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:41:11.473 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:41:11.473 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:41:11.473 +05:30 [DBG] Start userinfo request
2019-07-28 12:41:11.499 +05:30 [DBG] Bearer token found in header
2019-07-28 12:41:12.135 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:12.135 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:12.554 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:12.554 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:12.637 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:41:12.638 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564297870,"exp":1564301470,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297867,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:41:12.646 +05:30 [DBG] Creating userinfo response
2019-07-28 12:41:12.647 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:41:12.647 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:41:12.899 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:12.933 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:41:12.933 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:41:13.109 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:13.257 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:41:13.257 +05:30 [DBG] End userinfo request
2019-07-28 12:41:13.314 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:41:13.314 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:41:13.314 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:41:13.314 +05:30 [DBG] Rendering check session result
2019-07-28 12:41:13.885 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:41:13.947 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:13.948 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:13.949 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:41:13.950 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:41:13.950 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:41:13.950 +05:30 [DBG] Start discovery request
2019-07-28 12:41:14.339 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:41:14.735 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:41:14.736 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:41:14.736 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:41:14.736 +05:30 [DBG] Rendering check session result
2019-07-28 12:41:52.282 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:41:52.372 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:52.372 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:52.373 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:41:52.374 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:41:52.374 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:41:52.374 +05:30 [DBG] Start discovery request
2019-07-28 12:41:53.098 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:41:53.291 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:41:53.291 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:41:53.291 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:41:53.291 +05:30 [DBG] Rendering check session result
2019-07-28 12:41:56.511 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:41:56.542 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:56.542 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:56.550 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:41:56.581 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:41:56.581 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:41:56.582 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:41:56.582 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:41:56.583 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:41:56.583 +05:30 [DBG] Start userinfo request
2019-07-28 12:41:56.583 +05:30 [DBG] Bearer token found in header
2019-07-28 12:41:57.072 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:57.072 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:57.906 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:41:57.906 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:41:57.976 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:41:57.977 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564297870,"exp":1564301470,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297867,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:41:57.977 +05:30 [DBG] Creating userinfo response
2019-07-28 12:41:57.977 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:41:57.977 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:41:58.234 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:58.234 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:41:58.235 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:41:58.462 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:41:58.665 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:41:58.665 +05:30 [DBG] End userinfo request
2019-07-28 12:42:20.327 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:42:20.410 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:42:20.410 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:42:20.416 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:42:20.455 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:42:20.455 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:42:20.455 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:42:20.466 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:42:20.466 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:42:20.466 +05:30 [DBG] Start userinfo request
2019-07-28 12:42:20.466 +05:30 [DBG] Bearer token found in header
2019-07-28 12:42:20.968 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:20.969 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:21.487 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:21.487 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:21.551 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:42:21.551 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564297870,"exp":1564301470,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297867,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:42:21.552 +05:30 [DBG] Creating userinfo response
2019-07-28 12:42:21.552 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:42:21.552 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:42:21.781 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:21.781 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:42:21.781 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:42:22.014 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:22.155 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:42:22.155 +05:30 [DBG] End userinfo request
2019-07-28 12:42:42.022 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:42:42.093 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 12:42:42.094 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 12:42:42.094 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 12:42:42.094 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:42:42.095 +05:30 [DBG] Start end session request validation
2019-07-28 12:42:42.095 +05:30 [DBG] Start identity token validation
2019-07-28 12:42:42.096 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:42:42.096 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:42:42.149 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:42:42.425 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:42:42.425 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:42:42.475 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:42:42.475 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:42:42.475 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:42:42.476 +05:30 [DBG] Start userinfo request
2019-07-28 12:42:42.476 +05:30 [DBG] Bearer token found in header
2019-07-28 12:42:42.907 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:42.907 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:42.907 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 12:42:43.075 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:42:43.075 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564297870,"exp":1564298170,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"798679437f0b4b17a03e6ac8a82ec067","iat":1564297870,"at_hash":"B1o22JBBKBbsbx-Tt3vjCg","sid":"d93b6e67ca1786dd96120ea709c1cf0c","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297867,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:42:43.076 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 12:42:43.076 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 12:42:43.392 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 12:42:43.393 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 12:42:43.394 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 12:42:43.408 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGO:00000008","TimeStamp":"2019-07-28T07:12:43.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 12:42:43.612 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 12:42:43.614 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 12:42:43.614 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 12:42:43.614 +05:30 [DBG] Processing signout callback request
2019-07-28 12:42:43.668 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:43.668 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:44.625 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:44.625 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:44.625 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 12:42:44.625 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 12:42:44.625 +05:30 [INF] Successful signout callback.
2019-07-28 12:42:44.625 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 12:42:44.625 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 12:42:44.692 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:44.692 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:44.771 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:42:44.771 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564297870,"exp":1564301470,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297867,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:42:44.772 +05:30 [DBG] Creating userinfo response
2019-07-28 12:42:44.772 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:42:44.772 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:42:44.978 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:44.979 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:42:44.979 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:42:45.181 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:45.349 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:42:45.350 +05:30 [DBG] End userinfo request
2019-07-28 12:42:50.905 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:42:50.966 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:42:50.966 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:42:50.966 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:42:50.966 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:42:50.967 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:42:50.967 +05:30 [DBG] Start discovery request
2019-07-28 12:42:51.352 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:42:51.377 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 12:42:51.379 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 12:42:51.380 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 12:42:51.381 +05:30 [DBG] Start authorize request
2019-07-28 12:42:51.381 +05:30 [DBG] No user present in authorize request
2019-07-28 12:42:51.382 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:42:52.013 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:52.013 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:52.225 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:52.694 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:42:52.837 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:53.411 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:42:53.411 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:42:53.412 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"b162d19133cc4315a802fc54ecc8e846","UiLocales":null,"Nonce":"7fef70cee8964094b90fb61639911ea8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"b162d19133cc4315a802fc54ecc8e846","nonce":"7fef70cee8964094b90fb61639911ea8"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:42:53.412 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 12:42:53.477 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:42:54.194 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:54.194 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:42:54.454 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:54.971 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:42:55.206 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:42:55.761 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:42:55.762 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:42:56.441 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:42:56.441 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:43:11.114 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 12:43:11.199 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:43:11.838 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:43:11.838 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:43:12.030 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:43:12.556 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:43:12.785 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:43:13.452 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:43:13.452 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:43:13.698 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:43:13.698 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 12:43:13.698 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 12:43:13.698 +05:30 [DBG] Adding auth_time claim with value: 1564297993
2019-07-28 12:43:13.698 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:43:13.781 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGQ:0000000A","TimeStamp":"2019-07-28T07:13:13.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 12:43:14.484 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:43:14.484 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:43:14.498 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 12:43:14.499 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 12:43:14.499 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 12:43:14.499 +05:30 [DBG] Start authorize callback request
2019-07-28 12:43:14.500 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:43:14.500 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 12:43:15.040 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:43:15.040 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:43:15.160 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:43:15.616 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:43:15.799 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:43:16.225 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 12:43:16.226 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 12:43:16.227 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"b162d19133cc4315a802fc54ecc8e846","UiLocales":null,"Nonce":"7fef70cee8964094b90fb61639911ea8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c39a6d90f5b6c509343847f19550524e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"b162d19133cc4315a802fc54ecc8e846","nonce":"7fef70cee8964094b90fb61639911ea8"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 12:43:16.315 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 12:43:16.316 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 12:43:16.316 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 12:43:16.316 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 12:43:16.607 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 12:43:16.607 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 12:43:16.741 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****kBZw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****jICA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGO:0000000B","TimeStamp":"2019-07-28T07:13:16.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 12:43:16.741 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"b162d19133cc4315a802fc54ecc8e846","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 12:43:16.742 +05:30 [DBG] Augmenting SignInContext
2019-07-28 12:43:16.743 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 12:43:17.387 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:43:17.526 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:43:17.526 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:43:17.526 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:43:17.526 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:43:17.526 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:43:17.526 +05:30 [DBG] Start discovery request
2019-07-28 12:43:18.044 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:43:18.071 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 12:43:18.334 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:43:18.334 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:43:18.334 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 12:43:18.334 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 12:43:18.334 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 12:43:18.334 +05:30 [DBG] Start key discovery request
2019-07-28 12:43:18.382 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:43:18.418 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:43:18.418 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:43:18.428 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 12:43:18.474 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:43:18.474 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:43:18.474 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 12:43:18.475 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 12:43:18.475 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 12:43:18.475 +05:30 [DBG] Start userinfo request
2019-07-28 12:43:18.475 +05:30 [DBG] Bearer token found in header
2019-07-28 12:43:19.198 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:43:19.198 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:43:19.705 +05:30 [DBG] angular_spa found in database: true
2019-07-28 12:43:19.706 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 12:43:19.763 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 12:43:19.764 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564297996,"exp":1564301596,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297993,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 12:43:19.764 +05:30 [DBG] Creating userinfo response
2019-07-28 12:43:19.764 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:43:19.764 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:43:19.989 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:43:19.989 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 12:43:19.989 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 12:43:20.231 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 12:43:20.403 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 12:43:20.403 +05:30 [DBG] End userinfo request
2019-07-28 12:43:21.157 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 12:43:21.213 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 12:43:21.213 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 12:43:21.213 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 12:43:21.213 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 12:43:21.213 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 12:43:21.214 +05:30 [DBG] Start discovery request
2019-07-28 12:43:21.692 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 12:43:22.043 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 12:43:22.043 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 12:43:22.044 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 12:43:22.044 +05:30 [DBG] Rendering check session result
2019-07-28 13:31:35.924 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:31:36.200 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:31:36.200 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:31:36.201 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:31:36.202 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:31:36.202 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:31:36.202 +05:30 [DBG] Start discovery request
2019-07-28 13:31:36.683 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:31:41.586 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:31:41.586 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:31:41.586 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:31:41.586 +05:30 [DBG] Rendering check session result
2019-07-28 13:32:03.468 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:32:03.505 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:32:03.505 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:32:03.505 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:32:03.506 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:32:03.506 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:32:03.506 +05:30 [DBG] Start discovery request
2019-07-28 13:32:04.450 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:32:04.762 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:32:04.763 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:32:04.763 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:32:04.763 +05:30 [DBG] Rendering check session result
2019-07-28 13:33:38.375 +05:30 [INF] Removing 0 grants
2019-07-28 13:33:38.445 +05:30 [INF] Removing 0 device flow codes
2019-07-28 13:34:29.757 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:34:29.799 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:34:29.799 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:34:29.800 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:34:29.801 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:34:29.801 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:34:29.801 +05:30 [DBG] Start discovery request
2019-07-28 13:34:30.501 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:34:31.057 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:34:31.057 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:34:31.057 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:34:31.057 +05:30 [DBG] Rendering check session result
2019-07-28 13:35:11.099 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:35:11.160 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:11.160 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:11.161 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:35:11.161 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:35:11.161 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:35:11.161 +05:30 [DBG] Start discovery request
2019-07-28 13:35:11.812 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:35:11.870 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:35:11.870 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:35:11.870 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:35:11.870 +05:30 [DBG] Rendering check session result
2019-07-28 13:35:16.405 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 13:35:16.785 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 13:35:16.785 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 13:35:16.785 +05:30 [DBG] Start authorize request
2019-07-28 13:35:16.895 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:35:16.896 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:35:19.169 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:19.302 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:20.060 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:20.581 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:35:21.034 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:21.643 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:35:21.644 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:35:21.663 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"bdb5c88e03714959b5118417921330ba","UiLocales":null,"Nonce":"9d404177c67f4c3fa7b53c0790a76be9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c39a6d90f5b6c509343847f19550524e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"bdb5c88e03714959b5118417921330ba","nonce":"9d404177c67f4c3fa7b53c0790a76be9"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 13:35:21.918 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 13:35:21.918 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 13:35:21.919 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 13:35:21.919 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:35:23.214 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 13:35:23.215 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 13:35:23.257 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Wr7A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****gLeg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGS:00000005","TimeStamp":"2019-07-28T08:05:23.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 13:35:23.332 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"bdb5c88e03714959b5118417921330ba","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 13:35:24.949 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:35:24.978 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:24.978 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:24.979 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:35:24.979 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:35:24.979 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:35:24.980 +05:30 [DBG] Start discovery request
2019-07-28 13:35:25.602 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:35:25.622 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 13:35:25.658 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:25.658 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:25.658 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 13:35:25.721 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 13:35:25.721 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 13:35:25.721 +05:30 [DBG] Start key discovery request
2019-07-28 13:35:25.827 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:35:25.998 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:25.998 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:26.005 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:35:26.047 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:26.047 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:26.047 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:35:26.048 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:35:26.048 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:35:26.048 +05:30 [DBG] Start userinfo request
2019-07-28 13:35:26.048 +05:30 [DBG] Bearer token found in header
2019-07-28 13:35:27.105 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:27.106 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:28.056 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:28.056 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:28.146 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:35:28.146 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301122,"exp":1564304722,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297993,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:35:28.146 +05:30 [DBG] Creating userinfo response
2019-07-28 13:35:28.146 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:35:28.146 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:35:28.525 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:28.526 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:35:28.526 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:35:28.792 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:29.131 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:35:29.131 +05:30 [DBG] End userinfo request
2019-07-28 13:35:29.476 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:35:29.478 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:35:29.479 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:35:29.479 +05:30 [DBG] Rendering check session result
2019-07-28 13:35:30.123 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:35:30.156 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:30.156 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:30.156 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:35:30.156 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:35:30.156 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:35:30.157 +05:30 [DBG] Start discovery request
2019-07-28 13:35:30.578 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:35:30.612 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:35:30.612 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:35:30.612 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:35:30.613 +05:30 [DBG] Rendering check session result
2019-07-28 13:35:36.936 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 13:35:36.936 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 13:35:36.937 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 13:35:36.938 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:35:36.939 +05:30 [DBG] Start end session request validation
2019-07-28 13:35:36.939 +05:30 [DBG] Start identity token validation
2019-07-28 13:35:37.780 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:37.780 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:37.781 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 13:35:37.881 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:35:37.894 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301123,"exp":1564301423,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"9d404177c67f4c3fa7b53c0790a76be9","iat":1564301123,"at_hash":"xffVajRpGrP56H2o_UV-oQ","sid":"c39a6d90f5b6c509343847f19550524e","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564297993,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:35:37.894 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 13:35:37.894 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 13:35:38.490 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 13:35:38.490 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 13:35:38.491 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 13:35:38.517 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUGS:0000000E","TimeStamp":"2019-07-28T08:05:38.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 13:35:39.482 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 13:35:39.483 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 13:35:39.483 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 13:35:39.483 +05:30 [DBG] Processing signout callback request
2019-07-28 13:35:40.169 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:40.170 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:40.170 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 13:35:40.170 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 13:35:40.170 +05:30 [INF] Successful signout callback.
2019-07-28 13:35:40.170 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 13:35:40.170 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 13:35:46.063 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:35:46.106 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:35:46.107 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:35:46.107 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:35:46.108 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:35:46.108 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:35:46.108 +05:30 [DBG] Start discovery request
2019-07-28 13:35:46.539 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:35:46.558 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 13:35:46.559 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 13:35:46.559 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 13:35:46.559 +05:30 [DBG] Start authorize request
2019-07-28 13:35:46.561 +05:30 [DBG] No user present in authorize request
2019-07-28 13:35:46.561 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:35:47.094 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:47.094 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:47.248 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:47.685 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:35:47.839 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:48.322 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:35:48.322 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:35:48.323 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"b5a03061e2264fbd8974dae88059e510","UiLocales":null,"Nonce":"bffaea07ddd344d98e3655c36c8d526f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"b5a03061e2264fbd8974dae88059e510","nonce":"bffaea07ddd344d98e3655c36c8d526f"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 13:35:48.323 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 13:35:48.412 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:35:49.339 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:49.340 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:35:49.562 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:50.434 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:35:50.808 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:35:51.519 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:35:51.519 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:35:52.263 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:35:52.263 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:36:54.000 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 13:36:54.109 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:36:54.852 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:36:54.852 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:36:55.069 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:36:55.638 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:36:55.858 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:36:56.617 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:36:56.617 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:36:56.904 +05:30 [DBG] Augmenting SignInContext
2019-07-28 13:36:56.904 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 13:36:56.904 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 13:36:56.904 +05:30 [DBG] Adding auth_time claim with value: 1564301216
2019-07-28 13:36:56.905 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 13:36:57.090 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUGT:00000001","TimeStamp":"2019-07-28T08:06:57.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 13:36:57.862 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:36:57.862 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:36:57.890 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 13:36:57.890 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 13:36:57.891 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 13:36:57.891 +05:30 [DBG] Start authorize callback request
2019-07-28 13:36:57.891 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:36:57.891 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:36:58.443 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:36:58.443 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:36:58.599 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:36:59.003 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:36:59.160 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:36:59.581 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:36:59.581 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:36:59.627 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"b5a03061e2264fbd8974dae88059e510","UiLocales":null,"Nonce":"bffaea07ddd344d98e3655c36c8d526f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"daed2b00e7dda87e7d69cc7c2ec0dad4","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"b5a03061e2264fbd8974dae88059e510","nonce":"bffaea07ddd344d98e3655c36c8d526f"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 13:36:59.695 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 13:36:59.695 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 13:36:59.695 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 13:36:59.695 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:36:59.847 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 13:36:59.847 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 13:36:59.853 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****r06A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****yZbQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUGT:00000002","TimeStamp":"2019-07-28T08:06:59.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 13:36:59.853 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"b5a03061e2264fbd8974dae88059e510","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 13:36:59.853 +05:30 [DBG] Augmenting SignInContext
2019-07-28 13:36:59.854 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 13:37:00.276 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:37:00.317 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:00.317 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:00.317 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:37:00.317 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:37:00.317 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:37:00.317 +05:30 [DBG] Start discovery request
2019-07-28 13:37:00.960 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:37:01.055 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 13:37:01.091 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:01.091 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:01.091 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 13:37:01.091 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 13:37:01.092 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 13:37:01.092 +05:30 [DBG] Start key discovery request
2019-07-28 13:37:01.134 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:01.184 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:01.184 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:01.198 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:01.247 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:01.247 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:01.247 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:37:01.248 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:37:01.248 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:37:01.248 +05:30 [DBG] Start userinfo request
2019-07-28 13:37:01.248 +05:30 [DBG] Bearer token found in header
2019-07-28 13:37:01.802 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:01.802 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:02.342 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:02.342 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:02.401 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:37:02.401 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301219,"exp":1564304819,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301216,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:37:02.402 +05:30 [DBG] Creating userinfo response
2019-07-28 13:37:02.402 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:02.402 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:02.696 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:02.696 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:37:02.696 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:02.942 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:03.122 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:37:03.122 +05:30 [DBG] End userinfo request
2019-07-28 13:37:03.239 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:37:03.240 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:37:03.241 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:37:03.241 +05:30 [DBG] Rendering check session result
2019-07-28 13:37:04.736 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:37:04.784 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:04.784 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:04.784 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:37:04.784 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:37:04.785 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:37:04.785 +05:30 [DBG] Start discovery request
2019-07-28 13:37:05.251 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:37:05.678 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:37:05.678 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:37:05.678 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:37:05.678 +05:30 [DBG] Rendering check session result
2019-07-28 13:37:09.114 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:09.155 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:09.156 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:09.176 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:09.213 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:09.213 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:09.214 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:37:09.215 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:37:09.215 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:37:09.215 +05:30 [DBG] Start userinfo request
2019-07-28 13:37:09.215 +05:30 [DBG] Bearer token found in header
2019-07-28 13:37:09.839 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:09.840 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:10.650 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:10.651 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:10.800 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:37:10.800 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301219,"exp":1564304819,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301216,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:37:10.800 +05:30 [DBG] Creating userinfo response
2019-07-28 13:37:10.800 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:10.800 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:11.055 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:11.055 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:37:11.055 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:11.333 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:11.546 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:37:11.546 +05:30 [DBG] End userinfo request
2019-07-28 13:37:40.479 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:40.562 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:40.562 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:40.589 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:40.624 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:40.625 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:40.625 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:37:40.626 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:37:40.626 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:37:40.627 +05:30 [DBG] Start userinfo request
2019-07-28 13:37:40.627 +05:30 [DBG] Bearer token found in header
2019-07-28 13:37:41.129 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:41.129 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:41.425 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:41.755 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:41.755 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:41.755 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:37:41.755 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:37:41.755 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:37:41.756 +05:30 [DBG] Start userinfo request
2019-07-28 13:37:41.756 +05:30 [DBG] Bearer token found in header
2019-07-28 13:37:42.022 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:42.022 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:42.415 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:37:42.417 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301219,"exp":1564304819,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301216,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:37:42.417 +05:30 [DBG] Creating userinfo response
2019-07-28 13:37:42.422 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:42.422 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:42.719 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:37:42.875 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:42.875 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:37:42.875 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:43.233 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:37:43.233 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:37:43.237 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:37:43.238 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:37:43.238 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:37:43.238 +05:30 [DBG] Start userinfo request
2019-07-28 13:37:43.238 +05:30 [DBG] Bearer token found in header
2019-07-28 13:37:43.238 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:43.238 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:43.455 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:43.852 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:37:43.852 +05:30 [DBG] End userinfo request
2019-07-28 13:37:44.738 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:44.738 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:44.749 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:44.749 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:44.877 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:37:44.877 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301219,"exp":1564304819,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301216,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:37:44.879 +05:30 [DBG] Creating userinfo response
2019-07-28 13:37:44.879 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:44.919 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:45.296 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:45.296 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:37:45.296 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:45.735 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:46.282 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:37:46.282 +05:30 [DBG] End userinfo request
2019-07-28 13:37:46.341 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:37:46.341 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:37:46.428 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:37:46.428 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301219,"exp":1564304819,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301216,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:37:46.428 +05:30 [DBG] Creating userinfo response
2019-07-28 13:37:46.428 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:46.428 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:46.669 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:46.669 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:37:46.669 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:37:46.888 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:37:47.052 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:37:47.052 +05:30 [DBG] End userinfo request
2019-07-28 13:41:35.018 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:41:35.200 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:41:35.200 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:41:35.201 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:41:35.201 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:41:35.201 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:41:35.201 +05:30 [DBG] Start discovery request
2019-07-28 13:41:35.684 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:41:36.308 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:41:36.308 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:41:36.308 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:41:36.309 +05:30 [DBG] Rendering check session result
2019-07-28 13:45:00.182 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 13:45:00.214 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 13:45:00.214 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 13:45:00.229 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:45:00.229 +05:30 [DBG] Start end session request validation
2019-07-28 13:45:00.230 +05:30 [DBG] Start identity token validation
2019-07-28 13:45:01.271 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:45:01.314 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:45:01.314 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 13:45:01.605 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:45:01.606 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301219,"exp":1564301519,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"bffaea07ddd344d98e3655c36c8d526f","iat":1564301219,"at_hash":"ShMHFCf7VMBO2CQxDJ7GHQ","sid":"daed2b00e7dda87e7d69cc7c2ec0dad4","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301216,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:45:01.606 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 13:45:01.607 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 13:45:01.981 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 13:45:01.982 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 13:45:01.982 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 13:45:01.983 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUH1:00000002","TimeStamp":"2019-07-28T08:15:01.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 13:45:03.036 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 13:45:03.039 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 13:45:03.039 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 13:45:03.039 +05:30 [DBG] Processing signout callback request
2019-07-28 13:45:03.670 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:45:03.671 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:45:03.671 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 13:45:03.671 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 13:45:03.671 +05:30 [INF] Successful signout callback.
2019-07-28 13:45:03.671 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 13:45:03.672 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 13:45:13.576 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:45:13.602 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:45:13.602 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:45:13.602 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:45:13.603 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:45:13.603 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:45:13.603 +05:30 [DBG] Start discovery request
2019-07-28 13:45:14.132 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:45:14.285 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 13:45:14.288 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 13:45:14.288 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 13:45:14.288 +05:30 [DBG] Start authorize request
2019-07-28 13:45:14.289 +05:30 [DBG] No user present in authorize request
2019-07-28 13:45:14.289 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:45:14.916 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:45:14.916 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:45:15.303 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:45:15.711 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:45:15.892 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:45:16.283 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:45:16.283 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:45:16.285 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"80404ce08b13403d9318067b88638108","UiLocales":null,"Nonce":"8ddaffd950b34c62843e3dde6c1f5da7","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"80404ce08b13403d9318067b88638108","nonce":"8ddaffd950b34c62843e3dde6c1f5da7"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 13:45:16.285 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 13:45:16.364 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:45:17.217 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:45:17.218 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:45:17.401 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:45:18.028 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:45:18.727 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:45:19.757 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:45:19.772 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:45:20.506 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:45:20.507 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:33.000 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:46:33.040 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:46:33.040 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:46:33.041 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:46:33.041 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:46:33.042 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:46:33.042 +05:30 [DBG] Start discovery request
2019-07-28 13:46:33.781 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:46:33.917 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 13:46:33.917 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 13:46:33.918 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 13:46:33.918 +05:30 [DBG] Start authorize request
2019-07-28 13:46:33.918 +05:30 [DBG] No user present in authorize request
2019-07-28 13:46:33.918 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:46:34.728 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:46:34.728 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:34.908 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:35.277 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:35.447 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:35.906 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:35.906 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:46:35.907 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"a270f5e1011d40d6898c5d1c45ab32ec","UiLocales":null,"Nonce":"c03677a3bd564c87b019755b73bee25d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"a270f5e1011d40d6898c5d1c45ab32ec","nonce":"c03677a3bd564c87b019755b73bee25d"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 13:46:35.907 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 13:46:36.098 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:46:36.956 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:46:36.957 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:37.202 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:37.879 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:38.155 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:38.877 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:38.877 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:46:39.619 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:46:39.620 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:53.517 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 13:46:53.758 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:46:54.438 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:46:54.438 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:54.635 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:55.252 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:55.519 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:56.004 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:56.005 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:46:56.449 +05:30 [DBG] Augmenting SignInContext
2019-07-28 13:46:56.449 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 13:46:56.450 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 13:46:56.450 +05:30 [DBG] Adding auth_time claim with value: 1564301816
2019-07-28 13:46:56.450 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 13:46:56.640 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUH2:00000004","TimeStamp":"2019-07-28T08:16:56.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 13:46:57.366 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:46:57.367 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:57.447 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 13:46:57.448 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 13:46:57.448 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 13:46:57.448 +05:30 [DBG] Start authorize callback request
2019-07-28 13:46:57.458 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:46:57.458 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 13:46:58.004 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:46:58.004 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:46:58.133 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:58.534 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:58.689 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:46:59.035 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 13:46:59.035 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 13:46:59.036 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"a270f5e1011d40d6898c5d1c45ab32ec","UiLocales":null,"Nonce":"c03677a3bd564c87b019755b73bee25d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2353a79d4d3244301b12b688b664141e","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"a270f5e1011d40d6898c5d1c45ab32ec","nonce":"c03677a3bd564c87b019755b73bee25d"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 13:46:59.082 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 13:46:59.083 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 13:46:59.083 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 13:46:59.083 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:46:59.271 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 13:46:59.271 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 13:46:59.287 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Vi0g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lQ6Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUH2:00000005","TimeStamp":"2019-07-28T08:16:59.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 13:46:59.287 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"a270f5e1011d40d6898c5d1c45ab32ec","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 13:46:59.288 +05:30 [DBG] Augmenting SignInContext
2019-07-28 13:46:59.288 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 13:46:59.804 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:46:59.835 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:46:59.835 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:46:59.835 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:46:59.836 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:46:59.836 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:46:59.836 +05:30 [DBG] Start discovery request
2019-07-28 13:47:00.252 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:47:00.264 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 13:47:00.292 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:00.293 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:00.293 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 13:47:00.294 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 13:47:00.294 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 13:47:00.294 +05:30 [DBG] Start key discovery request
2019-07-28 13:47:00.348 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:47:00.385 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:00.386 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:00.396 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:47:00.449 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:00.450 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:00.451 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:47:00.452 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:47:00.452 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:47:00.452 +05:30 [DBG] Start userinfo request
2019-07-28 13:47:00.453 +05:30 [DBG] Bearer token found in header
2019-07-28 13:47:00.967 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:00.967 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:01.387 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:01.387 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:01.442 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:47:01.443 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301819,"exp":1564305419,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301816,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:47:01.443 +05:30 [DBG] Creating userinfo response
2019-07-28 13:47:01.444 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:01.444 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:01.705 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:47:01.705 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:47:01.705 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:01.955 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:47:02.071 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:47:02.071 +05:30 [DBG] End userinfo request
2019-07-28 13:47:02.164 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:47:02.164 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:47:02.164 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:47:02.164 +05:30 [DBG] Rendering check session result
2019-07-28 13:47:03.313 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 13:47:03.359 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:03.359 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:03.359 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 13:47:03.360 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 13:47:03.360 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 13:47:03.360 +05:30 [DBG] Start discovery request
2019-07-28 13:47:03.795 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 13:47:04.202 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 13:47:04.202 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 13:47:04.202 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 13:47:04.202 +05:30 [DBG] Rendering check session result
2019-07-28 13:47:08.771 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:47:08.804 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:08.804 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:08.815 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:47:08.843 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:08.843 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:08.844 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:47:08.844 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:47:08.844 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:47:08.844 +05:30 [DBG] Start userinfo request
2019-07-28 13:47:08.844 +05:30 [DBG] Bearer token found in header
2019-07-28 13:47:09.410 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:09.410 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:09.879 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:09.879 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:09.953 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:47:09.953 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301819,"exp":1564305419,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301816,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:47:09.954 +05:30 [DBG] Creating userinfo response
2019-07-28 13:47:09.954 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:09.954 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:10.197 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:47:10.197 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:47:10.198 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:10.471 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:47:10.694 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:47:10.695 +05:30 [DBG] End userinfo request
2019-07-28 13:47:17.535 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:47:17.568 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:17.568 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:17.584 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 13:47:17.585 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 13:47:17.585 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 13:47:17.586 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 13:47:17.586 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 13:47:17.590 +05:30 [DBG] Start end session request validation
2019-07-28 13:47:17.590 +05:30 [DBG] Start identity token validation
2019-07-28 13:47:17.651 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 13:47:17.651 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 13:47:17.651 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 13:47:17.651 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 13:47:17.651 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 13:47:17.651 +05:30 [DBG] Start userinfo request
2019-07-28 13:47:17.651 +05:30 [DBG] Bearer token found in header
2019-07-28 13:47:18.458 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:18.519 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:20.872 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:20.872 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:20.872 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 13:47:21.038 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:47:21.038 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301819,"exp":1564302119,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"c03677a3bd564c87b019755b73bee25d","iat":1564301819,"at_hash":"0ldMi6G2DVSC1-qAqpT_VA","sid":"2353a79d4d3244301b12b688b664141e","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301816,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:47:21.039 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 13:47:21.039 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 13:47:21.256 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 13:47:21.256 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 13:47:21.257 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 13:47:21.257 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUH2:00000011","TimeStamp":"2019-07-28T08:17:21.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 13:47:21.393 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:21.393 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:21.500 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 13:47:21.500 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564301819,"exp":1564305419,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564301816,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 13:47:21.500 +05:30 [DBG] Creating userinfo response
2019-07-28 13:47:21.500 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:21.500 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:21.728 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 13:47:21.729 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 13:47:21.729 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 13:47:21.729 +05:30 [DBG] Processing signout callback request
2019-07-28 13:47:21.733 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:47:21.776 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 13:47:21.776 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 13:47:22.214 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 13:47:22.473 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 13:47:22.473 +05:30 [DBG] End userinfo request
2019-07-28 13:47:22.660 +05:30 [DBG] angular_spa found in database: true
2019-07-28 13:47:22.660 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 13:47:22.661 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 13:47:22.661 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 13:47:22.661 +05:30 [INF] Successful signout callback.
2019-07-28 13:47:22.661 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 13:47:22.661 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 15:52:21.311 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 15:52:26.253 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 15:52:26.254 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 15:52:26.254 +05:30 [DBG] Processing signout callback request
2019-07-28 15:52:28.656 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 15:52:36.755 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:52:36.762 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:52:36.832 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 15:52:36.832 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 15:52:36.833 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 15:52:36.833 +05:30 [DBG] Start discovery request
2019-07-28 15:52:39.245 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:52:39.440 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:52:39.440 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 15:52:39.444 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 15:52:39.444 +05:30 [INF] Successful signout callback.
2019-07-28 15:52:39.444 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 15:52:39.444 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 15:52:39.750 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 15:52:40.914 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 15:52:41.046 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 15:52:41.046 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 15:52:41.047 +05:30 [DBG] Start authorize request
2019-07-28 15:52:41.057 +05:30 [DBG] No user present in authorize request
2019-07-28 15:52:41.058 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 15:52:42.205 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:52:42.206 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:52:43.122 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:52:43.813 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:52:44.016 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:52:44.466 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:52:44.478 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 15:52:44.623 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ac944c40701448ab81f61b1964ab011b","UiLocales":null,"Nonce":"4447ffd088e247239ff0e8a585075672","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"ac944c40701448ab81f61b1964ab011b","nonce":"4447ffd088e247239ff0e8a585075672"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 15:52:44.634 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 15:52:47.190 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 15:52:48.290 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:52:48.291 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:52:48.510 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:52:49.154 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:52:49.400 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:52:49.987 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:52:49.988 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 15:52:50.645 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:52:50.646 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:53:09.754 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 15:53:10.033 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 15:53:10.774 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:53:10.774 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:53:10.994 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:53:11.515 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:53:11.744 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:53:12.325 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:53:12.325 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 15:53:14.710 +05:30 [DBG] Augmenting SignInContext
2019-07-28 15:53:14.710 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 15:53:14.711 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 15:53:14.711 +05:30 [DBG] Adding auth_time claim with value: 1564309394
2019-07-28 15:53:14.896 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 15:53:15.233 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUH6:00000002","TimeStamp":"2019-07-28T10:23:15.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 15:53:16.000 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:53:16.000 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:53:16.365 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 15:53:16.380 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 15:53:16.380 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 15:53:16.386 +05:30 [DBG] Start authorize callback request
2019-07-28 15:53:16.468 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 15:53:16.468 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 15:53:16.936 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:53:16.937 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:53:17.100 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:53:17.574 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:53:17.688 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:53:18.085 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 15:53:18.086 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 15:53:18.086 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ac944c40701448ab81f61b1964ab011b","UiLocales":null,"Nonce":"4447ffd088e247239ff0e8a585075672","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"101099e6ead67c88a01af8850c5660eb","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"ac944c40701448ab81f61b1964ab011b","nonce":"4447ffd088e247239ff0e8a585075672"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 15:53:18.633 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 15:53:18.633 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 15:53:18.633 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 15:53:18.647 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 15:53:19.100 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 15:53:19.101 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 15:53:19.152 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fIlQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bKXQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUH5:00000005","TimeStamp":"2019-07-28T10:23:19.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 15:53:19.152 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"ac944c40701448ab81f61b1964ab011b","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 15:53:19.153 +05:30 [DBG] Augmenting SignInContext
2019-07-28 15:53:19.174 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 15:53:19.693 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 15:53:19.740 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:53:19.740 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:53:19.740 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 15:53:19.741 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 15:53:19.741 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 15:53:19.741 +05:30 [DBG] Start discovery request
2019-07-28 15:53:20.136 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 15:53:20.284 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 15:53:20.381 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:53:20.381 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:53:20.381 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 15:53:20.396 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 15:53:20.396 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 15:53:20.396 +05:30 [DBG] Start key discovery request
2019-07-28 15:53:20.532 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 15:53:20.572 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:53:20.573 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:53:20.668 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 15:53:20.715 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:53:20.715 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:53:20.722 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 15:53:20.735 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 15:53:20.735 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 15:53:20.735 +05:30 [DBG] Start userinfo request
2019-07-28 15:53:20.735 +05:30 [DBG] Bearer token found in header
2019-07-28 15:53:21.360 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:53:21.372 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:53:21.883 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:53:21.883 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:53:21.965 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 15:53:21.966 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564309398,"exp":1564312998,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564309394,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 15:53:21.966 +05:30 [DBG] Creating userinfo response
2019-07-28 15:53:22.012 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 15:53:22.012 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 15:53:22.285 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:53:22.286 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 15:53:22.286 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 15:53:22.477 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:53:22.661 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 15:53:22.661 +05:30 [DBG] End userinfo request
2019-07-28 15:53:22.918 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 15:53:22.918 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 15:53:22.930 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 15:53:22.931 +05:30 [DBG] Rendering check session result
2019-07-28 15:53:23.736 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 15:53:23.814 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:53:23.814 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:53:23.814 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 15:53:23.814 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 15:53:23.814 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 15:53:23.815 +05:30 [DBG] Start discovery request
2019-07-28 15:53:24.322 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 15:53:25.434 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 15:53:25.434 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 15:53:25.434 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 15:53:25.434 +05:30 [DBG] Rendering check session result
2019-07-28 15:56:37.654 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 15:56:37.700 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:56:37.700 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:56:37.738 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 15:56:37.779 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 15:56:37.779 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 15:56:37.779 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 15:56:37.780 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 15:56:37.780 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 15:56:37.780 +05:30 [DBG] Start userinfo request
2019-07-28 15:56:37.781 +05:30 [DBG] Bearer token found in header
2019-07-28 15:56:38.486 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:56:38.486 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:56:38.926 +05:30 [DBG] angular_spa found in database: true
2019-07-28 15:56:38.926 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 15:56:38.976 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 15:56:38.976 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564309398,"exp":1564312998,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564309394,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 15:56:38.976 +05:30 [DBG] Creating userinfo response
2019-07-28 15:56:38.976 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 15:56:38.977 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 15:56:39.218 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:56:39.219 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 15:56:39.219 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 15:56:39.429 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 15:56:39.614 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 15:56:39.614 +05:30 [DBG] End userinfo request
2019-07-28 16:04:56.512 +05:30 [INF] Removing 0 grants
2019-07-28 16:04:56.581 +05:30 [INF] Removing 0 device flow codes
2019-07-28 16:16:38.299 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:16:38.483 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:16:38.483 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:16:38.484 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:16:38.492 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:16:38.492 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:16:38.492 +05:30 [DBG] Start discovery request
2019-07-28 16:16:39.097 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:16:39.607 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:16:39.607 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:16:39.607 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:16:39.607 +05:30 [DBG] Rendering check session result
2019-07-28 16:19:39.990 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:19:40.032 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:19:40.032 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:19:40.033 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:19:40.033 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:19:40.034 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:19:40.034 +05:30 [DBG] Start discovery request
2019-07-28 16:19:40.736 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:19:42.937 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:19:42.938 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:19:42.938 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:19:42.938 +05:30 [DBG] Rendering check session result
2019-07-28 16:20:22.318 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 16:20:22.402 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 16:20:22.402 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 16:20:22.487 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:20:22.494 +05:30 [DBG] Start end session request validation
2019-07-28 16:20:22.519 +05:30 [DBG] Start identity token validation
2019-07-28 16:20:24.542 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:20:24.554 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:20:24.554 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 16:20:26.268 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:20:26.304 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564309399,"exp":1564309699,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"4447ffd088e247239ff0e8a585075672","iat":1564309399,"at_hash":"9m5j3K7tgmHqsc5k27PK4Q","sid":"101099e6ead67c88a01af8850c5660eb","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564309394,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:20:26.344 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 16:20:26.353 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 16:20:28.002 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 16:20:28.002 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 16:20:28.002 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 16:20:28.046 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUHC:00000004","TimeStamp":"2019-07-28T10:50:28.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 16:20:30.660 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 16:20:30.687 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 16:20:30.687 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 16:20:30.687 +05:30 [DBG] Processing signout callback request
2019-07-28 16:20:31.501 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:20:31.501 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:20:31.502 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 16:20:31.502 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 16:20:31.502 +05:30 [INF] Successful signout callback.
2019-07-28 16:20:31.502 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 16:20:31.502 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 16:20:37.055 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:20:37.147 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:20:37.148 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:20:37.148 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:20:37.149 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:20:37.149 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:20:37.149 +05:30 [DBG] Start discovery request
2019-07-28 16:20:37.615 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:20:37.725 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 16:20:37.757 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 16:20:37.757 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 16:20:37.758 +05:30 [DBG] Start authorize request
2019-07-28 16:20:37.758 +05:30 [DBG] No user present in authorize request
2019-07-28 16:20:37.758 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:20:38.366 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:20:38.366 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:20:38.922 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:20:39.624 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:20:39.781 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:20:40.208 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:20:40.300 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:20:40.427 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e9190db9e53e4587a5782e6642700f88","UiLocales":null,"Nonce":"0b853f4c8a4748c0a2c5ec5b6fd6c9ea","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"e9190db9e53e4587a5782e6642700f88","nonce":"0b853f4c8a4748c0a2c5ec5b6fd6c9ea"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:20:40.427 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 16:20:40.744 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:20:41.980 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:20:41.980 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:20:42.175 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:20:42.791 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:20:43.025 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:20:43.518 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:20:43.518 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:20:44.324 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:20:44.324 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:02.273 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 16:21:02.398 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:21:03.121 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:03.121 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:03.312 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:03.839 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:21:04.064 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:04.658 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:21:04.658 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:21:05.240 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:21:05.240 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 16:21:05.240 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 16:21:05.241 +05:30 [DBG] Adding auth_time claim with value: 1564311065
2019-07-28 16:21:05.266 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:21:05.380 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUHC:00000007","TimeStamp":"2019-07-28T10:51:05.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 16:21:06.101 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:06.101 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:06.228 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 16:21:06.276 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 16:21:06.277 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 16:21:06.277 +05:30 [DBG] Start authorize callback request
2019-07-28 16:21:06.304 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:21:06.304 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:21:06.719 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:06.719 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:06.920 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:07.395 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:21:07.534 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:07.990 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:21:07.990 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:21:07.990 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e9190db9e53e4587a5782e6642700f88","UiLocales":null,"Nonce":"0b853f4c8a4748c0a2c5ec5b6fd6c9ea","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"cf04b006e11417786bf007faf7f45596","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"e9190db9e53e4587a5782e6642700f88","nonce":"0b853f4c8a4748c0a2c5ec5b6fd6c9ea"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:21:08.063 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 16:21:08.063 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 16:21:08.063 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 16:21:08.063 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:21:08.344 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 16:21:08.344 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 16:21:08.372 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****55Lw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****LVrw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUHD:00000004","TimeStamp":"2019-07-28T10:51:08.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 16:21:08.373 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"e9190db9e53e4587a5782e6642700f88","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 16:21:08.373 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:21:08.373 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:21:09.013 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:21:09.051 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:09.051 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:09.052 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:21:09.052 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:21:09.052 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:21:09.052 +05:30 [DBG] Start discovery request
2019-07-28 16:21:09.560 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:21:09.672 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 16:21:09.713 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:09.714 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:09.714 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 16:21:09.722 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 16:21:09.722 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 16:21:09.722 +05:30 [DBG] Start key discovery request
2019-07-28 16:21:09.801 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:21:10.178 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:10.179 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:10.280 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:21:10.313 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:10.313 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:10.314 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:21:10.367 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:21:10.367 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:21:10.367 +05:30 [DBG] Start userinfo request
2019-07-28 16:21:10.367 +05:30 [DBG] Bearer token found in header
2019-07-28 16:21:11.157 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:11.158 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:11.750 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:11.750 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:11.835 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:21:11.836 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564311068,"exp":1564314668,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564311065,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:21:11.875 +05:30 [DBG] Creating userinfo response
2019-07-28 16:21:11.878 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:21:11.879 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:21:12.140 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:12.140 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:21:12.205 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:21:12.515 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:12.647 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:21:12.647 +05:30 [DBG] End userinfo request
2019-07-28 16:21:12.730 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:21:12.757 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:21:12.758 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:21:12.758 +05:30 [DBG] Rendering check session result
2019-07-28 16:21:14.092 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:21:14.134 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:14.134 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:14.135 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:21:14.136 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:21:14.136 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:21:14.136 +05:30 [DBG] Start discovery request
2019-07-28 16:21:14.972 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:21:15.614 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:21:15.615 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:21:15.615 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:21:15.615 +05:30 [DBG] Rendering check session result
2019-07-28 16:21:33.520 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:21:33.561 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:33.570 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:38.766 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:21:38.873 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:21:38.873 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:21:38.874 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:21:38.875 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:21:38.875 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:21:38.875 +05:30 [DBG] Start userinfo request
2019-07-28 16:21:38.876 +05:30 [DBG] Bearer token found in header
2019-07-28 16:21:39.734 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:39.734 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:40.310 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:21:40.310 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:21:40.355 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:21:40.355 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564311068,"exp":1564314668,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564311065,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:21:40.356 +05:30 [DBG] Creating userinfo response
2019-07-28 16:21:40.356 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:21:40.356 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:21:40.606 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:40.607 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:21:40.607 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:21:40.811 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:21:41.055 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:21:41.055 +05:30 [DBG] End userinfo request
2019-07-28 16:22:08.768 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:22:08.830 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:22:08.830 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:22:08.919 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:22:08.959 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:22:08.959 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:22:08.960 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:22:08.962 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:22:08.973 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:22:08.973 +05:30 [DBG] Start userinfo request
2019-07-28 16:22:08.985 +05:30 [DBG] Bearer token found in header
2019-07-28 16:22:09.652 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:22:09.652 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:22:10.309 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:22:10.309 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:22:10.389 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:22:10.389 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564311068,"exp":1564314668,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564311065,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:22:10.390 +05:30 [DBG] Creating userinfo response
2019-07-28 16:22:10.390 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:22:10.390 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:22:10.610 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:22:10.610 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:22:10.610 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:22:10.859 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:22:11.057 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:22:11.057 +05:30 [DBG] End userinfo request
2019-07-28 16:22:17.494 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:22:17.547 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:22:17.548 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:22:26.654 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:22:26.717 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:22:26.717 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:22:26.717 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:22:26.718 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:22:26.718 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:22:26.718 +05:30 [DBG] Start userinfo request
2019-07-28 16:22:26.718 +05:30 [DBG] Bearer token found in header
2019-07-28 16:22:27.400 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:22:27.400 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:22:28.101 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:22:28.102 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:22:28.173 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:22:28.174 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564311068,"exp":1564314668,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564311065,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:22:28.176 +05:30 [DBG] Creating userinfo response
2019-07-28 16:22:28.177 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:22:28.177 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:22:28.431 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:22:28.432 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:22:28.432 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:22:28.643 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:22:28.854 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:22:28.854 +05:30 [DBG] End userinfo request
2019-07-28 16:24:43.007 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:24:43.053 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:24:43.054 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:24:43.054 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:24:43.055 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:24:43.055 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:24:43.055 +05:30 [DBG] Start discovery request
2019-07-28 16:24:43.600 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:24:44.092 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:24:44.093 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:24:44.093 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:24:44.093 +05:30 [DBG] Rendering check session result
2019-07-28 16:27:07.685 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:27:07.781 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:27:07.781 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:27:07.782 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:27:07.783 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:27:07.783 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:27:07.783 +05:30 [DBG] Start discovery request
2019-07-28 16:27:08.276 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:27:08.697 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:27:08.697 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:27:08.697 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:27:08.698 +05:30 [DBG] Rendering check session result
2019-07-28 16:27:10.743 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:27:10.777 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:27:10.777 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:27:10.798 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:27:10.852 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:27:10.852 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:27:10.852 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:27:10.853 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:27:10.853 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:27:10.853 +05:30 [DBG] Start userinfo request
2019-07-28 16:27:10.853 +05:30 [DBG] Bearer token found in header
2019-07-28 16:27:11.431 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:27:11.431 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:27:11.935 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:27:11.935 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:27:11.988 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:27:11.988 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564311068,"exp":1564314668,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564311065,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:27:11.988 +05:30 [DBG] Creating userinfo response
2019-07-28 16:27:11.988 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:27:11.988 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:27:12.213 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:27:12.213 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:27:12.213 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:27:12.445 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:27:12.591 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:27:12.591 +05:30 [DBG] End userinfo request
2019-07-28 16:30:24.518 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:30:24.857 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:30:24.857 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:30:24.857 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:30:24.858 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:30:24.858 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:30:24.858 +05:30 [DBG] Start discovery request
2019-07-28 16:30:25.446 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:30:25.904 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:30:25.905 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:30:25.905 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:30:25.905 +05:30 [DBG] Rendering check session result
2019-07-28 16:37:24.704 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:37:24.763 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:37:24.763 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:37:24.764 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:37:24.764 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:37:24.764 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:37:24.764 +05:30 [DBG] Start discovery request
2019-07-28 16:37:25.254 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:37:26.014 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:37:26.014 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:37:26.014 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:37:26.014 +05:30 [DBG] Rendering check session result
2019-07-28 16:39:18.136 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:39:18.171 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:39:18.171 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:39:18.172 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:39:18.172 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:39:18.173 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:39:18.173 +05:30 [DBG] Start discovery request
2019-07-28 16:39:18.562 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:39:18.840 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:39:18.840 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:39:18.840 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:39:18.840 +05:30 [DBG] Rendering check session result
2019-07-28 16:40:01.565 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:40:01.605 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:40:01.605 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:40:01.605 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:40:01.606 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:40:01.606 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:40:01.606 +05:30 [DBG] Start discovery request
2019-07-28 16:40:02.200 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:40:02.398 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:40:02.398 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:40:02.398 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:40:02.398 +05:30 [DBG] Rendering check session result
2019-07-28 16:41:43.032 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:41:43.071 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:41:43.071 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:41:43.072 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:41:43.072 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:41:43.072 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:41:43.072 +05:30 [DBG] Start discovery request
2019-07-28 16:41:43.474 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:41:44.201 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:41:44.201 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:41:44.201 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:41:44.201 +05:30 [DBG] Rendering check session result
2019-07-28 16:42:10.845 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:42:10.898 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:42:10.898 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:42:10.899 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:42:10.899 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:42:10.899 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:42:10.899 +05:30 [DBG] Start discovery request
2019-07-28 16:42:11.451 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:42:11.841 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:42:11.841 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:42:11.841 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:42:11.841 +05:30 [DBG] Rendering check session result
2019-07-28 16:42:18.214 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 16:42:18.215 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 16:42:18.215 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 16:42:18.215 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:42:18.215 +05:30 [DBG] Start end session request validation
2019-07-28 16:42:18.216 +05:30 [DBG] Start identity token validation
2019-07-28 16:42:18.642 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 16:42:18.644 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 16:42:18.644 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 16:42:18.644 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:42:18.644 +05:30 [DBG] Start end session request validation
2019-07-28 16:42:18.645 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 16:42:18.645 +05:30 [DBG] Success validating end session request from null
2019-07-28 16:42:18.703 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:42:18.703 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:42:18.704 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 16:42:18.837 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:42:18.886 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564311068,"exp":1564311368,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"0b853f4c8a4748c0a2c5ec5b6fd6c9ea","iat":1564311068,"at_hash":"gCgQN2NNT8tESy3gXObxMA","sid":"cf04b006e11417786bf007faf7f45596","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564311065,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:42:18.886 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 16:42:18.886 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 16:42:22.859 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 16:42:22.931 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 16:42:22.931 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 16:42:22.931 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 16:42:22.932 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:00000006","TimeStamp":"2019-07-28T11:12:22.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 16:42:23.052 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 16:42:23.054 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 16:42:23.055 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 16:42:23.055 +05:30 [DBG] Processing signout callback request
2019-07-28 16:42:23.579 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:42:23.579 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:42:23.579 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 16:42:23.579 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 16:42:23.579 +05:30 [INF] Successful signout callback.
2019-07-28 16:42:23.579 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 16:42:23.579 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 16:42:25.694 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 16:42:25.695 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 16:42:25.695 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 16:42:25.695 +05:30 [DBG] Processing signout callback request
2019-07-28 16:42:26.461 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:42:26.462 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:42:26.462 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 16:42:26.462 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 16:42:26.462 +05:30 [INF] Successful signout callback.
2019-07-28 16:42:26.463 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 16:42:26.463 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 16:42:28.371 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:42:28.415 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:42:28.415 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:42:28.415 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:42:28.416 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:42:28.417 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:42:28.417 +05:30 [DBG] Start discovery request
2019-07-28 16:42:28.830 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:42:28.899 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 16:42:28.900 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 16:42:28.902 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 16:42:28.903 +05:30 [DBG] Start authorize request
2019-07-28 16:42:28.903 +05:30 [DBG] No user present in authorize request
2019-07-28 16:42:28.903 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:42:29.474 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:42:29.475 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:42:29.614 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:42:30.036 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:42:30.191 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:42:30.653 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:42:30.653 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:42:30.653 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"5fe0ffadf38f4359aaeb7ce8f19c3d21","UiLocales":null,"Nonce":"94699fb7a8ba46378dccc5fb31ce36bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"5fe0ffadf38f4359aaeb7ce8f19c3d21","nonce":"94699fb7a8ba46378dccc5fb31ce36bc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:42:30.654 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 16:42:30.741 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:42:31.495 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:42:31.495 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:42:31.736 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:42:32.243 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:42:32.454 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:42:33.047 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:42:33.048 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:42:33.801 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:42:33.801 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:43:00.492 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 16:43:00.538 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:43:01.240 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:43:01.240 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:43:01.449 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:43:01.944 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:43:02.140 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:43:02.645 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:43:02.646 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:43:02.926 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:43:02.926 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 16:43:02.926 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 16:43:02.927 +05:30 [DBG] Adding auth_time claim with value: 1564312382
2019-07-28 16:43:02.927 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:43:03.027 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:0000000B","TimeStamp":"2019-07-28T11:13:03.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 16:43:03.769 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:43:03.769 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:43:03.807 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 16:43:03.808 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 16:43:03.808 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 16:43:03.808 +05:30 [DBG] Start authorize callback request
2019-07-28 16:43:03.808 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:43:03.808 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:43:04.309 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:43:04.310 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:43:04.432 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:43:04.863 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:43:05.024 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:43:05.442 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:43:05.442 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:43:05.443 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"5fe0ffadf38f4359aaeb7ce8f19c3d21","UiLocales":null,"Nonce":"94699fb7a8ba46378dccc5fb31ce36bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"38ec3f69c9e0fe00330d7cb7ab1bc1b3","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"5fe0ffadf38f4359aaeb7ce8f19c3d21","nonce":"94699fb7a8ba46378dccc5fb31ce36bc"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:43:05.509 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 16:43:05.510 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 16:43:05.510 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 16:43:05.510 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:43:05.672 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 16:43:05.672 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 16:43:05.675 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZIgQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Nsyw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:0000000C","TimeStamp":"2019-07-28T11:13:05.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 16:43:05.675 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"5fe0ffadf38f4359aaeb7ce8f19c3d21","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 16:43:05.676 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:43:05.676 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:43:06.225 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:43:06.274 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:43:06.274 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:43:06.275 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:43:06.275 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:43:06.275 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:43:06.276 +05:30 [DBG] Start discovery request
2019-07-28 16:43:06.670 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:43:06.690 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 16:43:06.734 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:43:06.734 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:43:06.735 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 16:43:06.736 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 16:43:06.736 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 16:43:06.736 +05:30 [DBG] Start key discovery request
2019-07-28 16:43:06.795 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:43:06.840 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:43:06.840 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:43:06.848 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:43:06.885 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:43:06.885 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:43:06.885 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:43:06.886 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:43:06.886 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:43:06.886 +05:30 [DBG] Start userinfo request
2019-07-28 16:43:06.886 +05:30 [DBG] Bearer token found in header
2019-07-28 16:43:07.370 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:43:07.371 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:43:07.893 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:43:07.893 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:43:07.935 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:43:07.935 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312385,"exp":1564315985,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312382,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:43:07.935 +05:30 [DBG] Creating userinfo response
2019-07-28 16:43:07.935 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:43:07.936 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:43:08.148 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:43:08.149 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:43:08.149 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:43:08.391 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:43:08.555 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:43:08.555 +05:30 [DBG] End userinfo request
2019-07-28 16:43:08.641 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:43:08.641 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:43:08.642 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:43:08.642 +05:30 [DBG] Rendering check session result
2019-07-28 16:43:09.459 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:43:09.500 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:43:09.500 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:43:09.501 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:43:09.502 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:43:09.502 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:43:09.503 +05:30 [DBG] Start discovery request
2019-07-28 16:43:10.152 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:43:10.515 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:43:10.515 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:43:10.515 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:43:10.515 +05:30 [DBG] Rendering check session result
2019-07-28 16:44:06.648 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:44:06.697 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:44:06.697 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:44:06.698 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:44:06.698 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:44:06.698 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:44:06.698 +05:30 [DBG] Start discovery request
2019-07-28 16:44:07.102 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:44:12.147 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:44:12.147 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:44:12.148 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:44:12.148 +05:30 [DBG] Rendering check session result
2019-07-28 16:44:24.297 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 16:44:24.298 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 16:44:24.298 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 16:44:24.298 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:44:24.299 +05:30 [DBG] Start end session request validation
2019-07-28 16:44:24.299 +05:30 [DBG] Start identity token validation
2019-07-28 16:44:25.179 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:44:25.179 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:44:25.179 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 16:44:25.272 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:44:25.272 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312385,"exp":1564312685,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"94699fb7a8ba46378dccc5fb31ce36bc","iat":1564312385,"at_hash":"aVVng-74gtCy4nvxHeDTyw","sid":"38ec3f69c9e0fe00330d7cb7ab1bc1b3","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312382,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:44:25.273 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 16:44:25.273 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 16:44:25.498 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 16:44:25.498 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 16:44:25.498 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 16:44:25.499 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:00000017","TimeStamp":"2019-07-28T11:14:25.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 16:44:25.924 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 16:44:25.929 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 16:44:25.930 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 16:44:25.931 +05:30 [DBG] Processing signout callback request
2019-07-28 16:44:26.591 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:44:26.591 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:44:26.591 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 16:44:26.591 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 16:44:26.591 +05:30 [INF] Successful signout callback.
2019-07-28 16:44:26.591 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 16:44:26.591 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 16:44:32.167 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:44:32.207 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:44:32.208 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:44:32.208 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:44:32.209 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:44:32.209 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:44:32.209 +05:30 [DBG] Start discovery request
2019-07-28 16:44:33.274 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:44:33.398 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 16:44:33.398 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 16:44:33.399 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 16:44:33.399 +05:30 [DBG] Start authorize request
2019-07-28 16:44:33.399 +05:30 [DBG] No user present in authorize request
2019-07-28 16:44:33.399 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:44:33.910 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:44:33.910 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:44:34.039 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:44:34.502 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:44:34.721 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:44:35.170 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:44:35.171 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:44:35.171 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ce91be10203d4dac9a583a4928d5beda","UiLocales":null,"Nonce":"f67a1c8463084bf6acfdc2a65dc48979","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"ce91be10203d4dac9a583a4928d5beda","nonce":"f67a1c8463084bf6acfdc2a65dc48979"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:44:35.171 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 16:44:35.353 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:44:36.100 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:44:36.100 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:44:36.305 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:44:36.957 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:44:37.240 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:44:37.761 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:44:37.761 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:44:38.472 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:44:38.473 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:45:05.659 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 16:45:05.773 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:45:06.396 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:45:06.396 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:45:06.575 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:45:07.043 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:45:07.221 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:45:07.589 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:45:07.589 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:45:07.904 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:45:07.904 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 16:45:07.905 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 16:45:07.905 +05:30 [DBG] Adding auth_time claim with value: 1564312507
2019-07-28 16:45:07.905 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:45:07.996 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:0000001C","TimeStamp":"2019-07-28T11:15:07.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 16:45:08.325 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:45:08.325 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:45:08.444 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 16:45:08.446 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 16:45:08.446 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 16:45:08.446 +05:30 [DBG] Start authorize callback request
2019-07-28 16:45:08.446 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:45:08.446 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:45:08.824 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:45:08.825 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:45:08.931 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:45:09.137 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:45:09.265 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:45:09.550 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:45:09.551 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:45:09.551 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"ce91be10203d4dac9a583a4928d5beda","UiLocales":null,"Nonce":"f67a1c8463084bf6acfdc2a65dc48979","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"009ff3056437afac29bc060c6c577a1c","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"ce91be10203d4dac9a583a4928d5beda","nonce":"f67a1c8463084bf6acfdc2a65dc48979"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:45:09.641 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 16:45:09.641 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 16:45:09.641 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 16:45:09.641 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:45:09.832 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 16:45:09.832 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 16:45:09.836 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****buaw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HRYQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:0000001D","TimeStamp":"2019-07-28T11:15:09.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 16:45:09.836 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"ce91be10203d4dac9a583a4928d5beda","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 16:45:09.836 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:45:09.837 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:45:10.390 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:45:10.427 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:45:10.427 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:45:10.427 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:45:10.427 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:45:10.427 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:45:10.427 +05:30 [DBG] Start discovery request
2019-07-28 16:45:10.885 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:45:11.052 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 16:45:11.087 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:45:11.088 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:45:11.088 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 16:45:11.089 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 16:45:11.089 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 16:45:11.089 +05:30 [DBG] Start key discovery request
2019-07-28 16:45:11.153 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:45:11.185 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:45:11.186 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:45:11.195 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:45:11.240 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:45:11.240 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:45:11.240 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:45:11.240 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:45:11.240 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:45:11.240 +05:30 [DBG] Start userinfo request
2019-07-28 16:45:11.240 +05:30 [DBG] Bearer token found in header
2019-07-28 16:45:11.684 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:45:11.684 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:45:12.041 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:45:12.041 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:45:12.091 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:45:12.093 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312509,"exp":1564316109,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312507,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:45:12.093 +05:30 [DBG] Creating userinfo response
2019-07-28 16:45:12.093 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:45:12.093 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:45:12.292 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:45:12.292 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:45:12.292 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:45:12.470 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:45:12.670 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:45:12.670 +05:30 [DBG] End userinfo request
2019-07-28 16:45:12.947 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:45:12.947 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:45:12.947 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:45:12.947 +05:30 [DBG] Rendering check session result
2019-07-28 16:45:14.080 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:45:14.124 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:45:14.124 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:45:14.124 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:45:14.125 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:45:14.125 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:45:14.125 +05:30 [DBG] Start discovery request
2019-07-28 16:45:14.643 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:46:05.860 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:46:05.860 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:46:05.860 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:46:05.860 +05:30 [DBG] Rendering check session result
2019-07-28 16:46:15.067 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 16:46:15.067 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 16:46:15.068 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 16:46:15.068 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:46:15.068 +05:30 [DBG] Start end session request validation
2019-07-28 16:46:15.068 +05:30 [DBG] Start identity token validation
2019-07-28 16:46:15.517 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:46:15.518 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:46:15.518 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 16:46:15.586 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:46:15.587 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312509,"exp":1564312809,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"f67a1c8463084bf6acfdc2a65dc48979","iat":1564312509,"at_hash":"pekVmkzP4E2Zrx16LzU8HQ","sid":"009ff3056437afac29bc060c6c577a1c","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312507,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:46:15.587 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 16:46:15.587 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 16:46:15.736 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 16:46:15.751 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 16:46:15.751 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 16:46:15.751 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUHJ:00000026","TimeStamp":"2019-07-28T11:16:15.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 16:46:16.595 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 16:46:16.596 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 16:46:16.596 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 16:46:16.596 +05:30 [DBG] Processing signout callback request
2019-07-28 16:46:17.073 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:46:17.073 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:46:17.073 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 16:46:17.073 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 16:46:17.073 +05:30 [INF] Successful signout callback.
2019-07-28 16:46:17.073 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 16:46:17.073 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 16:50:32.448 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:50:32.706 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:50:32.706 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:50:32.706 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:50:32.707 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:50:32.707 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:50:32.707 +05:30 [DBG] Start discovery request
2019-07-28 16:50:33.126 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:50:33.267 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 16:50:33.268 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 16:50:33.268 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 16:50:33.268 +05:30 [DBG] Start authorize request
2019-07-28 16:50:33.268 +05:30 [DBG] No user present in authorize request
2019-07-28 16:50:33.268 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:50:33.848 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:33.848 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:34.006 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:34.393 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:34.556 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:34.994 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:34.995 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:50:34.995 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"60ed2b8fabad432a9deb0a9762dc0381","UiLocales":null,"Nonce":"5975d33571a14ffeb1830585ffda47d4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"60ed2b8fabad432a9deb0a9762dc0381","nonce":"5975d33571a14ffeb1830585ffda47d4"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:50:34.995 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 16:50:35.114 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:50:35.844 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:35.845 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:36.034 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:36.544 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:36.753 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:37.361 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:37.361 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:50:38.001 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:38.002 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:50.943 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 16:50:50.993 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:50:51.672 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:51.672 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:51.864 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:52.373 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:52.574 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:53.072 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:53.073 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:50:53.338 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:50:53.338 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 16:50:53.338 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 16:50:53.339 +05:30 [DBG] Adding auth_time claim with value: 1564312853
2019-07-28 16:50:53.339 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:50:53.457 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUHL:00000004","TimeStamp":"2019-07-28T11:20:53.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 16:50:54.198 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:54.199 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:54.251 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 16:50:54.252 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 16:50:54.252 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 16:50:54.252 +05:30 [DBG] Start authorize callback request
2019-07-28 16:50:54.252 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:50:54.252 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:50:54.784 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:54.784 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:54.910 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:55.361 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:55.524 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:55.926 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:50:55.927 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:50:55.927 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"60ed2b8fabad432a9deb0a9762dc0381","UiLocales":null,"Nonce":"5975d33571a14ffeb1830585ffda47d4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"9179a0913438ad357191f328dad8cf8a","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"60ed2b8fabad432a9deb0a9762dc0381","nonce":"5975d33571a14ffeb1830585ffda47d4"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:50:55.985 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 16:50:55.985 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 16:50:55.985 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 16:50:55.985 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:50:56.135 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 16:50:56.135 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 16:50:56.139 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qj9w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****R6pg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUHL:00000005","TimeStamp":"2019-07-28T11:20:56.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 16:50:56.139 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"60ed2b8fabad432a9deb0a9762dc0381","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 16:50:56.139 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:50:56.140 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:50:56.751 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:50:56.784 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:50:56.784 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:50:56.785 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:50:56.785 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:50:56.785 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:50:56.785 +05:30 [DBG] Start discovery request
2019-07-28 16:50:57.169 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:50:57.196 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 16:50:57.247 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:50:57.247 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:50:57.248 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 16:50:57.248 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 16:50:57.249 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 16:50:57.249 +05:30 [DBG] Start key discovery request
2019-07-28 16:50:57.320 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:50:57.387 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:50:57.388 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:50:57.399 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:50:57.447 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:50:57.448 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:50:57.448 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:50:57.448 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:50:57.448 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:50:57.448 +05:30 [DBG] Start userinfo request
2019-07-28 16:50:57.448 +05:30 [DBG] Bearer token found in header
2019-07-28 16:50:58.003 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:58.004 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:58.464 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:50:58.464 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:50:58.518 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:50:58.518 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312856,"exp":1564316456,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312853,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:50:58.518 +05:30 [DBG] Creating userinfo response
2019-07-28 16:50:58.518 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:50:58.518 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:50:58.767 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:58.767 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:50:58.767 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:50:58.990 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:50:59.137 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:50:59.137 +05:30 [DBG] End userinfo request
2019-07-28 16:50:59.212 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:50:59.213 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:50:59.213 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:50:59.213 +05:30 [DBG] Rendering check session result
2019-07-28 16:51:00.795 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:51:00.937 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:51:00.937 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:51:00.937 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:51:00.938 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:51:00.938 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:51:00.938 +05:30 [DBG] Start discovery request
2019-07-28 16:51:01.744 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:51:02.500 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:51:02.500 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:51:02.500 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:51:02.500 +05:30 [DBG] Rendering check session result
2019-07-28 16:51:13.702 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 16:51:13.704 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 16:51:13.704 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 16:51:13.704 +05:30 [DBG] Start authorize request
2019-07-28 16:51:13.704 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:51:13.704 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:51:14.625 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:51:14.625 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:51:14.805 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:51:15.212 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:51:15.403 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:51:15.848 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:51:15.848 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:51:15.849 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"75ad0190ceef4dceae9467ce5d0969e3","UiLocales":null,"Nonce":"af8778ad657a454194f6cf793c0f1bab","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"9179a0913438ad357191f328dad8cf8a","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"75ad0190ceef4dceae9467ce5d0969e3","nonce":"af8778ad657a454194f6cf793c0f1bab"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:51:15.911 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 16:51:15.911 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 16:51:15.911 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 16:51:15.912 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:51:16.051 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 16:51:16.052 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 16:51:16.055 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UANw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****enGw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUHL:0000000D","TimeStamp":"2019-07-28T11:21:16.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 16:51:16.055 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"75ad0190ceef4dceae9467ce5d0969e3","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 16:51:16.612 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:51:16.677 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:51:16.678 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:51:16.678 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:51:16.713 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:51:16.713 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:51:16.713 +05:30 [DBG] Start discovery request
2019-07-28 16:51:17.113 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:51:17.158 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 16:51:17.207 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:51:17.208 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:51:17.208 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 16:51:17.209 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 16:51:17.210 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 16:51:17.210 +05:30 [DBG] Start key discovery request
2019-07-28 16:51:17.266 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:51:17.300 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:51:17.300 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:51:17.309 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:51:17.364 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:51:17.364 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:51:17.365 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:51:17.365 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:51:17.365 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:51:17.365 +05:30 [DBG] Start userinfo request
2019-07-28 16:51:17.365 +05:30 [DBG] Bearer token found in header
2019-07-28 16:51:17.931 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:51:17.931 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:51:18.383 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:51:18.383 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:51:18.451 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:51:18.452 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312876,"exp":1564316476,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312853,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:51:18.497 +05:30 [DBG] Creating userinfo response
2019-07-28 16:51:18.497 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:51:18.497 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:51:18.693 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:51:18.693 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:51:18.693 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:51:18.937 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:51:19.120 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:51:19.120 +05:30 [DBG] End userinfo request
2019-07-28 16:51:19.188 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:51:19.188 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:51:19.189 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:51:19.189 +05:30 [DBG] Rendering check session result
2019-07-28 16:51:20.436 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:51:20.527 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:51:20.527 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:51:20.528 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:51:20.529 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:51:20.529 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:51:20.529 +05:30 [DBG] Start discovery request
2019-07-28 16:51:21.426 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:51:21.925 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:51:21.925 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:51:21.926 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:51:21.926 +05:30 [DBG] Rendering check session result
2019-07-28 16:52:36.412 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:52:36.480 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:52:36.480 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:52:36.481 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:52:36.481 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:52:36.482 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:52:36.482 +05:30 [DBG] Start discovery request
2019-07-28 16:52:37.055 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:52:37.573 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:52:37.573 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:52:37.573 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:52:37.573 +05:30 [DBG] Rendering check session result
2019-07-28 16:52:46.303 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 16:52:46.304 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 16:52:46.304 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 16:52:46.304 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 16:52:46.304 +05:30 [DBG] Start end session request validation
2019-07-28 16:52:46.304 +05:30 [DBG] Start identity token validation
2019-07-28 16:52:46.681 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:52:46.681 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:52:46.681 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 16:52:46.776 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:52:46.776 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564312876,"exp":1564313176,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"af8778ad657a454194f6cf793c0f1bab","iat":1564312876,"at_hash":"yeG20SKsMXaU7rKB1rjNpw","sid":"9179a0913438ad357191f328dad8cf8a","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564312853,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:52:46.777 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 16:52:46.777 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 16:52:46.874 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 16:52:46.875 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 16:52:46.875 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 16:52:46.875 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUHM:00000004","TimeStamp":"2019-07-28T11:22:46.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 16:52:47.079 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 16:52:47.080 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 16:52:47.081 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 16:52:47.081 +05:30 [DBG] Processing signout callback request
2019-07-28 16:52:47.548 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:52:47.549 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:52:47.549 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 16:52:47.549 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 16:52:47.549 +05:30 [INF] Successful signout callback.
2019-07-28 16:52:47.549 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 16:52:47.549 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 16:52:51.524 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:52:51.554 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:52:51.554 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:52:51.555 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:52:51.556 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:52:51.556 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:52:51.556 +05:30 [DBG] Start discovery request
2019-07-28 16:52:51.974 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:52:52.028 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 16:52:52.029 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 16:52:52.029 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 16:52:52.029 +05:30 [DBG] Start authorize request
2019-07-28 16:52:52.029 +05:30 [DBG] No user present in authorize request
2019-07-28 16:52:52.029 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:52:52.446 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:52:52.446 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:52:52.614 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:52:52.979 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:52:53.119 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:52:53.361 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:52:53.362 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:52:53.370 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"26302eb716f24e58a1ebd2af73f427fc","UiLocales":null,"Nonce":"1c9631116172457f979da80ee4f22913","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"26302eb716f24e58a1ebd2af73f427fc","nonce":"1c9631116172457f979da80ee4f22913"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:52:53.370 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 16:52:53.435 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:52:54.151 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:52:54.152 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:52:54.349 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:52:54.690 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:52:54.855 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:52:55.237 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:52:55.237 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:52:55.847 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:52:55.847 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:29.706 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 16:53:29.763 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:53:30.357 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:30.357 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:30.587 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:30.927 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:53:31.108 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:31.451 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:53:31.451 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:53:31.657 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:53:31.657 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 16:53:31.657 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 16:53:31.657 +05:30 [DBG] Adding auth_time claim with value: 1564313011
2019-07-28 16:53:31.695 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:53:31.779 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUHM:00000009","TimeStamp":"2019-07-28T11:23:31.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 16:53:32.461 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:32.461 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:32.507 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 16:53:32.570 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 16:53:32.570 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 16:53:32.571 +05:30 [DBG] Start authorize callback request
2019-07-28 16:53:32.571 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 16:53:32.571 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 16:53:33.026 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:33.026 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:33.195 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:33.483 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:53:33.638 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:33.925 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 16:53:33.926 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 16:53:33.926 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"26302eb716f24e58a1ebd2af73f427fc","UiLocales":null,"Nonce":"1c9631116172457f979da80ee4f22913","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f611d8d97a2af7783d16ff017cc7de34","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"26302eb716f24e58a1ebd2af73f427fc","nonce":"1c9631116172457f979da80ee4f22913"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 16:53:33.999 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 16:53:33.999 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 16:53:34.000 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 16:53:34.009 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 16:53:34.130 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 16:53:34.157 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 16:53:34.164 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****kXmw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****AoNw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUHM:0000000A","TimeStamp":"2019-07-28T11:23:34.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 16:53:34.164 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"26302eb716f24e58a1ebd2af73f427fc","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 16:53:34.164 +05:30 [DBG] Augmenting SignInContext
2019-07-28 16:53:34.165 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 16:53:34.636 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:53:34.668 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:34.668 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:34.669 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:53:34.670 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:53:34.670 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:53:34.670 +05:30 [DBG] Start discovery request
2019-07-28 16:53:34.998 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:53:35.017 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 16:53:35.042 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:35.042 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:35.042 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 16:53:35.042 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 16:53:35.043 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 16:53:35.043 +05:30 [DBG] Start key discovery request
2019-07-28 16:53:35.087 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:53:35.119 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:35.120 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:35.130 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:53:35.171 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:35.171 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:35.172 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:53:35.173 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:53:35.173 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:53:35.173 +05:30 [DBG] Start userinfo request
2019-07-28 16:53:35.174 +05:30 [DBG] Bearer token found in header
2019-07-28 16:53:35.682 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:35.682 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:36.088 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:36.089 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:36.183 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:53:36.183 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:53:36.183 +05:30 [DBG] Creating userinfo response
2019-07-28 16:53:36.183 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:53:36.184 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:53:36.379 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:36.380 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:53:36.380 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:53:36.524 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:36.670 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:53:36.670 +05:30 [DBG] End userinfo request
2019-07-28 16:53:36.725 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:53:36.725 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:53:36.725 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:53:36.725 +05:30 [DBG] Rendering check session result
2019-07-28 16:53:37.371 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 16:53:37.427 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:37.427 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:37.427 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 16:53:37.428 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 16:53:37.428 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 16:53:37.428 +05:30 [DBG] Start discovery request
2019-07-28 16:53:37.823 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 16:53:38.087 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 16:53:38.087 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 16:53:38.087 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 16:53:38.087 +05:30 [DBG] Rendering check session result
2019-07-28 16:53:41.060 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:53:41.150 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:41.151 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:41.157 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:53:41.184 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:53:41.184 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:53:41.184 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:53:41.184 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:53:41.185 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:53:41.185 +05:30 [DBG] Start userinfo request
2019-07-28 16:53:41.185 +05:30 [DBG] Bearer token found in header
2019-07-28 16:53:41.640 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:41.640 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:42.224 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:53:42.224 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:53:42.333 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:53:42.334 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:53:42.334 +05:30 [DBG] Creating userinfo response
2019-07-28 16:53:42.334 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:53:42.334 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:53:42.705 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:42.705 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:53:42.705 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:53:42.893 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:53:43.006 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:53:43.006 +05:30 [DBG] End userinfo request
2019-07-28 16:55:22.329 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:55:22.394 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:55:22.394 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:55:22.429 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:55:22.477 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:55:22.477 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:55:22.477 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:55:22.484 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:55:22.484 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:55:22.484 +05:30 [DBG] Start userinfo request
2019-07-28 16:55:22.484 +05:30 [DBG] Bearer token found in header
2019-07-28 16:55:23.060 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:23.060 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:23.168 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:55:23.264 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:55:23.264 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:55:23.264 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:55:23.265 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:55:23.265 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:55:23.265 +05:30 [DBG] Start userinfo request
2019-07-28 16:55:23.266 +05:30 [DBG] Bearer token found in header
2019-07-28 16:55:23.745 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:23.745 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:24.067 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:55:24.067 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:55:24.069 +05:30 [DBG] Creating userinfo response
2019-07-28 16:55:24.070 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:24.070 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:24.182 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:24.182 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:24.521 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:24.522 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:55:24.522 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:24.824 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:25.127 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:25.127 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:25.214 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:55:25.214 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:55:25.214 +05:30 [DBG] End userinfo request
2019-07-28 16:55:25.215 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:55:25.216 +05:30 [DBG] Creating userinfo response
2019-07-28 16:55:25.216 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:25.216 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:25.403 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:25.403 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:55:25.404 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:25.579 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:25.700 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:55:25.700 +05:30 [DBG] End userinfo request
2019-07-28 16:55:25.941 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:55:25.983 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:55:25.983 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:55:25.984 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:55:25.984 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:55:25.984 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:55:25.984 +05:30 [DBG] Start userinfo request
2019-07-28 16:55:25.984 +05:30 [DBG] Bearer token found in header
2019-07-28 16:55:26.559 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:55:26.666 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:55:26.666 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:55:26.666 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:55:26.667 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:55:26.667 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:55:26.667 +05:30 [DBG] Start userinfo request
2019-07-28 16:55:26.667 +05:30 [DBG] Bearer token found in header
2019-07-28 16:55:26.852 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:26.853 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:27.617 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:27.617 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:27.771 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:27.772 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:27.970 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:55:27.970 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:55:27.971 +05:30 [DBG] Creating userinfo response
2019-07-28 16:55:27.971 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:27.972 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:28.315 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:28.315 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:55:28.317 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:28.386 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:55:28.386 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:55:28.731 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:55:28.731 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:55:28.732 +05:30 [DBG] Creating userinfo response
2019-07-28 16:55:28.732 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:28.732 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:28.803 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:29.064 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:29.064 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:55:29.064 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:55:29.276 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:55:29.279 +05:30 [DBG] End userinfo request
2019-07-28 16:55:29.350 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:55:29.460 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:55:29.460 +05:30 [DBG] End userinfo request
2019-07-28 16:56:40.338 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:56:40.422 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:56:40.422 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:56:40.444 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:56:40.467 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:56:40.467 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:56:40.467 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:56:40.467 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:56:40.467 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:56:40.467 +05:30 [DBG] Start userinfo request
2019-07-28 16:56:40.468 +05:30 [DBG] Bearer token found in header
2019-07-28 16:56:40.880 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:56:40.880 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:56:40.954 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:56:41.059 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:56:41.059 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:56:41.059 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:56:41.163 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:56:41.164 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:56:41.164 +05:30 [DBG] Start userinfo request
2019-07-28 16:56:41.165 +05:30 [DBG] Bearer token found in header
2019-07-28 16:56:41.165 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:56:41.261 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:56:41.261 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:56:41.262 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:56:41.262 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:56:41.262 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:56:41.262 +05:30 [DBG] Start userinfo request
2019-07-28 16:56:41.262 +05:30 [DBG] Bearer token found in header
2019-07-28 16:56:41.462 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:56:41.506 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:56:41.752 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:56:41.752 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:56:41.752 +05:30 [DBG] Creating userinfo response
2019-07-28 16:56:41.752 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:41.752 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:42.255 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:56:42.255 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:56:42.256 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:42.935 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:56:43.041 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:56:43.041 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:56:43.244 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:56:43.244 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:56:43.500 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:56:43.501 +05:30 [DBG] End userinfo request
2019-07-28 16:56:43.973 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:56:44.011 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:56:44.123 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:56:44.123 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:56:44.129 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:56:44.130 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:56:44.130 +05:30 [DBG] Creating userinfo response
2019-07-28 16:56:44.130 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:44.130 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:44.227 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:56:44.227 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:56:44.227 +05:30 [DBG] Creating userinfo response
2019-07-28 16:56:44.227 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:44.227 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:44.382 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:56:44.412 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:56:44.412 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:44.478 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:56:44.478 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:56:44.478 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:56:44.806 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:56:44.914 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:56:45.013 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:56:45.013 +05:30 [DBG] End userinfo request
2019-07-28 16:56:45.089 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:56:45.089 +05:30 [DBG] End userinfo request
2019-07-28 16:57:45.984 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:57:46.037 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:57:46.037 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:57:46.080 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:57:46.135 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:57:46.135 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:57:46.135 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:57:46.137 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:57:46.137 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:57:46.137 +05:30 [DBG] Start userinfo request
2019-07-28 16:57:46.137 +05:30 [DBG] Bearer token found in header
2019-07-28 16:57:46.419 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:57:46.530 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:57:46.531 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:57:46.531 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:57:46.532 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:57:46.533 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:57:46.533 +05:30 [DBG] Start userinfo request
2019-07-28 16:57:46.533 +05:30 [DBG] Bearer token found in header
2019-07-28 16:57:46.660 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:57:46.874 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 16:57:46.922 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:57:46.922 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:57:47.051 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:57:47.135 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:57:47.135 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:57:47.135 +05:30 [DBG] Start userinfo request
2019-07-28 16:57:47.135 +05:30 [DBG] Bearer token found in header
2019-07-28 16:57:47.138 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 16:57:47.138 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 16:57:47.138 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 16:57:47.232 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 16:57:47.232 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 16:57:47.232 +05:30 [DBG] Start userinfo request
2019-07-28 16:57:47.232 +05:30 [DBG] Bearer token found in header
2019-07-28 16:57:47.534 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:47.596 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:47.884 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:47.884 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:48.922 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:48.960 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:49.013 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:49.013 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:49.014 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:49.015 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:49.370 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:57:49.429 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:57:49.489 +05:30 [DBG] Creating userinfo response
2019-07-28 16:57:49.489 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:49.489 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:49.541 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:49.541 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:49.876 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:57:49.908 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:57:49.909 +05:30 [DBG] Creating userinfo response
2019-07-28 16:57:49.909 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:49.912 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:50.147 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:50.347 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:57:50.347 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:50.814 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:50.814 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:51.255 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:51.256 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:57:51.256 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:51.410 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:57:51.411 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:57:51.411 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:51.411 +05:30 [DBG] Creating userinfo response
2019-07-28 16:57:51.412 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:51.413 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:51.748 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:51.748 +05:30 [DBG] angular_spa found in database: true
2019-07-28 16:57:51.862 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 16:57:51.949 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:51.950 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:57:51.950 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:52.264 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 16:57:52.265 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 16:57:52.265 +05:30 [DBG] Creating userinfo response
2019-07-28 16:57:52.265 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:52.265 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:52.378 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:57:52.379 +05:30 [DBG] End userinfo request
2019-07-28 16:57:52.422 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:57:52.423 +05:30 [DBG] End userinfo request
2019-07-28 16:57:52.659 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:52.822 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:52.823 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 16:57:52.823 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 16:57:53.476 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:57:53.477 +05:30 [DBG] End userinfo request
2019-07-28 16:57:53.611 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 16:57:53.800 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 16:57:53.800 +05:30 [DBG] End userinfo request
2019-07-28 17:03:46.233 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:03:46.293 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:03:46.293 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:03:46.294 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:03:46.295 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:03:46.295 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:03:46.295 +05:30 [DBG] Start discovery request
2019-07-28 17:03:47.006 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:03:48.188 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:03:48.627 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:03:48.627 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:03:48.830 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:03:48.952 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:03:48.953 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:03:48.955 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:03:48.955 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:03:48.955 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:03:48.955 +05:30 [DBG] Rendering check session result
2019-07-28 17:03:49.047 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:03:49.110 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:03:49.110 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:03:49.110 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:03:49.110 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:03:49.110 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:03:49.110 +05:30 [DBG] Start userinfo request
2019-07-28 17:03:49.110 +05:30 [DBG] Bearer token found in header
2019-07-28 17:03:50.589 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:03:50.589 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:03:52.754 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:03:52.754 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:03:52.869 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:03:52.869 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:03:52.870 +05:30 [DBG] Creating userinfo response
2019-07-28 17:03:52.870 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:03:52.870 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:03:53.120 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:03:53.120 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:03:53.120 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:03:53.361 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:03:53.507 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:03:53.507 +05:30 [DBG] End userinfo request
2019-07-28 17:03:56.098 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:03:56.165 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:03:56.165 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:03:56.183 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:03:56.227 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:03:56.227 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:03:56.227 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:03:56.229 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:03:56.229 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:03:56.229 +05:30 [DBG] Start userinfo request
2019-07-28 17:03:56.229 +05:30 [DBG] Bearer token found in header
2019-07-28 17:03:56.351 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:03:56.351 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:03:56.351 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:03:56.352 +05:30 [DBG] Processing signout request for 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 17:03:56.352 +05:30 [DBG] Start end session request validation
2019-07-28 17:03:56.352 +05:30 [DBG] Start identity token validation
2019-07-28 17:03:57.236 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:03:57.236 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:03:57.653 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:03:57.653 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:03:57.653 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 17:03:57.767 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:03:57.768 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564313314,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"1c9631116172457f979da80ee4f22913","iat":1564313014,"at_hash":"9mKOK2GJmSZnZ5lNGWS3AA","sid":"f611d8d97a2af7783d16ff017cc7de34","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:03:57.768 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:03:57.768 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 17:03:57.873 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:03:57.917 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:03:57.919 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:03:57.919 +05:30 [INF] {"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUI3:00000003","TimeStamp":"2019-07-28T11:33:57.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:03:58.088 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 17:03:58.088 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 17:03:58.088 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 17:03:58.088 +05:30 [DBG] Processing signout callback request
2019-07-28 17:03:58.202 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:03:58.202 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:03:58.396 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:03:58.433 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313014,"exp":1564316614,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564313011,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:03:58.434 +05:30 [DBG] Creating userinfo response
2019-07-28 17:03:58.434 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:03:58.434 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:03:58.790 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:03:58.790 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:03:58.790 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:03:59.136 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:03:59.375 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:03:59.375 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:03:59.375 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 17:03:59.376 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 17:03:59.376 +05:30 [INF] Successful signout callback.
2019-07-28 17:03:59.376 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 17:03:59.376 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 17:03:59.387 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:03:59.387 +05:30 [DBG] End userinfo request
2019-07-28 17:04:03.048 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:04:03.082 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:03.082 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:03.083 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:04:03.083 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:04:03.083 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:04:03.083 +05:30 [DBG] Start discovery request
2019-07-28 17:04:03.425 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:04:03.439 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 17:04:03.440 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 17:04:03.440 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 17:04:03.440 +05:30 [DBG] Start authorize request
2019-07-28 17:04:03.440 +05:30 [DBG] No user present in authorize request
2019-07-28 17:04:03.440 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:04:04.026 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:04.026 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:04.181 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:04.545 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:04.677 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:05.121 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:05.121 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:04:05.122 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"da3902e1aab2433e90ea697c96a51a23","UiLocales":null,"Nonce":"69a32bcb371f4d18bdf625a99c59cd49","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"da3902e1aab2433e90ea697c96a51a23","nonce":"69a32bcb371f4d18bdf625a99c59cd49"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:04:05.122 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 17:04:05.192 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:04:05.896 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:05.896 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:06.110 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:06.662 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:06.875 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:07.401 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:07.401 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:04:08.028 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:08.028 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:15.901 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:04:15.945 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:04:16.619 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:16.619 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:16.852 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:17.330 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:17.548 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:18.077 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:18.077 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:04:18.376 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:04:18.376 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 17:04:18.376 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 17:04:18.376 +05:30 [DBG] Adding auth_time claim with value: 1564313658
2019-07-28 17:04:18.377 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:04:18.462 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUI2:00000007","TimeStamp":"2019-07-28T11:34:18.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 17:04:19.220 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:19.220 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:19.234 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 17:04:19.234 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 17:04:19.234 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 17:04:19.234 +05:30 [DBG] Start authorize callback request
2019-07-28 17:04:19.235 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:04:19.235 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:04:19.706 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:19.707 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:19.852 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:20.217 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:20.489 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:20.947 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:04:20.947 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:04:20.947 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"da3902e1aab2433e90ea697c96a51a23","UiLocales":null,"Nonce":"69a32bcb371f4d18bdf625a99c59cd49","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ab17f55af9fd9b87c3400e8949d1e928","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"da3902e1aab2433e90ea697c96a51a23","nonce":"69a32bcb371f4d18bdf625a99c59cd49"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:04:21.019 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 17:04:21.019 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 17:04:21.019 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 17:04:21.019 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:04:21.213 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 17:04:21.213 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 17:04:21.217 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****LzlA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****H3IA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUI3:00000006","TimeStamp":"2019-07-28T11:34:21.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 17:04:21.218 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"da3902e1aab2433e90ea697c96a51a23","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 17:04:21.218 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:04:21.218 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:04:21.657 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:04:21.688 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:21.688 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:21.688 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:04:21.688 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:04:21.688 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:04:21.688 +05:30 [DBG] Start discovery request
2019-07-28 17:04:22.171 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:04:22.182 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 17:04:22.292 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:22.293 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:22.293 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 17:04:22.293 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 17:04:22.293 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 17:04:22.293 +05:30 [DBG] Start key discovery request
2019-07-28 17:04:22.328 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:04:22.395 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:22.395 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:22.406 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:04:22.468 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:22.468 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:22.469 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:04:22.470 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:04:22.470 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:04:22.471 +05:30 [DBG] Start userinfo request
2019-07-28 17:04:22.471 +05:30 [DBG] Bearer token found in header
2019-07-28 17:04:23.046 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:23.046 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:23.635 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:23.635 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:23.706 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:04:23.707 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:04:23.708 +05:30 [DBG] Creating userinfo response
2019-07-28 17:04:23.708 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:23.708 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:23.903 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:23.904 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:04:23.904 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:24.139 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:24.289 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:04:24.289 +05:30 [DBG] End userinfo request
2019-07-28 17:04:24.311 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:04:24.312 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:04:24.312 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:04:24.312 +05:30 [DBG] Rendering check session result
2019-07-28 17:04:24.745 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:04:24.825 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:24.825 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:24.826 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:04:24.826 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:04:24.826 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:04:24.827 +05:30 [DBG] Start discovery request
2019-07-28 17:04:25.323 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:04:25.430 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:04:25.443 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:25.443 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:25.444 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:04:25.444 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:04:25.444 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:04:25.445 +05:30 [DBG] Start userinfo request
2019-07-28 17:04:25.445 +05:30 [DBG] Bearer token found in header
2019-07-28 17:04:25.553 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:04:25.765 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:04:25.765 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:04:25.765 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:04:25.765 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:04:25.765 +05:30 [DBG] Rendering check session result
2019-07-28 17:04:25.765 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:04:25.765 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:04:25.766 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:04:25.766 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:04:25.766 +05:30 [DBG] Start userinfo request
2019-07-28 17:04:25.766 +05:30 [DBG] Bearer token found in header
2019-07-28 17:04:26.759 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:26.759 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:26.762 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:26.763 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:27.817 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:27.818 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:27.826 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:04:27.827 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:04:27.939 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:04:27.939 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:04:27.939 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:04:27.939 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:04:27.939 +05:30 [DBG] Creating userinfo response
2019-07-28 17:04:27.939 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:27.939 +05:30 [DBG] Creating userinfo response
2019-07-28 17:04:27.939 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:27.939 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:27.939 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:28.316 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:28.317 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:04:28.317 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:28.381 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:28.382 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:04:28.382 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:04:28.663 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:28.810 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:04:28.981 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:04:28.981 +05:30 [DBG] End userinfo request
2019-07-28 17:04:29.068 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:04:29.069 +05:30 [DBG] End userinfo request
2019-07-28 17:04:56.806 +05:30 [INF] Removing 0 grants
2019-07-28 17:04:56.844 +05:30 [INF] Removing 0 device flow codes
2019-07-28 17:09:21.281 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:09:21.327 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:09:21.328 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:09:21.366 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:09:21.390 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:09:21.390 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:09:21.390 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:09:21.390 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:09:21.391 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:09:21.391 +05:30 [DBG] Start userinfo request
2019-07-28 17:09:21.391 +05:30 [DBG] Bearer token found in header
2019-07-28 17:09:21.970 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:09:21.971 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:09:22.421 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:09:22.421 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:09:22.491 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:09:22.491 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:09:22.492 +05:30 [DBG] Creating userinfo response
2019-07-28 17:09:22.492 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:09:22.492 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:09:22.683 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:09:22.684 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:09:22.684 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:09:22.881 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:09:23.101 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:09:23.101 +05:30 [DBG] End userinfo request
2019-07-28 17:11:02.645 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:11:03.124 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:03.124 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:03.125 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:11:03.125 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:11:03.125 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:11:03.125 +05:30 [DBG] Start discovery request
2019-07-28 17:11:04.351 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:11:04.500 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:04.575 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:04.575 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:05.052 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:05.052 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:11:05.052 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:11:05.052 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:11:05.053 +05:30 [DBG] Rendering check session result
2019-07-28 17:11:05.337 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:05.337 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:05.417 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:05.481 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:05.481 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:05.482 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:11:05.482 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:11:05.482 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:11:05.482 +05:30 [DBG] Start userinfo request
2019-07-28 17:11:05.482 +05:30 [DBG] Bearer token found in header
2019-07-28 17:11:06.362 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:11:06.362 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:11:07.231 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:11:07.231 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:11:07.340 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:11:07.341 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:11:07.341 +05:30 [DBG] Creating userinfo response
2019-07-28 17:11:07.341 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:07.341 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:07.692 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:11:07.693 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:11:07.693 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:08.072 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:11:08.244 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:11:08.244 +05:30 [DBG] End userinfo request
2019-07-28 17:11:14.260 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:11:14.393 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:14.394 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:14.394 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:11:14.394 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:11:14.394 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:11:14.394 +05:30 [DBG] Start discovery request
2019-07-28 17:11:15.291 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:11:15.520 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:15.578 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:15.578 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:15.823 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:15.905 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:15.906 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:16.044 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:11:16.044 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:11:16.044 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:11:16.044 +05:30 [DBG] Rendering check session result
2019-07-28 17:11:16.123 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:16.194 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:16.194 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:16.194 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:11:16.195 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:11:16.196 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:11:16.196 +05:30 [DBG] Start userinfo request
2019-07-28 17:11:16.196 +05:30 [DBG] Bearer token found in header
2019-07-28 17:11:16.862 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:11:16.863 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:11:17.482 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:11:17.482 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:11:17.528 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:11:17.528 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:11:17.528 +05:30 [DBG] Creating userinfo response
2019-07-28 17:11:17.529 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:17.529 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:17.773 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:11:17.773 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:11:17.774 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:18.017 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:11:18.162 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:11:18.162 +05:30 [DBG] End userinfo request
2019-07-28 17:11:55.258 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:11:55.337 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:55.337 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:55.338 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:11:55.338 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:11:55.338 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:11:55.338 +05:30 [DBG] Start discovery request
2019-07-28 17:11:56.242 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:11:56.730 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:56.845 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:56.845 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:56.959 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:57.033 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:57.033 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:57.228 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:11:57.248 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:11:57.403 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:11:57.403 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:11:57.403 +05:30 [DBG] Rendering check session result
2019-07-28 17:11:57.435 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:11:57.435 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:11:57.436 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:11:57.436 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:11:57.436 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:11:57.436 +05:30 [DBG] Start userinfo request
2019-07-28 17:11:57.436 +05:30 [DBG] Bearer token found in header
2019-07-28 17:11:58.129 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:11:58.129 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:11:58.609 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:11:58.609 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:11:58.667 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:11:58.668 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:11:58.668 +05:30 [DBG] Creating userinfo response
2019-07-28 17:11:58.668 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:58.668 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:58.886 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:11:58.886 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:11:58.887 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:11:59.092 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:11:59.283 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:11:59.284 +05:30 [DBG] End userinfo request
2019-07-28 17:16:03.957 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:16:04.002 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:04.002 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:04.003 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:16:04.003 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:16:04.003 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:16:04.003 +05:30 [DBG] Start discovery request
2019-07-28 17:16:04.470 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:16:04.696 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:16:04.696 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:16:04.696 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:16:04.697 +05:30 [DBG] Rendering check session result
2019-07-28 17:16:06.058 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:16:06.106 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:06.107 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:06.248 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:16:06.287 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:06.287 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:06.395 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:16:06.461 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:06.461 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:06.461 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:16:06.462 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:16:06.462 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:16:06.462 +05:30 [DBG] Start userinfo request
2019-07-28 17:16:06.462 +05:30 [DBG] Bearer token found in header
2019-07-28 17:16:06.993 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:16:06.994 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:16:07.461 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:16:07.461 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:16:07.534 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:16:07.535 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:16:07.535 +05:30 [DBG] Creating userinfo response
2019-07-28 17:16:07.535 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:16:07.535 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:16:07.810 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:16:07.810 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:16:07.810 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:16:08.012 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:16:08.171 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:16:08.171 +05:30 [DBG] End userinfo request
2019-07-28 17:16:14.105 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:16:14.253 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:14.254 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:14.255 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:16:14.255 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:16:14.255 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:16:14.256 +05:30 [DBG] Start discovery request
2019-07-28 17:16:15.082 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:16:15.200 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:16:15.300 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:15.300 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:15.473 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:16:15.635 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:15.635 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:15.636 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:16:15.637 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:16:15.637 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:16:15.637 +05:30 [DBG] Rendering check session result
2019-07-28 17:16:15.718 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:16:15.787 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:16:15.788 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:16:15.788 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:16:15.789 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:16:15.789 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:16:15.789 +05:30 [DBG] Start userinfo request
2019-07-28 17:16:15.789 +05:30 [DBG] Bearer token found in header
2019-07-28 17:16:16.336 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:16:16.336 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:16:17.116 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:16:17.116 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:16:17.187 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:16:17.187 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:16:17.187 +05:30 [DBG] Creating userinfo response
2019-07-28 17:16:17.187 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:16:17.188 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:16:17.407 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:16:17.407 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:16:17.407 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:16:17.595 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:16:17.733 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:16:17.733 +05:30 [DBG] End userinfo request
2019-07-28 17:18:36.762 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:18:36.948 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:18:36.948 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:18:36.949 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:18:36.950 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:18:36.950 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:18:36.950 +05:30 [DBG] Start discovery request
2019-07-28 17:18:37.767 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:18:37.954 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:18:38.057 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:18:38.058 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:18:38.259 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:18:38.316 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:18:38.316 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:18:38.316 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:18:38.316 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:18:38.316 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:18:38.316 +05:30 [DBG] Rendering check session result
2019-07-28 17:18:38.562 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:18:38.642 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:18:38.642 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:18:38.643 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:18:38.643 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:18:38.643 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:18:38.643 +05:30 [DBG] Start userinfo request
2019-07-28 17:18:38.643 +05:30 [DBG] Bearer token found in header
2019-07-28 17:18:39.250 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:18:39.250 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:18:39.881 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:18:39.881 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:18:39.941 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:18:39.941 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:18:39.942 +05:30 [DBG] Creating userinfo response
2019-07-28 17:18:39.942 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:18:39.942 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:18:40.185 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:18:40.186 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:18:40.186 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:18:40.437 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:18:40.562 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:18:40.562 +05:30 [DBG] End userinfo request
2019-07-28 17:32:46.023 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:32:46.115 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:32:46.512 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:32:46.512 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:32:46.972 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:32:46.973 +05:30 [DBG] Start end session request validation
2019-07-28 17:32:46.973 +05:30 [DBG] Start identity token validation
2019-07-28 17:32:47.079 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:32:47.079 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:32:47.122 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:32:47.957 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:32:47.957 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:32:47.958 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:32:47.959 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:32:47.959 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:32:47.959 +05:30 [DBG] Start userinfo request
2019-07-28 17:32:47.959 +05:30 [DBG] Bearer token found in header
2019-07-28 17:32:49.080 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:32:49.080 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:32:49.080 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 17:32:49.206 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:32:49.207 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:32:49.277 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:32:49.279 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564313961,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"69a32bcb371f4d18bdf625a99c59cd49","iat":1564313661,"at_hash":"eS0-_0B4QgUrEJ-s1F1hhw","sid":"ab17f55af9fd9b87c3400e8949d1e928","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:32:49.640 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:32:49.640 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 17:32:51.870 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:32:51.870 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:32:51.914 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:32:51.914 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564313661,"exp":1564317261,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564313658,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:32:51.914 +05:30 [DBG] Creating userinfo response
2019-07-28 17:32:51.914 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:32:51.914 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:32:52.116 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:32:52.116 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:32:52.116 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:32:52.324 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:32:52.872 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:32:52.872 +05:30 [DBG] End userinfo request
2019-07-28 17:32:53.404 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:32:53.404 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:32:53.404 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:32:53.405 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:32:53.405 +05:30 [DBG] Start end session request validation
2019-07-28 17:32:53.405 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:32:53.405 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:00.185 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:33:00.186 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:33:00.187 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:33:00.440 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUIE:00000002","TimeStamp":"2019-07-28T12:03:00.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:33:00.683 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:00.684 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:00.684 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:00.684 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:00.684 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:00.684 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:00.684 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:00.995 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:00.995 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:00.995 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:00.995 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:00.995 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:00.996 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:00.996 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:01.975 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:01.976 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:01.976 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:01.976 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:01.976 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:01.976 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:01.976 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:02.358 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:02.358 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:02.358 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:02.359 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:02.359 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:02.359 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:02.359 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:02.972 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:02.972 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:02.972 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:02.972 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:02.973 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:02.973 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:02.973 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:05.141 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:05.142 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:05.142 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:05.142 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:05.142 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:05.142 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:05.142 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:05.143 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:33:05.144 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:33:05.144 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:33:05.144 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:05.144 +05:30 [DBG] Start end session request validation
2019-07-28 17:33:05.144 +05:30 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:33:05.144 +05:30 [DBG] Success validating end session request from null
2019-07-28 17:33:10.903 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:33:11.094 +05:30 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:33:11.218 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:33:11.218 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:33:11.218 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:33:11.218 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:33:11.218 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:33:11.218 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUIK:00000002","TimeStamp":"2019-07-28T12:03:11.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:33:11.218 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:33:11.219 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUIJ:00000003","TimeStamp":"2019-07-28T12:03:11.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:33:12.386 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 17:33:12.386 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 17:33:12.387 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 17:33:12.387 +05:30 [DBG] Processing signout callback request
2019-07-28 17:33:13.142 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:13.142 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:13.143 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 17:33:13.143 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 17:33:13.143 +05:30 [INF] Successful signout callback.
2019-07-28 17:33:13.143 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 17:33:13.143 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 17:33:14.196 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 17:33:14.199 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 17:33:14.199 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 17:33:14.199 +05:30 [DBG] Processing signout callback request
2019-07-28 17:33:14.690 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:14.691 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:14.691 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 17:33:14.691 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 17:33:14.691 +05:30 [INF] Successful signout callback.
2019-07-28 17:33:14.691 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 17:33:14.691 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 17:33:15.475 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:33:16.453 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:16.453 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:16.737 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:17.416 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:17.701 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:17.760 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:33:17.863 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:17.863 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:17.864 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:33:17.865 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:33:17.865 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:33:17.865 +05:30 [DBG] Start discovery request
2019-07-28 17:33:18.415 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:18.416 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:33:18.848 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:33:18.935 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 17:33:19.080 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 17:33:19.080 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 17:33:19.080 +05:30 [DBG] Start authorize request
2019-07-28 17:33:19.081 +05:30 [DBG] No user present in authorize request
2019-07-28 17:33:19.081 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:33:19.427 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:19.427 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:19.896 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:19.896 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:20.155 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:20.504 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:20.658 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:21.045 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:21.045 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:33:21.084 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0702bd22901a402a9628450533f6cba5","UiLocales":null,"Nonce":"dc316b98334044f49d95322a4281a1b5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0702bd22901a402a9628450533f6cba5","nonce":"dc316b98334044f49d95322a4281a1b5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:33:21.084 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 17:33:21.372 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:33:22.063 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:22.063 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:22.270 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:22.769 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:22.957 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:23.435 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:23.435 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:33:24.037 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:24.038 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:34.656 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:33:34.704 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:33:35.336 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:35.337 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:35.523 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:35.972 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:36.161 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:36.668 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:36.668 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:33:37.003 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:33:37.004 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 17:33:37.004 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 17:33:37.005 +05:30 [DBG] Adding auth_time claim with value: 1564315417
2019-07-28 17:33:37.080 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:33:37.197 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUIM:00000004","TimeStamp":"2019-07-28T12:03:37.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 17:33:37.720 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:33:37.777 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:33:38.264 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:38.264 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:38.708 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:38.709 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:38.929 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:39.429 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:39.609 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:40.100 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:40.100 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:33:40.286 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:33:40.286 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 17:33:40.286 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 17:33:40.286 +05:30 [DBG] Adding auth_time claim with value: 1564315420
2019-07-28 17:33:40.286 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:33:40.376 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUIN:00000001","TimeStamp":"2019-07-28T12:03:40.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 17:33:41.088 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:41.089 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:41.160 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 17:33:41.184 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 17:33:41.184 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 17:33:41.185 +05:30 [DBG] Start authorize callback request
2019-07-28 17:33:41.188 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:41.188 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:33:41.795 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:41.795 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:41.981 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:42.401 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:42.523 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:42.940 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:33:42.940 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:33:42.940 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"0702bd22901a402a9628450533f6cba5","UiLocales":null,"Nonce":"dc316b98334044f49d95322a4281a1b5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"abe130ed55422d26a4d5bdbb9b17af09","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"0702bd22901a402a9628450533f6cba5","nonce":"dc316b98334044f49d95322a4281a1b5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:33:43.017 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 17:33:43.018 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 17:33:43.018 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 17:33:43.018 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:33:43.285 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 17:33:43.285 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 17:33:43.322 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5cTQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****sIbQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUIM:00000005","TimeStamp":"2019-07-28T12:03:43.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 17:33:43.323 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"0702bd22901a402a9628450533f6cba5","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 17:33:43.323 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:33:43.331 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:33:43.976 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:33:44.013 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:44.014 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:44.014 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:33:44.014 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:33:44.014 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:33:44.014 +05:30 [DBG] Start discovery request
2019-07-28 17:33:44.420 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:33:44.442 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 17:33:44.480 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:44.480 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:44.481 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 17:33:44.481 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 17:33:44.482 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 17:33:44.482 +05:30 [DBG] Start key discovery request
2019-07-28 17:33:44.531 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:33:44.563 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:44.563 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:44.571 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:33:44.604 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:44.604 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:44.605 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:33:44.605 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:33:44.605 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:33:44.605 +05:30 [DBG] Start userinfo request
2019-07-28 17:33:44.605 +05:30 [DBG] Bearer token found in header
2019-07-28 17:33:45.226 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:45.226 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:45.727 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:45.727 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:45.792 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:33:45.792 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315423,"exp":1564319023,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315420,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:33:45.793 +05:30 [DBG] Creating userinfo response
2019-07-28 17:33:45.793 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:45.793 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:45.989 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:45.990 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:33:45.990 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:46.229 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:46.523 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:33:46.523 +05:30 [DBG] End userinfo request
2019-07-28 17:33:46.551 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:33:46.560 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:33:46.560 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:33:46.560 +05:30 [DBG] Rendering check session result
2019-07-28 17:33:48.039 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:33:48.081 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:48.081 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:48.081 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:33:48.082 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:33:48.082 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:33:48.082 +05:30 [DBG] Start discovery request
2019-07-28 17:33:48.505 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:33:48.621 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:33:48.659 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:48.659 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:48.660 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:33:48.660 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:33:48.661 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:33:48.661 +05:30 [DBG] Start userinfo request
2019-07-28 17:33:48.681 +05:30 [DBG] Bearer token found in header
2019-07-28 17:33:49.029 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:33:49.030 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:33:49.030 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:33:49.031 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:33:49.031 +05:30 [DBG] Rendering check session result
2019-07-28 17:33:49.174 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:33:49.174 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:33:49.174 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:33:49.175 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:33:49.175 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:33:49.175 +05:30 [DBG] Start userinfo request
2019-07-28 17:33:49.175 +05:30 [DBG] Bearer token found in header
2019-07-28 17:33:49.710 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:49.710 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:50.125 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:50.126 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:50.762 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:50.762 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:50.860 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:33:50.860 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315423,"exp":1564319023,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315420,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:33:50.861 +05:30 [DBG] Creating userinfo response
2019-07-28 17:33:50.861 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:50.861 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:51.249 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:33:51.249 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:33:51.297 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:51.299 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:33:51.301 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:51.302 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:33:51.302 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315423,"exp":1564319023,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315420,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:33:51.302 +05:30 [DBG] Creating userinfo response
2019-07-28 17:33:51.302 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:51.303 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:51.700 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:51.701 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:33:51.701 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:33:51.770 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:52.094 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:33:52.094 +05:30 [DBG] End userinfo request
2019-07-28 17:33:52.096 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:33:52.247 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:33:52.248 +05:30 [DBG] End userinfo request
2019-07-28 17:34:45.651 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:34:45.687 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:34:45.687 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:34:45.769 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:34:45.815 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:34:45.815 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:34:45.817 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:34:45.817 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:34:45.818 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:34:45.818 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:34:45.818 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:34:45.818 +05:30 [DBG] Start end session request validation
2019-07-28 17:34:45.818 +05:30 [DBG] Start identity token validation
2019-07-28 17:34:45.930 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:34:45.930 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:34:45.931 +05:30 [DBG] Start userinfo request
2019-07-28 17:34:45.931 +05:30 [DBG] Bearer token found in header
2019-07-28 17:34:46.670 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:34:46.670 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:34:46.671 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 17:34:46.674 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:34:46.674 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:34:46.879 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:34:46.880 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315423,"exp":1564315723,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"dc316b98334044f49d95322a4281a1b5","iat":1564315423,"at_hash":"xzJkS2gkKqSoUpq-N69krQ","sid":"abe130ed55422d26a4d5bdbb9b17af09","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315420,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:34:46.880 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:34:46.881 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 17:34:47.157 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:34:47.159 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:34:47.159 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:34:47.205 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUIO:00000004","TimeStamp":"2019-07-28T12:04:47.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:34:47.330 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:34:47.331 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:34:47.391 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:34:47.392 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315423,"exp":1564319023,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315420,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:34:47.393 +05:30 [DBG] Creating userinfo response
2019-07-28 17:34:47.393 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:34:47.393 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:34:47.629 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:34:47.629 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:34:47.630 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:34:47.811 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:34:47.971 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:34:47.971 +05:30 [DBG] End userinfo request
2019-07-28 17:34:48.077 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 17:34:48.078 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 17:34:48.078 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 17:34:48.078 +05:30 [DBG] Processing signout callback request
2019-07-28 17:34:48.536 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:34:48.536 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:34:48.537 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 17:34:48.537 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 17:34:48.537 +05:30 [INF] Successful signout callback.
2019-07-28 17:34:48.537 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 17:34:48.537 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 17:36:37.143 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:36:37.197 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:36:37.197 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:36:37.198 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:36:37.198 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:36:37.199 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:36:37.199 +05:30 [DBG] Start discovery request
2019-07-28 17:36:37.514 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:36:37.832 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 17:36:37.833 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 17:36:37.833 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 17:36:37.833 +05:30 [DBG] Start authorize request
2019-07-28 17:36:37.833 +05:30 [DBG] No user present in authorize request
2019-07-28 17:36:37.833 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:36:38.231 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:36:38.232 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:36:38.342 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:38.892 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:39.104 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:39.363 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:39.364 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:36:39.364 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e0d9728c2e9a4064961f87c6927324c2","UiLocales":null,"Nonce":"23655dfedaa04a36b044487a64f568f5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"e0d9728c2e9a4064961f87c6927324c2","nonce":"23655dfedaa04a36b044487a64f568f5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:36:39.364 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 17:36:39.815 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:36:40.452 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:36:40.453 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:36:40.674 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:41.065 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:41.229 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:41.550 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:41.597 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:36:42.124 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:36:42.124 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:36:55.547 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:36:55.608 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:36:56.229 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:36:56.229 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:36:56.421 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:56.846 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:57.003 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:57.315 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:57.315 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:36:57.533 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:36:57.533 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 17:36:57.533 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 17:36:57.533 +05:30 [DBG] Adding auth_time claim with value: 1564315617
2019-07-28 17:36:57.534 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:36:57.599 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUIP:00000004","TimeStamp":"2019-07-28T12:06:57.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 17:36:58.142 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:36:58.142 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:36:58.198 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 17:36:58.199 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 17:36:58.199 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 17:36:58.199 +05:30 [DBG] Start authorize callback request
2019-07-28 17:36:58.199 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:36:58.199 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:36:58.599 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:36:58.599 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:36:58.704 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:58.927 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:59.031 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:36:59.308 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:36:59.356 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:36:59.356 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"e0d9728c2e9a4064961f87c6927324c2","UiLocales":null,"Nonce":"23655dfedaa04a36b044487a64f568f5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"aaf28264a44222dc58d273905a847f1d","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"e0d9728c2e9a4064961f87c6927324c2","nonce":"23655dfedaa04a36b044487a64f568f5"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:36:59.417 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 17:36:59.417 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 17:36:59.417 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 17:36:59.418 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:36:59.576 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 17:36:59.576 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 17:36:59.580 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****HFow","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CLvQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUIP:00000005","TimeStamp":"2019-07-28T12:06:59.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 17:36:59.580 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"e0d9728c2e9a4064961f87c6927324c2","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 17:36:59.580 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:36:59.580 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:37:00.055 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:37:00.081 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:00.081 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:00.082 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:37:00.082 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:37:00.082 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:37:00.082 +05:30 [DBG] Start discovery request
2019-07-28 17:37:00.417 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:37:00.456 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 17:37:00.480 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:00.480 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:00.480 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 17:37:00.480 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 17:37:00.480 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 17:37:00.481 +05:30 [DBG] Start key discovery request
2019-07-28 17:37:00.536 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:37:00.567 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:00.567 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:00.576 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:37:00.603 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:00.603 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:00.603 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:37:00.604 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:37:00.604 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:37:00.604 +05:30 [DBG] Start userinfo request
2019-07-28 17:37:00.604 +05:30 [DBG] Bearer token found in header
2019-07-28 17:37:01.006 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:37:01.006 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:37:01.496 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:37:01.497 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:37:01.537 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:37:01.538 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315619,"exp":1564319219,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:37:01.538 +05:30 [DBG] Creating userinfo response
2019-07-28 17:37:01.538 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:01.538 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:01.768 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:37:01.769 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:37:01.769 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:01.967 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:37:02.074 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:37:02.074 +05:30 [DBG] End userinfo request
2019-07-28 17:37:02.139 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:37:02.139 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:37:02.139 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:37:02.139 +05:30 [DBG] Rendering check session result
2019-07-28 17:37:03.127 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:37:03.168 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:03.168 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:03.169 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:37:03.169 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:37:03.170 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:37:03.170 +05:30 [DBG] Start discovery request
2019-07-28 17:37:03.607 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:37:03.904 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:37:03.942 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:03.943 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:03.943 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:37:03.944 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:37:03.945 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:37:03.945 +05:30 [DBG] Start userinfo request
2019-07-28 17:37:03.945 +05:30 [DBG] Bearer token found in header
2019-07-28 17:37:04.338 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:37:04.338 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:37:04.338 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:37:04.338 +05:30 [DBG] Rendering check session result
2019-07-28 17:37:04.514 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:37:04.642 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:37:04.642 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:37:04.642 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:37:04.643 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:37:04.646 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:37:04.646 +05:30 [DBG] Start userinfo request
2019-07-28 17:37:04.646 +05:30 [DBG] Bearer token found in header
2019-07-28 17:37:04.651 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:37:04.651 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:37:05.496 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:37:05.496 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:37:05.690 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:37:05.690 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:37:05.769 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:37:05.769 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315619,"exp":1564319219,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:37:05.822 +05:30 [DBG] Creating userinfo response
2019-07-28 17:37:05.822 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:05.823 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:06.093 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:37:06.094 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:37:06.095 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:06.265 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:37:06.265 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:37:06.315 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:37:06.501 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:37:06.504 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315619,"exp":1564319219,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:37:06.506 +05:30 [DBG] Creating userinfo response
2019-07-28 17:37:06.507 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:06.507 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:06.862 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:37:06.862 +05:30 [DBG] End userinfo request
2019-07-28 17:37:06.994 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:37:06.994 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:37:06.995 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:37:07.206 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:37:07.373 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:37:07.373 +05:30 [DBG] End userinfo request
2019-07-28 17:40:52.139 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:40:52.168 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:52.169 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:52.169 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:40:52.170 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:40:52.170 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:40:52.170 +05:30 [DBG] Start discovery request
2019-07-28 17:40:52.541 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:40:52.651 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 17:40:52.652 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 17:40:52.652 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 17:40:52.652 +05:30 [DBG] Start authorize request
2019-07-28 17:40:52.652 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:40:52.652 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:40:53.117 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:40:53.117 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:40:53.258 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:40:53.691 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:40:53.926 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:40:54.372 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:40:54.373 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:40:54.373 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"5f4ec2893fd8420189aa404f78a2593b","UiLocales":null,"Nonce":"0f459ad325d544b9b32046ea7cfd7f30","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"aaf28264a44222dc58d273905a847f1d","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"5f4ec2893fd8420189aa404f78a2593b","nonce":"0f459ad325d544b9b32046ea7cfd7f30"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:40:54.462 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 17:40:54.463 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 17:40:54.463 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 17:40:54.463 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:40:54.612 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 17:40:54.612 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 17:40:54.617 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****u12A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JTdw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUIS:00000002","TimeStamp":"2019-07-28T12:10:54.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 17:40:54.617 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"5f4ec2893fd8420189aa404f78a2593b","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 17:40:54.977 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:40:55.017 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:55.017 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:55.018 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:40:55.018 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:40:55.018 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:40:55.018 +05:30 [DBG] Start discovery request
2019-07-28 17:40:55.418 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:40:55.426 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 17:40:55.459 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:55.459 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:55.459 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 17:40:55.460 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 17:40:55.460 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 17:40:55.460 +05:30 [DBG] Start key discovery request
2019-07-28 17:40:55.501 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:40:55.531 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:55.531 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:55.538 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:40:55.586 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:55.586 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:55.587 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:40:55.587 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:40:55.588 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:40:55.588 +05:30 [DBG] Start userinfo request
2019-07-28 17:40:55.588 +05:30 [DBG] Bearer token found in header
2019-07-28 17:40:56.064 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:40:56.064 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:40:56.544 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:40:56.544 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:40:56.594 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:40:56.594 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:40:56.594 +05:30 [DBG] Creating userinfo response
2019-07-28 17:40:56.594 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:40:56.595 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:40:56.786 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:40:56.786 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:40:56.786 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:40:56.967 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:40:57.101 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:40:57.101 +05:30 [DBG] End userinfo request
2019-07-28 17:40:57.126 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:40:57.140 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:40:57.141 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:40:57.141 +05:30 [DBG] Rendering check session result
2019-07-28 17:40:57.530 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:40:57.575 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:57.575 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:57.576 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:40:57.576 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:40:57.576 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:40:57.576 +05:30 [DBG] Start discovery request
2019-07-28 17:40:58.042 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:40:58.138 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:40:58.176 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:58.176 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:58.177 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:40:58.195 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:40:58.195 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:40:58.195 +05:30 [DBG] Start userinfo request
2019-07-28 17:40:58.195 +05:30 [DBG] Bearer token found in header
2019-07-28 17:40:58.814 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:40:58.815 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:40:58.816 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:40:58.816 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:40:58.816 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:40:58.819 +05:30 [DBG] Rendering check session result
2019-07-28 17:40:58.901 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:40:58.905 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:40:58.947 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:40:58.948 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:40:58.990 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:40:58.991 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:40:58.991 +05:30 [DBG] Start userinfo request
2019-07-28 17:40:58.991 +05:30 [DBG] Bearer token found in header
2019-07-28 17:41:00.115 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:41:00.115 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:41:00.230 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:41:00.230 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:41:00.230 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:41:00.230 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:41:00.231 +05:30 [DBG] Creating userinfo response
2019-07-28 17:41:00.231 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:41:00.232 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:41:00.565 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:41:00.565 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:41:00.565 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:41:00.862 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:41:01.107 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:41:01.107 +05:30 [DBG] End userinfo request
2019-07-28 17:41:01.164 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:41:01.164 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:41:01.215 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:41:01.215 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:41:01.215 +05:30 [DBG] Creating userinfo response
2019-07-28 17:41:01.215 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:41:01.215 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:41:01.445 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:41:01.445 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:41:01.445 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:41:01.632 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:41:01.767 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:41:01.767 +05:30 [DBG] End userinfo request
2019-07-28 17:42:31.215 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:42:31.301 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:42:31.301 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:42:31.302 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:42:31.302 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:42:31.303 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:42:31.303 +05:30 [DBG] Start discovery request
2019-07-28 17:42:32.051 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:42:32.096 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:42:32.112 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:42:32.112 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:42:32.348 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:42:32.359 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:42:32.359 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:42:32.418 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:42:32.419 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:42:32.419 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:42:32.419 +05:30 [DBG] Rendering check session result
2019-07-28 17:42:32.440 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:42:32.540 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:42:32.540 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:42:32.540 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:42:32.541 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:42:32.541 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:42:32.541 +05:30 [DBG] Start userinfo request
2019-07-28 17:42:32.541 +05:30 [DBG] Bearer token found in header
2019-07-28 17:42:33.190 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:42:33.191 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:42:33.709 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:42:33.709 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:42:33.753 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:42:33.773 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:42:33.774 +05:30 [DBG] Creating userinfo response
2019-07-28 17:42:33.774 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:42:33.774 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:42:33.958 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:42:33.959 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:42:33.959 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:42:34.166 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:42:34.283 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:42:34.283 +05:30 [DBG] End userinfo request
2019-07-28 17:43:07.751 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:43:07.950 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:43:07.951 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:43:07.951 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:43:07.952 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:43:07.953 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:43:07.953 +05:30 [DBG] Start discovery request
2019-07-28 17:43:08.923 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:43:08.923 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:43:09.072 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:43:09.072 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:43:09.135 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:43:09.182 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:43:09.182 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:43:09.292 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:43:09.292 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:43:09.293 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:43:09.293 +05:30 [DBG] Rendering check session result
2019-07-28 17:43:09.333 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:43:09.383 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:43:09.383 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:43:09.383 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:43:09.383 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:43:09.384 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:43:09.384 +05:30 [DBG] Start userinfo request
2019-07-28 17:43:09.384 +05:30 [DBG] Bearer token found in header
2019-07-28 17:43:09.878 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:43:09.879 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:43:10.455 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:43:10.456 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:43:10.500 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:43:10.501 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:43:10.501 +05:30 [DBG] Creating userinfo response
2019-07-28 17:43:10.501 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:43:10.501 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:43:10.720 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:43:10.720 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:43:10.721 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:43:10.946 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:43:11.083 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:43:11.083 +05:30 [DBG] End userinfo request
2019-07-28 17:49:28.393 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:49:28.469 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:28.470 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:28.470 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:49:28.471 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:49:28.471 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:49:28.471 +05:30 [DBG] Start discovery request
2019-07-28 17:49:28.947 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:49:29.120 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:49:29.120 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:49:29.120 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:49:29.120 +05:30 [DBG] Rendering check session result
2019-07-28 17:49:30.151 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:30.196 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:30.196 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:30.489 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:30.521 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:30.521 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:30.589 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:30.628 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:30.629 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:30.629 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:49:30.630 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:49:30.630 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:49:30.630 +05:30 [DBG] Start userinfo request
2019-07-28 17:49:30.631 +05:30 [DBG] Bearer token found in header
2019-07-28 17:49:31.171 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:49:31.171 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:49:31.541 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:49:31.541 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:49:31.584 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:49:31.584 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:49:31.584 +05:30 [DBG] Creating userinfo response
2019-07-28 17:49:31.585 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:31.585 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:31.843 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:49:31.843 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:49:31.844 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:32.025 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:49:32.194 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:49:32.194 +05:30 [DBG] End userinfo request
2019-07-28 17:49:47.502 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:49:47.535 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:47.536 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:47.536 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:49:47.536 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:49:47.536 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:49:47.536 +05:30 [DBG] Start discovery request
2019-07-28 17:49:47.995 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:49:48.263 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:49:48.264 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:49:48.264 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:49:48.264 +05:30 [DBG] Rendering check session result
2019-07-28 17:49:48.970 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:49.016 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:49.016 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:49.499 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:49.685 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:49.686 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:49.734 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:49.771 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:49.771 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:49.771 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:49:49.772 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:49:49.772 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:49:49.772 +05:30 [DBG] Start userinfo request
2019-07-28 17:49:49.772 +05:30 [DBG] Bearer token found in header
2019-07-28 17:49:50.603 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:49:50.603 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:49:51.364 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:49:51.365 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:49:51.438 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:49:51.440 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:49:51.440 +05:30 [DBG] Creating userinfo response
2019-07-28 17:49:51.441 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:51.441 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:51.690 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:49:51.690 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:49:51.690 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:51.922 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:49:52.298 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:49:52.299 +05:30 [DBG] End userinfo request
2019-07-28 17:49:55.029 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:49:55.172 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:55.172 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:55.173 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:49:55.173 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:49:55.173 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:49:55.173 +05:30 [DBG] Start discovery request
2019-07-28 17:49:56.316 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:56.506 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:49:56.506 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:56.689 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:56.690 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:56.715 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:56.715 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:56.715 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:49:56.716 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:49:56.716 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:49:56.716 +05:30 [DBG] Rendering check session result
2019-07-28 17:49:56.716 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:49:56.809 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:49:56.809 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:49:56.810 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:49:56.810 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:49:56.811 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:49:56.811 +05:30 [DBG] Start userinfo request
2019-07-28 17:49:56.811 +05:30 [DBG] Bearer token found in header
2019-07-28 17:49:57.424 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:49:57.424 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:49:57.994 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:49:57.994 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:49:58.064 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:49:58.064 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:49:58.065 +05:30 [DBG] Creating userinfo response
2019-07-28 17:49:58.065 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:58.065 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:58.260 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:49:58.260 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:49:58.261 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:49:58.470 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:49:58.622 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:49:58.623 +05:30 [DBG] End userinfo request
2019-07-28 17:50:02.281 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:02.329 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:02.329 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:02.525 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:50:02.526 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:50:02.526 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:50:02.527 +05:30 [DBG] Processing signout request for 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:50:02.527 +05:30 [DBG] Start end session request validation
2019-07-28 17:50:02.527 +05:30 [DBG] Start identity token validation
2019-07-28 17:50:02.662 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:02.759 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:02.759 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:02.759 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:50:02.760 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:50:02.760 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:50:02.760 +05:30 [DBG] Start userinfo request
2019-07-28 17:50:02.760 +05:30 [DBG] Bearer token found in header
2019-07-28 17:50:03.595 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:03.595 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:03.598 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 17:50:03.912 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:03.913 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:03.913 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:03.913 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564316154,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"0f459ad325d544b9b32046ea7cfd7f30","iat":1564315854,"at_hash":"kJNde5uqrQntIJp_L8ccaw","sid":"aaf28264a44222dc58d273905a847f1d","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:03.913 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:50:03.914 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 17:50:04.435 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:04.436 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:04.692 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:04.692 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564315854,"exp":1564319454,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564315617,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:04.693 +05:30 [DBG] Creating userinfo response
2019-07-28 17:50:04.693 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:04.693 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:05.739 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:05.739 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:50:05.739 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:06.439 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:50:06.439 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:50:06.439 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:50:06.440 +05:30 [INF] {"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUJ4:00000003","TimeStamp":"2019-07-28T12:20:06.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:50:06.679 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:07.015 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:50:07.015 +05:30 [DBG] End userinfo request
2019-07-28 17:50:10.567 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 17:50:10.569 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 17:50:10.570 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 17:50:10.570 +05:30 [DBG] Processing signout callback request
2019-07-28 17:50:10.995 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:10.995 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:10.995 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 17:50:10.996 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 17:50:10.996 +05:30 [INF] Successful signout callback.
2019-07-28 17:50:10.996 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 17:50:10.996 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 17:50:14.851 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:50:14.885 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:14.885 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:14.886 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:50:14.887 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:50:14.887 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:50:14.887 +05:30 [DBG] Start discovery request
2019-07-28 17:50:15.257 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:50:15.309 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 17:50:15.310 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 17:50:15.310 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 17:50:15.333 +05:30 [DBG] Start authorize request
2019-07-28 17:50:15.334 +05:30 [DBG] No user present in authorize request
2019-07-28 17:50:15.334 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:50:15.821 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:15.822 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:15.977 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:16.389 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:16.518 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:16.894 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:16.894 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:50:16.895 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"65efa043bb904133b1c1dc9f98239b4d","UiLocales":null,"Nonce":"748c96901f17436c90d802762d0b7179","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"65efa043bb904133b1c1dc9f98239b4d","nonce":"748c96901f17436c90d802762d0b7179"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:50:16.895 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 17:50:16.948 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:50:17.620 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:17.620 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:17.910 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:18.429 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:18.625 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:19.183 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:19.183 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:50:19.906 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:19.906 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:36.855 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:50:36.901 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:50:37.468 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:37.468 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:37.623 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:38.037 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:38.193 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:38.657 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:38.657 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:50:38.911 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:50:38.912 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 17:50:38.912 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 17:50:38.912 +05:30 [DBG] Adding auth_time claim with value: 1564316438
2019-07-28 17:50:38.912 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:50:38.980 +05:30 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"alice","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUJ3:00000010","TimeStamp":"2019-07-28T12:20:38.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 17:50:39.585 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:39.585 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:39.712 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 17:50:39.713 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 17:50:39.713 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 17:50:39.713 +05:30 [DBG] Start authorize callback request
2019-07-28 17:50:39.713 +05:30 [DBG] User in authorize request: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 17:50:39.714 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:50:40.102 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:40.102 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:40.220 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:40.464 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:40.585 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:40.914 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:50:40.914 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:50:40.915 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"65efa043bb904133b1c1dc9f98239b4d","UiLocales":null,"Nonce":"748c96901f17436c90d802762d0b7179","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e987ee12fe81cc7b896edc04192fc606","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"65efa043bb904133b1c1dc9f98239b4d","nonce":"748c96901f17436c90d802762d0b7179"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:50:40.979 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 17:50:40.979 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 17:50:40.980 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 17:50:40.980 +05:30 [DBG] Getting claims for access token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 17:50:41.107 +05:30 [DBG] Getting claims for identity token for subject: 4748eea2-ad64-49bc-960e-6d9d3532abf3 and client: angular_spa
2019-07-28 17:50:41.107 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 17:50:41.111 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-sNw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zLuA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUJ4:00000006","TimeStamp":"2019-07-28T12:20:41.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 17:50:41.112 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"65efa043bb904133b1c1dc9f98239b4d","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 17:50:41.113 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:50:41.114 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:50:41.221 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:50:41.259 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:41.259 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:41.260 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:50:41.260 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:50:41.260 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:50:41.260 +05:30 [DBG] Start discovery request
2019-07-28 17:50:41.677 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:50:41.687 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 17:50:41.714 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:41.714 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:41.714 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 17:50:41.715 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 17:50:41.716 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 17:50:41.716 +05:30 [DBG] Start key discovery request
2019-07-28 17:50:41.756 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:41.784 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:41.784 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:41.792 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:41.816 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:41.816 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:41.816 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:50:41.817 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:50:41.817 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:50:41.817 +05:30 [DBG] Start userinfo request
2019-07-28 17:50:41.817 +05:30 [DBG] Bearer token found in header
2019-07-28 17:50:42.258 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:42.258 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:42.772 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:42.772 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:42.851 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:42.851 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316441,"exp":1564320041,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564316438,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:42.851 +05:30 [DBG] Creating userinfo response
2019-07-28 17:50:42.851 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:42.851 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:43.058 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:43.058 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:50:43.058 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:43.240 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:43.383 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:50:43.383 +05:30 [DBG] End userinfo request
2019-07-28 17:50:43.415 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:50:43.422 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:50:43.423 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:50:43.423 +05:30 [DBG] Rendering check session result
2019-07-28 17:50:44.458 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:50:44.499 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:44.499 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:44.500 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:50:44.500 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:50:44.500 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:50:44.500 +05:30 [DBG] Start discovery request
2019-07-28 17:50:44.971 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:50:45.266 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:45.300 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:45.301 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:45.301 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:50:45.303 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:50:45.303 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:50:45.303 +05:30 [DBG] Start userinfo request
2019-07-28 17:50:45.304 +05:30 [DBG] Bearer token found in header
2019-07-28 17:50:45.607 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:50:45.609 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:50:45.609 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:50:45.610 +05:30 [DBG] Rendering check session result
2019-07-28 17:50:45.685 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:45.779 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:45.779 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:45.780 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:50:45.780 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:50:45.781 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:50:45.781 +05:30 [DBG] Start userinfo request
2019-07-28 17:50:45.782 +05:30 [DBG] Bearer token found in header
2019-07-28 17:50:46.231 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:46.232 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:46.851 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:46.851 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:46.983 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:46.983 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:47.101 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:47.173 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316441,"exp":1564320041,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564316438,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:47.173 +05:30 [DBG] Creating userinfo response
2019-07-28 17:50:47.173 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:47.173 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:47.516 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:47.518 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:50:47.519 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:48.086 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:48.173 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:48.173 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:48.275 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:48.276 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316441,"exp":1564320041,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564316438,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:48.276 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:50:48.277 +05:30 [DBG] Creating userinfo response
2019-07-28 17:50:48.277 +05:30 [DBG] End userinfo request
2019-07-28 17:50:48.277 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:48.277 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:48.502 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:48.502 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:50:48.502 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:48.700 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:48.825 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:50:48.825 +05:30 [DBG] End userinfo request
2019-07-28 17:50:51.164 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:51.208 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:51.208 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:51.243 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:50:51.286 +05:30 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-28 17:50:51.287 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-28 17:50:51.287 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-28 17:50:51.287 +05:30 [DBG] Processing signout request for 4748eea2-ad64-49bc-960e-6d9d3532abf3
2019-07-28 17:50:51.288 +05:30 [DBG] Start end session request validation
2019-07-28 17:50:51.289 +05:30 [DBG] Start identity token validation
2019-07-28 17:50:51.387 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:51.387 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:51.387 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:50:51.389 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:50:51.435 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:50:51.435 +05:30 [DBG] Start userinfo request
2019-07-28 17:50:51.435 +05:30 [DBG] Bearer token found in header
2019-07-28 17:50:52.201 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:52.201 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:52.201 +05:30 [DBG] Client found: angular_spa / Angular SPA
2019-07-28 17:50:52.330 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:52.331 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:52.338 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:52.338 +05:30 [DBG] Token validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316441,"exp":1564316741,"iss":"http://localhost:5000","aud":"angular_spa","nonce":"748c96901f17436c90d802762d0b7179","iat":1564316441,"at_hash":"MOJRURs--obdMP8GV9M7xA","sid":"e987ee12fe81cc7b896edc04192fc606","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564316438,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:52.339 +05:30 [INF] End session request validation success
{"ClientId":"angular_spa","ClientName":"Angular SPA","SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","PostLogOutUri":"http://localhost:4200/signout-callback.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200/signout-callback.html"},"$type":"EndSessionRequestValidationLog"}
2019-07-28 17:50:52.386 +05:30 [DBG] Success validating end session request from angular_spa
2019-07-28 17:50:52.695 +05:30 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-28 17:50:52.695 +05:30 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-28 17:50:52.696 +05:30 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-28 17:50:52.696 +05:30 [INF] {"SubjectId":"4748eea2-ad64-49bc-960e-6d9d3532abf3","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLOIOU0OMUJ7:00000002","TimeStamp":"2019-07-28T12:20:52.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-07-28 17:50:52.906 +05:30 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-28 17:50:52.907 +05:30 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-28 17:50:52.907 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-28 17:50:52.907 +05:30 [DBG] Processing signout callback request
2019-07-28 17:50:53.024 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:53.024 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:53.118 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:50:53.119 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316441,"exp":1564320041,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"4748eea2-ad64-49bc-960e-6d9d3532abf3","auth_time":1564316438,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:50:53.119 +05:30 [DBG] Creating userinfo response
2019-07-28 17:50:53.120 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:53.120 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:53.477 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:53.478 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:50:53.478 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:50:53.836 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:50:53.884 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:50:53.885 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:50:53.885 +05:30 [DBG] No client front-channel logout URLs
2019-07-28 17:50:53.885 +05:30 [DBG] No client back-channel logout URLs
2019-07-28 17:50:53.885 +05:30 [INF] Successful signout callback.
2019-07-28 17:50:53.885 +05:30 [DBG] No client front-channel iframe urls
2019-07-28 17:50:53.885 +05:30 [DBG] No client back-channel iframe urls
2019-07-28 17:50:54.034 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:50:54.034 +05:30 [DBG] End userinfo request
2019-07-28 17:50:59.179 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:50:59.225 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:50:59.225 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:50:59.226 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:50:59.227 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:50:59.227 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:50:59.227 +05:30 [DBG] Start discovery request
2019-07-28 17:50:59.629 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:50:59.698 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 17:50:59.699 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 17:50:59.699 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 17:50:59.699 +05:30 [DBG] Start authorize request
2019-07-28 17:50:59.699 +05:30 [DBG] No user present in authorize request
2019-07-28 17:50:59.699 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:51:00.270 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:00.270 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:00.410 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:00.977 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:01.116 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:01.508 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:01.509 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:51:01.509 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7e16d220a7984f8e9f43f92a6538d24c","UiLocales":null,"Nonce":"41f7edf3857d496b90b5572fdc091de8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"7e16d220a7984f8e9f43f92a6538d24c","nonce":"41f7edf3857d496b90b5572fdc091de8"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:51:01.510 +05:30 [INF] Showing login: User is not authenticated
2019-07-28 17:51:01.616 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:51:02.283 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:02.283 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:02.508 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:03.039 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:03.211 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:03.666 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:03.666 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:51:04.282 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:04.282 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:20.203 +05:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-28 17:51:20.253 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:51:20.808 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:20.809 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:20.975 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:21.380 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:21.538 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:21.870 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:21.871 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:51:22.052 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:51:22.052 +05:30 [DBG] Adding idp claim with value: local
2019-07-28 17:51:22.052 +05:30 [DBG] Adding amr claim with value: pwd
2019-07-28 17:51:22.052 +05:30 [DBG] Adding auth_time claim with value: 1564316482
2019-07-28 17:51:22.052 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:51:22.116 +05:30 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","DisplayName":"bob","Endpoint":"UI","ClientId":"angular_spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLOIOU0OMUJ7:00000007","TimeStamp":"2019-07-28T12:21:22.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-07-28 17:51:22.676 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:22.677 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:22.685 +05:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-28 17:51:22.685 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-28 17:51:22.685 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-28 17:51:22.686 +05:30 [DBG] Start authorize callback request
2019-07-28 17:51:22.686 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:51:22.686 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 17:51:23.066 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:23.066 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:23.170 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:23.389 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:23.547 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:23.831 +05:30 [DBG] Found ["API Resouces","API1"] API scopes in database
2019-07-28 17:51:23.832 +05:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-28 17:51:23.832 +05:30 [DBG] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email API1","State":"7e16d220a7984f8e9f43f92a6538d24c","UiLocales":null,"Nonce":"41f7edf3857d496b90b5572fdc091de8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"613e6a7764b0ba6f2bd8e9c9d84ef2f5","Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"7e16d220a7984f8e9f43f92a6538d24c","nonce":"41f7edf3857d496b90b5572fdc091de8"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 17:51:23.879 +05:30 [DBG] Client is configured to not require consent, no consent is required
2019-07-28 17:51:23.879 +05:30 [DBG] Creating Implicit Flow response.
2019-07-28 17:51:23.879 +05:30 [DBG] Getting claims for access token for client: angular_spa
2019-07-28 17:51:23.879 +05:30 [DBG] Getting claims for access token for subject: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 17:51:24.011 +05:30 [DBG] Getting claims for identity token for subject: 51889b61-8249-43ee-9843-05e977a12abe and client: angular_spa
2019-07-28 17:51:24.011 +05:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-28 17:51:24.015 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":"http://localhost:4200/callback.html","Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"openid profile email API1","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ifOQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****PUhQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLOIOU0OMUJ7:00000008","TimeStamp":"2019-07-28T12:21:24.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-07-28 17:51:24.015 +05:30 [DBG] Authorize endpoint response
{"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ClientId":"angular_spa","RedirectUri":"http://localhost:4200/callback.html","State":"7e16d220a7984f8e9f43f92a6538d24c","Scope":"openid profile email API1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-28 17:51:24.015 +05:30 [DBG] Augmenting SignInContext
2019-07-28 17:51:24.015 +05:30 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-28 17:51:24.483 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:51:24.530 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:24.530 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:24.530 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:51:24.530 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:51:24.530 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:51:24.530 +05:30 [DBG] Start discovery request
2019-07-28 17:51:24.857 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:51:24.873 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2019-07-28 17:51:24.899 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:24.899 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:24.900 +05:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-28 17:51:24.900 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-28 17:51:24.900 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-28 17:51:24.900 +05:30 [DBG] Start key discovery request
2019-07-28 17:51:24.945 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:51:24.974 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:24.974 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:24.981 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:51:25.010 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:25.010 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:25.010 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:51:25.011 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:51:25.011 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:51:25.011 +05:30 [DBG] Start userinfo request
2019-07-28 17:51:25.011 +05:30 [DBG] Bearer token found in header
2019-07-28 17:51:25.639 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:25.639 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:26.023 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:26.023 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:26.063 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:51:26.063 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316484,"exp":1564320084,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564316482,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:51:26.063 +05:30 [DBG] Creating userinfo response
2019-07-28 17:51:26.063 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:26.063 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:26.236 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:26.237 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:51:26.237 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:26.400 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:26.516 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:51:26.516 +05:30 [DBG] End userinfo request
2019-07-28 17:51:26.546 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:51:26.547 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:51:26.547 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:51:26.547 +05:30 [DBG] Rendering check session result
2019-07-28 17:51:27.458 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 17:51:27.490 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:27.490 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:27.491 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 17:51:27.491 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 17:51:27.492 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 17:51:27.492 +05:30 [DBG] Start discovery request
2019-07-28 17:51:27.993 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 17:51:28.155 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:51:28.197 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:28.197 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:28.198 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:51:28.198 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:51:28.199 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:51:28.199 +05:30 [DBG] Start userinfo request
2019-07-28 17:51:28.199 +05:30 [DBG] Bearer token found in header
2019-07-28 17:51:28.426 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 17:51:28.429 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 17:51:28.429 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 17:51:28.430 +05:30 [DBG] Rendering check session result
2019-07-28 17:51:28.602 +05:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2019-07-28 17:51:28.709 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 17:51:28.709 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 17:51:28.709 +05:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-28 17:51:28.769 +05:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-28 17:51:28.769 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-28 17:51:28.769 +05:30 [DBG] Start userinfo request
2019-07-28 17:51:28.769 +05:30 [DBG] Bearer token found in header
2019-07-28 17:51:28.922 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:28.922 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:29.608 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:29.608 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:29.778 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:29.778 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:29.910 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:51:29.994 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316484,"exp":1564320084,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564316482,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:51:29.994 +05:30 [DBG] Creating userinfo response
2019-07-28 17:51:29.994 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:29.994 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:30.295 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:30.295 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:51:30.296 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:30.650 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:30.653 +05:30 [DBG] angular_spa found in database: true
2019-07-28 17:51:30.653 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 17:51:30.868 +05:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-28 17:51:30.870 +05:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1564316484,"exp":1564320084,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","API Resouces"],"client_id":"angular_spa","sub":"51889b61-8249-43ee-9843-05e977a12abe","auth_time":1564316482,"idp":"local","scope":["openid","profile","email","API1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-28 17:51:30.870 +05:30 [DBG] Creating userinfo response
2019-07-28 17:51:30.870 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:51:30.870 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:30.871 +05:30 [DBG] End userinfo request
2019-07-28 17:51:30.871 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:31.078 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:31.078 +05:30 [DBG] Requested claim types: sub zoneinfo birthdate gender website picture profile locale preferred_username middle_name given_name family_name name nickname updated_at email_verified email
2019-07-28 17:51:31.078 +05:30 [DBG] Scopes in access token: openid profile email API1
2019-07-28 17:51:31.314 +05:30 [DBG] Found ["openid","email","profile"] identity scopes in database
2019-07-28 17:51:31.475 +05:30 [INF] Profile service returned the following claim types: sub name given_name family_name email email_verified website preferred_username
2019-07-28 17:51:31.475 +05:30 [DBG] End userinfo request
2019-07-28 19:46:39.678 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 19:46:39.679 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 19:46:39.679 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 19:46:39.679 +05:30 [DBG] Start authorize request
2019-07-28 19:46:39.679 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 19:46:39.679 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 19:46:40.969 +05:30 [DBG] angular_spa found in database: true
2019-07-28 19:46:40.969 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 19:46:40.981 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/renew-callback.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/renew-callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"2f9840043bb343c38dd6efb384e9b335","nonce":"751d5e4aef3f4fd485776eb771f89e5a","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 19:46:40.991 +05:30 [ERR] Request validation failed
2019-07-28 19:46:40.992 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/renew-callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"2f9840043bb343c38dd6efb384e9b335","nonce":"751d5e4aef3f4fd485776eb771f89e5a","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 19:46:41.587 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOIOU0OMUJA:00000001","TimeStamp":"2019-07-28T14:16:41.0000000Z","ProcessId":14328,"LocalIpAddress":"127.0.0.1:47319","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-07-28 20:40:04.412 +05:30 [INF] Starting IdentityServer4 version 2.5.0.0
2019-07-28 20:40:05.094 +05:30 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-28 20:40:05.095 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-28 20:40:05.095 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-28 20:40:05.095 +05:30 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-28 20:40:05.095 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-28 20:40:05.095 +05:30 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-28 20:40:08.192 +05:30 [DBG] Starting grant removal
2019-07-28 20:40:09.317 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 20:40:09.317 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 20:40:09.317 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 20:40:09.485 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 20:40:09.492 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 20:40:09.495 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 20:40:09.495 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 20:40:09.511 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 20:40:09.511 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 20:40:09.903 +05:30 [DBG] Login Url: /Account/Login
2019-07-28 20:40:09.903 +05:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-28 20:40:09.903 +05:30 [DBG] Logout Url: /Account/Logout
2019-07-28 20:40:09.903 +05:30 [DBG] ConsentUrl Url: /consent
2019-07-28 20:40:09.903 +05:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-28 20:40:09.903 +05:30 [DBG] Error Url: /home/error
2019-07-28 20:40:09.903 +05:30 [DBG] Error Id Parameter: errorId
2019-07-28 20:40:09.960 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 20:40:09.960 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 20:40:09.960 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 20:40:10.143 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 20:40:10.143 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 20:40:10.143 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 20:40:10.144 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 20:40:10.144 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 20:40:10.144 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 20:40:10.168 +05:30 [DBG] Start discovery request
2019-07-28 20:40:10.168 +05:30 [DBG] Start discovery request
2019-07-28 20:40:10.168 +05:30 [DBG] Start discovery request
2019-07-28 20:40:12.387 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 20:40:12.387 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 20:40:12.391 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 20:40:15.172 +05:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-07-28 20:40:15.181 +05:30 [DBG] Origin http://localhost:4200 is allowed: true
2019-07-28 20:40:15.182 +05:30 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-07-28 20:40:15.182 +05:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-28 20:40:15.182 +05:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-28 20:40:15.183 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-28 20:40:15.183 +05:30 [DBG] Start discovery request
2019-07-28 20:40:15.255 +05:30 [DBG] Found ["openid","email","profile","API Resouces","API1"] as all scopes in database
2019-07-28 20:40:16.558 +05:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-28 20:40:16.558 +05:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-28 20:40:16.559 +05:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-28 20:40:16.559 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-28 20:40:16.560 +05:30 [DBG] Rendering check session result
2019-07-28 20:40:16.625 +05:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-28 20:40:16.625 +05:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-28 20:40:16.632 +05:30 [DBG] Start authorize request
2019-07-28 20:40:16.707 +05:30 [DBG] User in authorize request: 51889b61-8249-43ee-9843-05e977a12abe
2019-07-28 20:40:16.762 +05:30 [DBG] Start authorize request protocol validation
2019-07-28 20:40:17.358 +05:30 [DBG] angular_spa found in database: true
2019-07-28 20:40:17.493 +05:30 [DBG] client configuration validation for client angular_spa succeeded.
2019-07-28 20:40:17.654 +05:30 [ERR] Invalid redirect_uri: http://localhost:4200/renew-callback.html
{"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/renew-callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"00beaeebc2254bd0a1992428746f8741","nonce":"0b396172e22d4a79ac0e6212f7de15c5","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 20:40:17.663 +05:30 [ERR] Request validation failed
2019-07-28 20:40:17.663 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200/callback.html"],"SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/renew-callback.html","response_type":"id_token token","scope":"openid profile email API1","state":"00beaeebc2254bd0a1992428746f8741","nonce":"0b396172e22d4a79ac0e6212f7de15c5","prompt":"none","id_token_hint":"***REDACTED***"},"$type":"AuthorizeRequestValidationLog"}
2019-07-28 20:40:17.687 +05:30 [INF] {"ClientId":"angular_spa","ClientName":"Angular SPA","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"51889b61-8249-43ee-9843-05e977a12abe","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLOJDMN0UQTK:00000002","TimeStamp":"2019-07-28T15:10:17.0000000Z","ProcessId":16588,"LocalIpAddress":"127.0.0.1:16758","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
